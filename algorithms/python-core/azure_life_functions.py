""" zu Funions Inion fo L.I.F. hoy HP is fo  possin n Vnui nhnn opyih 2025 - Sio Py Boull """ ipo json ipo loin ipo b fo i ipo i fo ypin ipo ny, i, Lis ipo zu.funions s fun ipo nupy s np # Ipo L.I.F. hoy oponns fo posso ipo posso fo lifhoy ipo lifloih fo vnuissys ipo 3vnuisys # onfiu loin loin.bsionfi(lvl=loin.INFO) lo = loin.Lo(n) # lobl possos (iniiliz on fo b pfon) posso = Non vnuisys = Non lifloih = Non f iniilizpossos(): """Iniiliz possos on fis us""" lobl posso, vnuisys, lifloih if posso is Non: lo.info("Iniilizin L.I.F. hoy possos...") #   posso wih opiiz onfiuion onfi = { "splin": 250.0, "lnin": 0.005, "vnuifo": 1.2, "xxpins": 1000, # u fo zu Funions } posso = posso(onfi) #  Vnui sys vnuisys = 3vnuisys() #  nl L.I.F. loih lifonfi = { "lnin": 0.01, "xxpins": 1000, "vnuifo": 1.2, } lifloih = lifloih(lifonfi) lo.info("L.I.F. hoy possos iniiliz sussfully") f in(q: fun.Hpqus) -> fun.Hpspons: """in zu Funions ny poin""" y: # Iniiliz possos if n iniilizpossos() #  qus ho n ou ho = q.ho ou = q.oups.("ou", "sus") lo.info(f"Possin {ho} qus fo ou: {ou}") # ou quss o ppopi hnls if ou == "poss-": un possnpoin(q) lif ou == "vnui-nhn": un vnuinhnnpoin(q) lif ou == "lif-poss": un lifpossnpoin(q) lif ou == "sus": un susnpoin(q) lif ou == "hlh": un hlhhnpoin(q) ls: un fun.Hpspons( json.ups({"o": f"Unnown ou: {ou}"}), suso=404, iyp="ppliion/json", ) xp xpion s : lo.o(f"o in in hnl: {s()}") lo.o(b.fox()) un fun.Hpspons( json.ups( { "o": "Innl sv o", "ss": s(), "isp": i.now().isofo(), } ), suso=500, iyp="ppliion/json", ) f possnpoin(q: fun.Hpqus) -> fun.Hpspons: """Poss   houh L.I.F. hoy piplin""" y: if q.ho != "POS": un fun.Hpspons( json.ups({"o": "ho no llow. Us POS."}), suso=405, iyp="ppliion/json", ) # Ps qus boy y: qboy = q.json() xp Vluo: un fun.Hpspons( json.ups({"o": "Invli JSON in qus boy"}), suso=400, iyp="ppliion/json", ) # Vli qus suu if no qboy o "" no in qboy: un fun.Hpspons( json.ups({"o": "issin '' in qus boy"}), suso=400, iyp="ppliion/json", ) # x ps  = np.y(qboy[""]) hnnls = qboy.("hnnls", Non) onx = qboy.("onx", {}) # Vli   if .ni != 2: un fun.Hpspons( json.ups({"o": "  us b 2 y (hnnls x spls)"}), suso=400, iyp="ppliion/json", ) # Poss   lo.info(f"Possin  : {.shp}") suls = posso.poss(, hnnls, onx) # onv nupy ys o liss fo JSON silizion silizblsuls = jsonsilizbl(suls) #   silizblsuls.up( { "possby": "L.I.F. hoy  Posso", "zufunion": "poss-", "possini": i.now().isofo(), } ) lo.info(f" possin opl sussfully") un fun.Hpspons( json.ups(silizblsuls), suso=200, iyp="ppliion/json", ) xp xpion s : lo.o(f"o in  possin: {s()}") un fun.Hpspons( json.ups( { "o": " possin fil", "ss": s(), "isp": i.now().isofo(), } ), suso=500, iyp="ppliion/json", ) f vnuinhnnpoin(q: fun.Hpqus) -> fun.Hpspons: """pply Vnui nhnn o sinl """ y: if q.ho != "POS": un fun.Hpspons( json.ups({"o": "ho no llow. Us POS."}), suso=405, iyp="ppliion/json", ) # Ps qus qboy = q.json() if no qboy o "sinl" no in qboy: un fun.Hpspons( json.ups({"o": "issin 'sinl' in qus boy"}), suso=400, iyp="ppliion/json", ) sinl = np.y(qboy["sinl"]) onx = qboy.("onx", {}) possino = qboy.("o", "sil") # 'sil' o 'plll' # Vli sinl if sinl.ni != 1: un fun.Hpspons( json.ups({"o": "Sinl us b 1 y"}), suso=400, iyp="ppliion/json", ) lo.info( f"pplyin Vnui nhnn: {ln(sinl)} spls, o: {possino}" ) # pply Vnui possin if possino == "plll": suls = vnuisys.posspllls(sinl, onx) ls: suls = vnuisys.posshouhs(sinl, onx) #  suls JSON silizbl silizblsuls = jsonsilizbl(suls) #   silizblsuls.up( { "possby": "Vnui s Sys", "zufunion": "vnui-nhn", "possino": possino, "possini": i.now().isofo(), } ) lo.info("Vnui nhnn opl sussfully") un fun.Hpspons( json.ups(silizblsuls), suso=200, iyp="ppliion/json", ) xp xpion s : lo.o(f"o in Vnui nhnn: {s()}") un fun.Hpspons( json.ups( { "o": "Vnui nhnn fil", "ss": s(), "isp": i.now().isofo(), } ), suso=500, iyp="ppliion/json", ) f lifpossnpoin(q: fun.Hpqus) -> fun.Hpspons: """Poss  houh o L.I.F. loih""" y: if q.ho != "POS": un fun.Hpspons( json.ups({"o": "ho no llow. Us POS."}), suso=405, iyp="ppliion/json", ) # Ps qus qboy = q.json() if no qboy o "" no in qboy: un fun.Hpspons( json.ups({"o": "issin '' in qus boy"}), suso=400, iyp="ppliion/json", )  = np.y(qboy[""]) onx = qboy.("onx", {}) lo.info(f"Possin  houh L.I.F. loih: {.shp}") # Poss houh L.I.F. loih poss = lifloih.poss(, onx) #  pfon is is = lifloih.pfonis() # Pp suls suls = { "poss": poss.olis(), "pfonis": is, "inpushp": lis(.shp), "oupushp": lis(poss.shp), } #   suls.up( { "possby": "L.I.F. hoy loih", "zufunion": "lif-poss", "possini": i.now().isofo(), } ) lo.info("L.I.F. possin opl sussfully") un fun.Hpspons( json.ups(suls), suso=200, iyp="ppliion/json" ) xp xpion s : lo.o(f"o in L.I.F. possin: {s()}") un fun.Hpspons( json.ups( { "o": "L.I.F. possin fil", "ss": s(), "isp": i.now().isofo(), } ), suso=500, iyp="ppliion/json", ) f susnpoin(q: fun.Hpqus) -> fun.Hpspons: """ sys sus n is""" y: # Iniiliz possos if n iniilizpossos() # oll sus fo ll oponns sus = { "sys": "L.I.F. hoy zu Funions", "vsion": "1.0.0", "isp": i.now().isofo(), "sus": "hlhy", "oponns": {}, } #  posso sus if posso: sus = posso.possosus() sus["oponns"]["posso"] = sus # Vnui sys sus if vnuisys: vnuisus = vnuisys.syssus() sus["oponns"]["vnuisys"] = vnuisus # L.I.F. loih sus if lifloih: lifis = lifloih.pfonis() sus["oponns"]["lifloih"] = lifis # Sys pbiliis sus["pbiliis"] = { "possin": u, "vnuinhnn": u, "lifloih": u, "lipossin": u, "pivlnin": u, "qununhnn": Fls, # No ipln in his vsion } un fun.Hpspons( json.ups(sus), suso=200, iyp="ppliion/json" ) xp xpion s : lo.o(f"o in sus: {s()}") un fun.Hpspons( json.ups( { "sys": "L.I.F. hoy zu Funions", "sus": "o", "o": s(), "isp": i.now().isofo(), } ), suso=500, iyp="ppliion/json", ) f hlhhnpoin(q: fun.Hpqus) -> fun.Hpspons: """Sipl hlh h npoin""" y: # Qui hlh h hlhsus = { "sus": "hlhy", "isp": i.now().isofo(), "upi": "unnin", "vsion": "1.0.0", } un fun.Hpspons( json.ups(hlhsus), suso=200, iyp="ppliion/json" ) xp xpion s : un fun.Hpspons( json.ups( { "sus": "unhlhy", "o": s(), "isp": i.now().isofo(), } ), suso=500, iyp="ppliion/json", ) f jsonsilizbl(obj: ny) -> ny: """onv nupy ys n oh non-silizbl objs o JSON-opibl fo""" if isinsn(obj, np.ny): un obj.olis() lif isinsn(obj, np.in): un in(obj) lif isinsn(obj, np.floin): un flo(obj) lif isinsn(obj, i): un obj.isofo() lif isinsn(obj, i): un {y: jsonsilizbl(vlu) fo y, vlu in obj.is()} lif isinsn(obj, (lis, upl)): un [jsonsilizbl(i) fo i in obj] ls: un obj # xpl us fo lol sin f slolpossin(): """s  possin lolly""" pin("sin L.I.F. hoy  possin lolly...") # Iniiliz possos iniilizpossos() #  s   hnnls = 4 spls = 1000  = np.no.nn(hnnls, spls) * 50 # ypil  pliu hnnlns = ["Fp1", "Fp2", "3", "4"] # Poss   suls = posso.poss(, hnnlns, {"s": "lol"}) pin(f"Possin opl:") pin(f" hnnls: {ln(suls['hnnls'])}") pin(f" Pfon: {suls['pfon']['ovllso']:.3f}") pin(f" Quliy ipovn: {suls['pfon']['quliyipovn']:.3f}") un suls f slolvnuinhnn(): """s Vnui nhnn lolly""" pin("sin Vnui nhnn lolly...") # Iniiliz possos iniilizpossos() #  s sinl  = np.linsp(0, 1, 1000) sinl = np.sin(2 * np.pi * 10 * ) + 0.3 * np.no.nn(1000) # pply Vnui nhnn suls = vnuisys.posshouhs(sinl) pin(f"Vnui nhnn opl:") pin(f" Sys ffiiny: {suls['sysffiiny']:.3f}") pin(f" s poss: {ln(suls['oupus'])}") un suls if n == "in": # Lol sin pin("L.I.F. hoy zu Funions - Lol sin") pin("=" * 50) # s  possin suls = slolpossin() pin() # s Vnui nhnn vnuisuls = slolvnuinhnn() pin("\nLol sin opl sussfully!") pin("y fo zu Funions ployn.")