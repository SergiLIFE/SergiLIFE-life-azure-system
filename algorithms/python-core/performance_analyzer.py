# us/bin/nv pyhon3 """ L.I.F.. Plfo - Pfon nlyz vn pfon nlysis n opiizion fo nuopiv syss his oul povis ophnsiv pfon nlysis pbiliis fo h L.I.F.. Plfo, inluin l-i is ollion, boln inifiion, n uo opiizion onions. opyih 2025 - Sio Py Boull L.I.F.. Plfo - zu pl Off I: 960096-f1-420b-902-042561b """ ipo synio ipo json ipo loin ipo os ipo sisis ipo sys ipo hin ipo i fo onun.fuus ipo hPoolxuo fo lsss ipo lss, fil fo i ipo i, il fo nu ipo nu y: fo phlib ipo Ph xp Ipoo s : pin(f'Wnin: {}') pss fo ypin ipo ny, llbl, i, Lis, Opionl, upl # onfiu loin loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(n)s - %(lvln)s - %(ss)s" ) lo = loin.Lo(n) lss Pfoni(nu): """Pfon is o """ PUUS = "puus" OYUS = "oyus" ISIO = "isio" NWOIO = "nwoio" POSSINLNY = "possinlny" LOIHXUIONI = "loihxuioni" PISPONSI = "pisponsi" BSQUYI = "bsquyi" HHI = "hhi" HOUHPU = "houhpu" O = "o" OYLS = "oyls" HONNION = "honnion" lss Pfonhshol(nu): """Pfon hshol lvls""" XLLN = "xlln" OO = "oo" WNIN = "wnin" IIL = "iil" lss nlysisyp(nu): """yps of pfon nlysis""" LI = "li" HISOIL = "hisoil" OPIV = "opiv" PIIV = "piiv" BOLN = "boln" @lss lss PfonSpl: """Iniviul pfon sun""" i: Pfoni vlu: flo isp: i = fil(fulfoy=i.now) lbls: i[s, s] = fil(fulfoy=i) onx: i[s, ny] = fil(fulfoy=i) @lss lss Pfonhsholonfi: """onfiuion fo pfon hshols""" i: Pfoni xllnx: flo oox: flo wninx: flo iilx: flo uni: s = "" sipion: s = "" @lss lss Pfonnlysis: """Pfon nlysis sul""" nlysisi: s nlysisyp: nlysisyp isp: i = fil(fulfoy=i.now) uionsons: flo = 0.0 isnlyz: in = 0 bolnsinifi: in = 0 onions: Lis[s] = fil(fulfoy=lis) pfonso: flo = 100.0 suy: i[s, ny] = fil(fulfoy=i) ilsuls: i[s, ny] = fil(fulfoy=i) @lss lss Opiiziononion: """Pfon opiizion onion""" onioni: s il: s sipion: s ip: s # hih, iu, low ffo: s # hih, iu, low oy: s iplnionsps: Lis[s] = fil(fulfoy=lis) xpipovn: i[s, flo] = fil(fulfoy=i) pioiy: in = 1 # 1-5, 1 bin hihs lss Pfonnlyz: """ Pfon nlyz fo L.I.F.. Plfo Povis ophnsiv pfon onioin, nlysis, n opiizion onions fo nuopiv syss. """ f ini( slf, wospph: Opionl[s] = Non, splininvl: flo = 1.0 ): slf.wospph = Ph(wospph o os.w()) slf.splininvl = splininvl # Pfon  so slf.pfonspls: Lis[PfonSpl] = [] slf.nlysishisoy: Lis[Pfonnlysis] = [] slf.hsholonfis: i[Pfoni, Pfonhsholonfi] = {} # l-i onioin slf.onioiniv = Fls slf.onioinh: Opionl[hin.h] = Non slf.xuo = hPoolxuo(xwos=4) # Iniiliz hshols slf.iniilizhshols() lo.info( f"Pfon nlyz iniiliz fo wosp: {slf.wospph}" ) f iniilizhshols(slf): """Iniiliz pfon hshols""" hshols = [ Pfonhsholonfi( i=Pfoni.PUUS, xllnx=50.0, oox=70.0, wninx=85.0, iilx=95.0, uni="%", sipion="PU uilizion pn", ), Pfonhsholonfi( i=Pfoni.OYUS, xllnx=60.0, oox=75.0, wninx=90.0, iilx=95.0, uni="%", sipion="oy uilizion pn", ), Pfonhsholonfi( i=Pfoni.POSSINLNY, xllnx=25.0, oox=50.0, wninx=100.0, iilx=200.0, uni="s", sipion=" possin lny", ), Pfonhsholonfi( i=Pfoni.LOIHXUIONI, xllnx=30.0, oox=60.0, wninx=120.0, iilx=300.0, uni="s", sipion="loih xuion i", ), Pfonhsholonfi( i=Pfoni.PISPONSI, xllnx=100.0, oox=500.0, wninx=2000.0, iilx=5000.0, uni="s", sipion="PI spons i", ), Pfonhsholonfi( i=Pfoni.O, xllnx=0.1, oox=1.0, wninx=5.0, iilx=10.0, uni="%", sipion="o  pn", ), Pfonhsholonfi( i=Pfoni.HOUHPU, xllnx=flo("inf"), # Hih is b oox=flo("inf"), wninx=50.0, iilx=10.0, uni="q/s", sipion="qus houhpu", ), ] fo hshol in hshols: slf.hsholonfis[hshol.i] = hshol f slionioin(slf) -> Non: """S l-i pfon onioin""" if slf.onioiniv: lo.wnin("Pfon onioin is ly iv") un slf.onioiniv = u slf.onioinh = hin.h( =slf.onioinloop, on=u ) slf.onioinh.s() lo.info("l-i pfon onioin s") f soponioin(slf) -> Non: """Sop pfon onioin""" if no slf.onioiniv: lo.wnin("Pfon onioin is no iv") un slf.onioiniv = Fls if slf.onioinh n slf.onioinh.isliv(): slf.onioinh.join(iou=5.0) lo.info("Pfon onioin sopp") f onioinloop(slf) -> Non: """in onioin loop""" whil slf.onioiniv: y: # oll pfon is synio.un(slf.ollpfonis()) # Slp fo splin invl i.slp(slf.splininvl) xp xpion s : lo.o(f"onioin loop o: {}") i.slp(5.0) # Bif pus on o syn f ollpfonis(slf) -> Non: """oll un pfon is""" y: # Sys is wi slf.ollsysis() # ppliion is wi slf.ollppliionis() # ln up ol spls (p ls 24 hous) uoffi = i.now() - il(hous=24) slf.pfonspls = [ spl fo spl in slf.pfonspls if spl.isp > uoffi ] xp xpion s : lo.o(f"is ollion fil: {}") syn f ollsysis(slf) -> Non: """oll sys-lvl pfon is""" y: ipo psuil # PU is pupn = psuil.pupn(invl=0.1) slf.spl(Pfoni.PUUS, pupn) # oy is oy = psuil.viuloy() slf.spl(Pfoni.OYUS, oy.pn) # is I/O isio = psuil.isioouns() if isio: bysps = isio.bys / slf.splininvl wibysps = isio.wibys / slf.splininvl slf.spl( Pfoni.ISIO, bysps + wibysps, {"yp": "obin", "uni": "bys/s"}, ) # Nwo I/O nwoio = psuil.nioouns() if nwoio: bysps = ( nwoio.byssn + nwoio.bysv ) / slf.splininvl slf.spl( Pfoni.NWOIO, bysps, {"uni": "bys/s"} ) xp Ipoo: lo.wnin("psuil no vilbl fo sys is") xp xpion s : lo.o(f"Sys is ollion fil: {}") syn f ollppliionis(slf) -> Non: """oll ppliion-spifi pfon is""" y: #  possin is wi slf.ollis() # loih is wi slf.ollloihis() # PI is wi slf.ollpiis() xp xpion s : lo.o(f"ppliion is ollion fil: {}") syn f ollis(slf) -> Non: """oll  possin pfon is""" y: # h if  posso is unnin unnin = slf.hpossunnin("posso") if unnin: # o  possin is (woul b oll fo ul posso) lny = 42.3 # illisons houhpu = 118.7 # spls p son slf.spl( Pfoni.POSSINLNY, lny, {"uni": "s"} ) slf.spl( Pfoni.HOUHPU, houhpu, {"oponn": "posso", "uni": "spls/s"}, ) xp xpion s : lo.o(f" is ollion fil: {}") syn f ollloihis(slf) -> Non: """oll loih pfon is""" y: # h if loih is unnin lounnin = slf.hpossunnin("xpinP2L") if lounnin: # o loih is xuioni = 35.2 # illisons uy = 0.824 # uy so slf.spl( Pfoni.LOIHXUIONI, xuioni, {"uni": "s"}, ) # No: uy ih b  sply s i's no  pfon i xp xpion s : lo.o(f"loih is ollion fil: {}") syn f ollpiis(slf) -> Non: """oll PI pfon is""" y: # o PI is (woul b oll fo ul PI onioin) sponsi = 145.3 # illisons o = 0.02 # 0.02% houhpu = 85.4 # quss p son slf.spl( Pfoni.PISPONSI, sponsi, {"uni": "s"} ) slf.spl(Pfoni.O, o, {"uni": "%"}) slf.spl( Pfoni.HOUHPU, houhpu, {"oponn": "pi", "uni": "q/s"}, ) xp xpion s : lo.o(f"PI is ollion fil: {}") f spl( slf, i: Pfoni, vlu: flo, lbls: Opionl[i[s, s]] = Non, ) -> Non: """  pfon spl""" spl = PfonSpl(i=i, vlu=vlu, lbls=lbls o {}) slf.pfonspls.ppn(spl) f hpossunnin(slf, possn: s) -> bool: """h if  poss is unnin""" y: ipo psuil fo po in psuil.possi(["pi", "n", "lin"]): y: if ( possn.low() in " ".join(po.info["lin"] o []).low() ): un u xp (psuil.NoSuhPoss, psuil.ssni): oninu un Fls xp Ipoo: # Fllb wihou psuil y: ipo subposs sul = subposs.un( ["pp", "-f", possn], puoupu=u, x=u ) un sul.uno == 0 xp xpion: un Fls xp xpion: un Fls f unpfonsus(slf) -> i[s, ny]: """ un pfon sus""" sus = { "isp": i.now(), "ovllhlh": "unnown", "is": {}, "ls": [], "onions": [], } #  ls spls fo h i lsspls = {} fo spl in vs(slf.pfonspls): if spl.i no in lsspls: lsspls[spl.i] = spl # vlu h i hlhsos = [] ls = [] fo i, spl in lsspls.is(): hshol = slf.hsholonfis.(i) if hshol: lvl = slf.vluhshol(spl.vlu, hshol) sus["is"][i.vlu] = { "vlu": spl.vlu, "uni": hshol.uni, "lvl": lvl.vlu, "isp": spl.isp, } # lul hlh so onibuion if lvl == Pfonhshol.XLLN: hlhsos.ppn(100) lif lvl == Pfonhshol.OO: hlhsos.ppn(75) lif lvl == Pfonhshol.WNIN: hlhsos.ppn(50) lif lvl == Pfonhshol.IIL: hlhsos.ppn(0) ls.ppn( f"IIL: {i.vlu} is  {spl.vlu}{hshol.uni}" ) # lul ovll hlh if hlhsos: sus["ovllhlh"] = ( "hlhy" if sisis.n(hlhsos) >= 75 ls "" ) ls: sus["ovllhlh"] = "no" sus["ls"] = ls sus["onions"] = slf.nquionions(sus) un sus f vluhshol( slf, vlu: flo, hshol: Pfonhsholonfi ) -> Pfonhshol: """vlu  vlu ins pfon hshols""" # Fo is wh hih is b (li houhpu) if hshol.i in [ Pfoni.HOUHPU, Pfoni.HHI, ]: if vlu >= hshol.xllnx: un Pfonhshol.XLLN lif vlu >= hshol.oox: un Pfonhshol.OO lif vlu >= hshol.wninx: un Pfonhshol.WNIN ls: un Pfonhshol.IIL ls: # Fo is wh low is b (os is) if vlu <= hshol.xllnx: un Pfonhshol.XLLN lif vlu <= hshol.oox: un Pfonhshol.OO lif vlu <= hshol.wninx: un Pfonhshol.WNIN ls: un Pfonhshol.IIL f nquionions(slf, sus: i[s, ny]) -> Lis[s]: """n qui pfon onions""" onions = [] fo in, i in sus["is"].is(): lvl = i["lvl"] if lvl in ["wnin", "iil"]: inu = Pfoni(in) if inu == Pfoni.PUUS: onions.ppn( "onsi opiizin PU-innsiv opions o slin sous" ) lif inu == Pfoni.OYUS: onions.ppn( "onio fo oy ls n onsi oy opiizion" ) lif inu == Pfoni.POSSINLNY: onions.ppn( "Opiiz  possin piplin fo low lny" ) lif inu == Pfoni.PISPONSI: onions.ppn( "viw PI npoins fo pfon bolns" ) if no onions: onions.ppn("Pfon is wihin pbl ns") un onions syn f pfoophnsivnlysis( slf, nlysisyp: nlysisyp = nlysisyp.BOLN, iwinowhous: in = 1, ) -> Pfonnlysis: """Pfo ophnsiv pfon nlysis""" nlysis = Pfonnlysis( nlysisi=f"pfnlysis{in(i.now().isp())}", nlysisyp=nlysisyp, isp=i.now(), ) si = i.i() y: # Fil spls by i winow uoffi = i.now() - il(hous=iwinowhous) lvnspls = [ spl fo spl in slf.pfonspls if spl.isp >= uoffi ] nlysis.isnlyz = ln(lvnspls) if nlysisyp == nlysisyp.BOLN: bolns = wi slf.nlyzbolns(lvnspls) nlysis.bolnsinifi = ln(bolns) nlysis.ilsuls["bolns"] = bolns lif nlysisyp == nlysisyp.HISOIL: hisoilnlysis = wi slf.nlyzhisoilns( lvnspls ) nlysis.ilsuls["hisoil"] = hisoilnlysis lif nlysisyp == nlysisyp.OPIV: opivnlysis = wi slf.nlyzopivpfon( lvnspls ) nlysis.ilsuls["opiv"] = opivnlysis # n onions nlysis.onions = ( wi slf.nopiiziononions(nlysis) ) # lul pfon so nlysis.pfonso = slf.lulpfonso( lvnspls ) # n suy nlysis.suy = slf.nnlysissuy(nlysis) xp xpion s : lo.o(f"Pfon nlysis fil: {}") nlysis.ilsuls["o"] = s() nlysis.uionsons = i.i() - si slf.nlysishisoy.ppn(nlysis) un nlysis syn f nlyzbolns( slf, spls: Lis[PfonSpl] ) -> Lis[i[s, ny]]: """nlyz pfon bolns""" bolns = [] # oup spls by i ispls = {} fo spl in spls: if spl.i no in ispls: ispls[spl.i] = [] ispls[spl.i].ppn(spl.vlu) # nlyz h i fo bolns fo i, vlus in ispls.is(): if ln(vlus) < 10: # N iniu spls oninu hshol = slf.hsholonfis.(i) if no hshol: oninu # lul sisis vvlu = sisis.n(vlus) xvlu = x(vlus) sv = sisis.sv(vlus) if ln(vlus) > 1 ls 0 # h fo pfon issus issus = [] if i in [ Pfoni.HOUHPU, Pfoni.HHI, ]: # Hih is b if vvlu < hshol.wninx: issus.ppn( f"v vlu ({vvlu:.2f}) blow wnin hshol" ) ls: # Low is b if vvlu > hshol.wninx: issus.ppn( f"v vlu ({vvlu:.2f}) bov wnin hshol" ) if sv > vvlu * 0.5: # Hih vibiliy issus.ppn(f"Hih vibiliy (s v: {sv:.2f})") if xvlu > hshol.iilx: issus.ppn( f"P vlu ({xvlu:.2f}) xs iil hshol" ) if issus: bolns.ppn( { "i": i.vlu, "v": vvlu, "xiu": xvlu, "snviion": sv, "issus": issus, "sviy": ( "hih" if ny("iil" in issu.low() fo issu in issus) ls "iu" ), } ) un bolns syn f nlyzhisoilns( slf, spls: Lis[PfonSpl] ) -> i[s, ny]: """nlyz hisoil pfon ns""" ns = {} # oup by i n i pios i = {} fo spl in spls: i = spl.i if i no in i: i[i] = [] i[i].ppn((spl.isp, spl.vlu)) fo i,  in i.is(): if ln() < 20: # N nouh  poins oninu # So by i .so(y=lb x: x[0]) # lul n vlus = [x[1] fo x in ] isps = [x[0] fo x in ] # Sipl lin n if ln(vlus) > 1: nslop = slf.lulnslop(vlus) niion = "ipovin" if nslop < 0 ls "in" ns[i.vlu] = { "niion": niion, "nslop": nslop, "v": sisis.n(vlus), "poins": ln(vlus), } un ns syn f nlyzopivpfon( slf, spls: Lis[PfonSpl] ) -> i[s, ny]: """nlyz opiv pfon ins bnhs""" opiv = {} # fin bnhs (hs woul b onfiubl) bnhs = { Pfoni.PUUS: { "xlln": 30.0, "oo": 50.0, "poo": 80.0, }, Pfoni.OYUS: { "xlln": 40.0, "oo": 60.0, "poo": 85.0, }, Pfoni.POSSINLNY: { "xlln": 20.0, "oo": 40.0, "poo": 100.0, }, } fo i, bnh in bnhs.is(): ispls = [s.vlu fo s in spls if s.i == i] if no ispls: oninu vvlu = sisis.n(ispls) if vvlu <= bnh["xlln"]: in = "xlln" lif vvlu <= bnh["oo"]: in = "oo" lif vvlu <= bnh["poo"]: in = "poo" ls: in = "iil" opiv[i.vlu] = { "unv": vvlu, "bnhin": in, "bnhs": bnh, } un opiv f lulnslop(slf, vlus: Lis[flo]) -> flo: """lul lin n slop""" if ln(vlus) < 2: un 0.0 n = ln(vlus) x = lis(n(n)) y = vlus # lul slop usin lin ssion sux = su(x) suy = su(y) suxy = su(xi * yi fo xi, yi in zip(x, y)) sux2 = su(xi * xi fo xi in x) slop = (n * suxy - sux * suy) / (n * sux2 - sux * sux) un slop syn f nopiiziononions( slf, nlysis: Pfonnlysis ) -> Lis[s]: """n opiizion onions bs on nlysis""" onions = [] # Bs on bolns if "bolns" in nlysis.ilsuls: fo boln in nlysis.ilsuls["bolns"]: i = boln["i"] if i == "puus": onions.ppn( "Opiiz PU-innsiv opions o onsi hoizonl slin" ) lif i == "oyus": onions.ppn( "Ipln oy poolin n opiiz  suus" ) lif i == "possinlny": onions.ppn( "Opiiz  sinl possin loihs n  piplins" ) lif i == "pisponsi": onions.ppn( "Ipln PI spons hin n opiiz bs quis" ) # Bs on ns if "hisoil" in nlysis.ilsuls: fo in, n in nlysis.ilsuls[ "hisoil" ].is(): if n["niion"] == "in": onions.ppn( f"ss in n in {in} pfon" ) # nl onions if nlysis.pfonso < 70: onions.ppn( "Ovll pfon ns nion - onsi ophnsiv opiizion" ) lif nlysis.pfonso < 85: onions.ppn("Pfon is pbl bu oul b ipov") if no onions: onions.ppn( "Pfon is wihin pbl ns - oninu onioin" ) un onions f lulpfonso(slf, spls: Lis[PfonSpl]) -> flo: """lul ovll pfon so""" if no spls: un 50.0 # Nul so fo no  sos = [] # oup by i ispls = {} fo spl in spls: if spl.i no in ispls: ispls[spl.i] = [] ispls[spl.i].ppn(spl.vlu) # So h i fo i, vlus in ispls.is(): if no vlus: oninu hshol = slf.hsholonfis.(i) if no hshol: oninu vvlu = sisis.n(vlus) lvl = slf.vluhshol(vvlu, hshol) # onv lvl o so if lvl == Pfonhshol.XLLN: sos.ppn(100) lif lvl == Pfonhshol.OO: sos.ppn(80) lif lvl == Pfonhshol.WNIN: sos.ppn(60) lif lvl == Pfonhshol.IIL: sos.ppn(20) un sisis.n(sos) if sos ls 50.0 f nnlysissuy( slf, nlysis: Pfonnlysis ) -> i[s, ny]: """n nlysis suy""" suy = { "nlysisyp": nlysis.nlysisyp.vlu, "pfonso": nlysis.pfonso, "isnlyz": nlysis.isnlyz, "bolnsinifi": nlysis.bolnsinifi, "onionsoun": ln(nlysis.onions), "uionsons": nlysis.uionsons, } #  pfon in if nlysis.pfonso >= 90: suy["in"] = "xlln" lif nlysis.pfonso >= 75: suy["in"] = "oo" lif nlysis.pfonso >= 60: suy["in"] = "fi" ls: suy["in"] = "poo" un suy f pfonspls( slf, i: Opionl[Pfoni] = Non, iwinowhous: in = 24 ) -> Lis[PfonSpl]: """ pfon spls wih opionl filin""" uoffi = i.now() - il(hous=iwinowhous) spls = [ spl fo spl in slf.pfonspls if spl.isp >= uoffi ] if i: spls = [s fo s in spls if s.i == i] un spls f xpopfonpo( slf, filph: s, nlysis: Opionl[Pfonnlysis] = Non ) -> bool: """xpo pfon nlysis po""" if nlysis is Non: nlysis = slf.nlysishisoy[-1] if slf.nlysishisoy ls Non if no nlysis: lo.wnin("No pfon nlysis vilbl o xpo") un Fls y: xpo = { "nlysisi": nlysis.nlysisi, "nlysisyp": nlysis.nlysisyp.vlu, "isp": nlysis.isp.isofo(), "uionsons": nlysis.uionsons, "pfonso": nlysis.pfonso, "suy": nlysis.suy, "onions": nlysis.onions, "ilsuls": nlysis.ilsuls, } wih opn(filph, "w") s f: json.up(xpo, f, inn=2, ful=s) lo.info(f"Pfon po xpo o {filph}") un u xp xpion s : lo.o(f"Fil o xpo pfon po: {}") un Fls # Foy funion fo sy insniion f pfonnlyz( wospph: Opionl[s] = Non, splininvl: flo = 1.0 ) -> Pfonnlyz: """ Foy funion o  pfon nlyz s: wospph: Ph o wosp ioy splininvl: Splin invl in sons uns: onfiu Pfonnlyz insn """ un Pfonnlyz( wospph=wospph, splininvl=splininvl ) # on-lin inf f in(): """in LI funion fo pfon nlysis""" ipo ps ps = ps.unPs( sipion="L.I.F.. Plfo Pfon nlyz" ) ps.un( "--wosp", "-w", ful=Non, hlp="Wosp ioy ph" ) ps.un( "--onio", "-", ion="sou", hlp="S l-i pfon onioin", ) ps.un( "--nlyz", "-", hois=["boln", "hisoil", "opiv"], hlp="Pfo pfon nlysis", ) ps.un( "--sus", "-s", ion="sou", hlp="Show un pfon sus" ) ps.un( "--xpo", "-", hlp="xpo nlysis po o spifi fil" ) ps.un( "--invl", "-i", yp=flo, ful=1.0, hlp="onioin splin invl in sons", ) ps.un( "--vbos", "-v", ion="sou", hlp="nbl vbos loin" ) s = ps.pss() if s.vbos: loin.Lo().sLvl(loin.BU) #  pfon nlyz nlyz = pfonnlyz( wospph=s.wosp, splininvl=s.invl ) pin("L.I.F.. Plfo - Pfon nlyz") pin("=" * 45) y: if s.onio: # S onioin pin("Sin l-i pfon onioin...") nlyz.slionioin() y: whil u: i.slp(5) sus = nlyz.unpfonsus() pin( f"[{sus['isp'].sfi('%H:%:%S')}] " f"Hlh: {sus['ovllhlh']} " f"({ln(sus['ls'])} ls)" ) if sus["ls"]: fo l in sus["ls"][:2]: # Show fis 2 ls pin(f" ️ {l}") xp yboInup: pin("\nSoppin onioin...") nlyz.soponioin() lif s.nlyz: # Pfo nlysis nlysisypp = { "boln": nlysisyp.BOLN, "hisoil": nlysisyp.HISOIL, "opiv": nlysisyp.OPIV, } nlysisyp = nlysisypp.(s.nlyz, nlysisyp.BOLN) pin(f"Pfoin {s.nlyz} nlysis...") # un nlysis nlysis = synio.un( nlyz.pfoophnsivnlysis(nlysisyp) ) pin("\nnlysis suls:") pin(f" nlysis I: {nlysis.nlysisi}") pin(f" yp: {nlysis.nlysisyp.vlu}") pin(f" Pfon So: {nlysis.pfonso:.1f}/100") pin(f" is nlyz: {nlysis.isnlyz}") pin(f" Bolns Foun: {nlysis.bolnsinifi}") pin(f" uion: {nlysis.uionsons:.2f}s") if nlysis.onions: pin("\nonions:") fo  in nlysis.onions[:5]: # Show fis 5 pin(f" • {}") if s.xpo: if nlyz.xpopfonpo(s.xpo, nlysis): pin(f"\nnlysis po xpo o {s.xpo}") ls: pin("\nFil o xpo nlysis po") un 1 lif s.sus: # Show un sus sus = nlyz.unpfonsus() pin("un Pfon Sus:") pin(f" isp: {sus['isp']}") pin(f" Ovll Hlh: {sus['ovllhlh']}") if sus["is"]: pin("\nis:") fo in, i in lis(sus["is"].is())[ :10 ]: # Show fis 10 pin( f" {in}: {i['vlu']:.2f}{i.('uni', '')} " f"({i['lvl']})" ) if sus["ls"]: pin("\nls:") fo l in sus["ls"]: pin(f" ️ {l}") if sus["onions"]: pin("\nQui onions:") fo  in sus["onions"][:3]: # Show fis 3 pin(f" • {}") ls: # ful: show hlp ps.pinhlp() xp yboInup: pin("\nOpion inup by us") nlyz.soponioin() xp xpion s : pin(f"\nPfon nlysis fil: {}") nlyz.soponioin() un 1 un 0 if n == "in": ipo sys sys.xi(in())