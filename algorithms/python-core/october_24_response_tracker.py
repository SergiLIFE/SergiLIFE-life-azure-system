# us/bin/nv pyhon3 """ L.I.F. Plfo - Oob 24 spons  l-i in of h 23 ins posps fo oy's ouh pin """ ipo synio ipo json ipo loin ipo os fo lsss ipo lss fo i ipo i, il fo nu ipo nu fo ypin ipo ny, i, Lis, Opionl # Sup loin SIPI = os.ph.in(os.ph.bsph(fil)) LOSI = os.ph.join(SIPI, "los") INI = os.ph.join(SIPI, "in", "o24sponss") os.is(LOSI, xiso=u) os.is(INI, xiso=u) LOFIL = os.ph.join(LOSI, "sponso24.lo") loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(lvln)s - %(ss)s", hnls=[loin.FilHnl(LOFIL), loin.SHnl()], ) lo = loin.Lo(n) lss sponsSus(nu): """spons sus in""" ILSN = "ilsn" OPN = "opn" SPONINS = "sponins" SPONNONOW = "sponnonow" OSHUL = "oshul" OOPL = "oopl" ILS = "ils" USOSIN = "usosin" NOSPONS = "nospons" lss Pospi(nu): """Posp pioiy i""" VIP = "vip" # iosof, Oxfo, bi HIH = "hih" # NHS, Ipil, jo Univsiis IU = "iu" # ionl insiuions SN = "sn" # nl posps @lss lss Posp: """Iniviul posp in""" pospi: s n: s insiuion: s il: s i: Pospi piplinvlu: s sus: sponsSus ilsn: i lson: Opionl[i] = Non spons: Opionl[i] = Non o: Opionl[i] = Non nos: s = "" followup: Opionl[i] = Non lss Oob24spons: """ sponss fo Oob 24 ouh pin""" f ini(slf): slf.posps: i[s, Posp] = {} slf.pinis = { "olposps": 23, "ilssn": 23, "sponssiv": 0, "osshul": 0, "ilss": 0, "usossin": 0, "olpiplin": "£6.4+", "pins": i.now(), } slf.lonownposps() lo.info("Oob 24 spons  iniiliz") f lonownposps(slf) -> Non: """Lo h 23 nown ins posps""" # VIP i posps (onfi fo Oob 15) vipposps = [ Posp( pospi="OXFO001", n=". Sh ihll", insiuion="Oxfo Univsiy", il="nuosin.p@ox..u", i=Pospi.VIP, piplinvlu="£850", sus=sponsSus.ILSN, ilsn=i(2025, 10, 24, 9, 0), followup=i(2025, 10, 26, 9, 0), nos="Oob 15 o piipn - w l", ), Posp( pospi="BI001", n="Pof. Js Hison", insiuion="bi Univsiy", il="bin.sins@..u", i=Pospi.VIP, piplinvlu="£950", sus=sponsSus.ILSN, ilsn=i(2025, 10, 24, 9, 0), followup=i(2025, 10, 26, 9, 0), nos="Oob 15 o piipn - vy ins", ), Posp( pospi="IOSOF001", n=". lx hn", insiuion="iosof sh bi", il="pnships@iosof.o", i=Pospi.VIP, piplinvlu="£2.5", sus=sponsSus.ILSN, ilsn=i(2025, 10, 24, 9, 0), followup=i(2025, 10, 26, 9, 0), nos="IIL PNSHIP - Oob 15 si sssion", ), Posp( pospi="NHSOYL001", n="iil Hlh ", insiuion="NHS oyl Lonon Hospil", il="nuoloy.ln@nhs.n", i=Pospi.HIH, piplinvlu="£450", sus=sponsSus.ILSN, ilsn=i(2025, 10, 24, 9, 0), followup=i(2025, 10, 26, 9, 0), nos="NHS pilo po ponil", ), Posp( pospi="IPIL001", n="sh ", insiuion="Ipil oll Lonon", il="bion.sh@ipil..u", i=Pospi.HIH, piplinvlu="£650", sus=sponsSus.ILSN, ilsn=i(2025, 10, 24, 9, 0), followup=i(2025, 10, 26, 9, 0), nos="sh innovion fous", ), ] #  VIP posps o in fo posp in vipposps: slf.posps[posp.pospi] = posp # iionl 18 posps (plhols fo us o popul) iionlposps = [] fo i in n(6, 24): # Posps 6-23 posp = Posp( pospi=f"POSP{i:03}", n=f"on {i}", insiuion=f"Insiuion {i}", il=f"on{i}@xpl.o", i=Pospi.IU, piplinvlu="£100", sus=sponsSus.ILSN, ilsn=i(2025, 10, 24, 9, 0), followup=i(2025, 10, 26, 9, 0), nos="Up wih ul posp ils", ) iionlposps.ppn(posp) slf.posps[posp.pospi] = posp lo.info(f"Lo {ln(slf.posps)} posps fo in") f uppospsus( slf, pospi: s, nwsus: sponsSus, nos: s = "" ) -> bool: """Up posp spons sus""" if pospi no in slf.posps: lo.wnin(f"Posp {pospi} no foun") un Fls posp = slf.posps[pospi] olsus = posp.sus posp.sus = nwsus posp.lson = i.now() if nos: posp.nos += f" | {i.now().sfi('%Y-%-% %H:%')}: {nos}" # Up is if ( nwsus == sponsSus.SPONINS n olsus != nwsus ): slf.pinis["sponssiv"] += 1 lif nwsus == sponsSus.OSHUL n olsus != nwsus: slf.pinis["osshul"] += 1 lif nwsus == sponsSus.ILS n olsus != nwsus: slf.pinis["ilss"] += 1 lif nwsus == sponsSus.USOSIN n olsus != nwsus: slf.pinis["usossin"] += 1 lo.info(f"Up {pospi}: {olsus.vlu} → {nwsus.vlu}") un u f pospsninfollowup(slf) -> Lis[Posp]: """ posps h n follow-up on""" uni = i.now() un [ posp fo posp in slf.posps.vlus() if ( posp.followup n posp.followup <= uni n posp.sus in [ sponsSus.ILSN, sponsSus.OPN, sponsSus.NOSPONS, ] ) ] f pinsuy(slf) -> i[s, ny]: """n pin pfon suy""" # lul spons  olsn = slf.pinis["ilssn"] sponss = slf.pinis["sponssiv"] spons = (sponss / olsn * 100) if olsn > 0 ls 0 # Sus bown susbown = {} fo sus in sponsSus: oun = su(1 fo p in slf.posps.vlus() if p.sus == sus) susbown[sus.vlu] = oun # i bown ibown = {} fo i in Pospi: oun = su(1 fo p in slf.posps.vlus() if p.i == i) ibown[i.vlu] = oun # Piplin lulion olpiplin = su( in( p.piplinvlu.pl("£", "") .pl("", "000") .pl("", "000000") .pl(",", "") ) fo p in slf.posps.vlus() if p.sus in [ sponsSus.SPONINS, sponsSus.OSHUL, sponsSus.ILS, ] ) un { "pin": "Oob 24, 2025", "olposps": ln(slf.posps), "sponsis": { "ilssn": olsn, "sponssiv": sponss, "sponspn": oun(spons, 1), "osshul": slf.pinis["osshul"], "ilss": slf.pinis["ilss"], "usossin": slf.pinis["usossin"], }, "susbown": susbown, "ibown": ibown, "ivpiplinvlu": f"£{olpiplin:,}", "pospsninfollowup": ln(slf.pospsninfollowup()), "opposps": [ { "i": p.pospi, "insiuion": p.insiuion, "vlu": p.piplinvlu, "sus": p.sus.vlu, } fo p in so( slf.posps.vlus(), y=lb x: (x.i.vlu, x.piplinvlu), vs=u, )[:5] ], } f svin(slf) -> Non: """Sv un in  o fils""" # Sv posps  pospsfil = os.ph.join(INI, "pospso24.json") posps = { pi: { "pospi": p.pospi, "n": p.n, "insiuion": p.insiuion, "il": p.il, "i": p.i.vlu, "piplinvlu": p.piplinvlu, "sus": p.sus.vlu, "ilsn": ( p.ilsn.isofo() if p.ilsn ls Non ), "lson": p.lson.isofo() if p.lson ls Non, "spons": ( p.spons.isofo() if p.spons ls Non ), "o": p.o.isofo() if p.o ls Non, "followup": ( p.followup.isofo() if p.followup ls Non ), "nos": p.nos, } fo pi, p in slf.posps.is() } wih opn(pospsfil, "w") s f: json.up(posps, f, inn=2) # Sv pin is isfil = os.ph.join(INI, "piniso24.json") wih opn(isfil, "w") s f: json.up(slf.pinsuy(), f, inn=2) lo.info(f"in  sv o {INI}") f isplyshbo(slf) -> Non: """isply l-i pin shbo""" suy = slf.pinsuy() pin("=" * 80) pin(" L.I.F. PLFO - OOB 24 SPONS  SHBO") pin("=" * 80) pin(f" pin : {suy['pin']}") pin(f" ol Posps: {suy['olposps']}") pin(f" iv Piplin: {suy['ivpiplinvlu']}") pin() pin(" SPONS IS:") pin("-" * 40) is = suy["sponsis"] pin(f" ils Sn: {is['ilssn']}") pin( f" sponss: {is['sponssiv']} ({is['sponspn']}%)" ) pin(f" os Shul: {is['osshul']}") pin(f" ils S: {is['ilss']}") pin(f" usos Sin: {is['usossin']}") pin() pin(" OP 5 POSPS:") pin("-" * 40) fo i, posp in nu(suy["opposps"], 1): pin( f" {i}. {posp['insiuion']} ({posp['vlu']}) - {posp['sus']}" ) pin() # Follow-up ls followupn = slf.pospsninfollowup() if followupn: pin(f" ️ FOLLOW-UP N: {ln(followupn)} posps") pin("-" * 40) fo posp in followupn[:3]: pin(f" • {posp.insiuion} - Follow up u") if ln(followupn) > 3: pin(f" ... n {ln(followupn) - 3} o") pin() pin(" NX IONS:") pin("-" * 40) pin("1. h Info@lifoh121.o fo sponss") pin("2. Up posp sus s sponss o in") pin("3. Shul os fo ins posps") pin("4. Sn follow-ups on Oob 26 if no spons") pin() pin( " Us: .uppospsus('OXFO001', sponsSus.SPONINS)" ) pin("=" * 80) syn f in(): """in xuion funion""" pin(" INIILIZIN OOB 24 SPONS ...")  = Oob24spons() # isply iniil shbo .isplyshbo() # Sv iniil in  .svin() pin("\n SPONS  Y!") pin("\n s sponss o in, up wih:") pin( " .uppospsus('POSPI', sponsSus.SPONINS)" ) pin("\n in  sv o:", INI) un  if n == "in":  = synio.un(in())