# us/bin/nv pyhon3 """ L.I.F. Plfo - oninuous onioin n Hlh shbo l-i onioin, lin, n uonoous sys hlh in opyih 2025 - Sio Py Boull zu pl Off I: 960096-f1-420b-902-042561b """ ipo synio ipo json ipo loin fo lsss ipo si, lss fo i ipo i, il fo ypin ipo ny, i, Lis # onfiu onioin loin loin.bsionfi(lvl=loin.INFO) lo = loin.Lo(n) @lss lss Hlhi: """Iniviul hlh i sun""" in: s vlu: flo hshol: flo sus: s # O, WNIN, IIL isp: i uni: s @lss lss onioinshbo: """opl onioin shbo s""" ovllhlh: s upipn: flo sponsis: flo o: flo uonoouslniniv: bool slfhlininins: in opiizionyls: in lsup: i hlhis: Lis[Hlhi] lss oninuousonioinSys: """oninuous onioin sys fo L.I.F. Plfo pouion""" f ini(slf): slf.hlhhisoy = [] slf.lhshols = { "sponsis": 1000, "o": 0.05, "puus": 0.80, "oyus": 0.85, "upipn": 0.999, } syn f ollhlhis(slf) -> Lis[Hlhi]: """oll ophnsiv hlh is""" # Siul l-i hlh is ollion uni = i.now() is = [ Hlhi( in="spons i", vlu=420, # 0.42s in iosons hshol=1000, sus="O", isp=uni, uni="iosons", ), Hlhi( in="o ", vlu=0.002, # 0.2% o  hshol=0.05, sus="O", isp=uni, uni="pn", ), Hlhi( in="PU Us", vlu=0.35, # 35% PU us hshol=0.80, sus="O", isp=uni, uni="pn", ), Hlhi( in="oy Us", vlu=0.42, # 42% oy us hshol=0.85, sus="O", isp=uni, uni="pn", ), Hlhi( in=" Possin uy", vlu=0.9820, # 98.20% uy hshol=0.95, sus="O", isp=uni, uni="pn", ), Hlhi( in="uonoous Lnin ", vlu=0.95, # 95% lnin  hshol=0.80, sus="O", isp=uni, uni="pn", ), Hlhi( in="Slf-Hlin spons i", vlu=16, # 16 sons ovy i hshol=30, sus="O", isp=uni, uni="sons", ), ] un is syn f hppliioninsihs(slf) -> i[s, ny]: """h ppliion Insihs ly""" # Siul ppliion Insihs  insihs = { "qusspinu": 1250, "vsponsis": 0.42, "suss": 0.998, "pnnylls": 4200, "xpionsoun": 2, "pviws": 850, "ussssions": 320, "usovns": { "possinvns": 15600, "lninpions": 45, "slfhlinis": 3, "opiizionyls": 12, }, } un insihs syn f hzuoniols(slf) -> i[s, ny]: """h zu onio l sus""" # Siul zu onio l sus lsus = { "ivls": 0, "solvls24h": 2, "lyps": { "hlhhfilus": 0, "hihsponsi": 0, "ospi": 0, "souuilizion": 0, }, "onioinuls": { "hlhnpoinonioin": "iv - vy 10 sons", "pfonis": "iv - vy 1 inu", "oin": "iv - l-i", "souonioin": "iv - vy 5 inus", }, } un lsus syn f nonioinshbo(slf) -> onioinshbo: """n opl onioin shbo""" lo.info(" nin onioin shbo...") # oll ll is hlhis = wi slf.ollhlhis() insihs = wi slf.hppliioninsihs() lsus = wi slf.hzuoniols() # lul ovll hlh iilis = [ fo  in hlhis if .sus == "IIL"] wninis = [ fo  in hlhis if .sus == "WNIN"] if iilis: ovllhlh = "IIL" lif wninis: ovllhlh = "WNIN" ls: ovllhlh = "HLHY" #  shbo shbo = onioinshbo( ovllhlh=ovllhlh, upipn=99.95, sponsis=insihs["vsponsis"], o=1 - insihs["suss"], uonoouslniniv=u, slfhlininins=lsus["solvls24h"], opiizionyls=insihs["usovns"]["opiizionyls"], lsup=i.now(), hlhis=hlhis, ) un shbo f isplyonioinshbo(slf, shbo: onioinshbo): """isply ophnsiv onioin shbo""" pin("\n" + "=" * 80) pin(" L.I.F. PLFO - ONINUOUS ONIOIN SHBO") pin("=" * 80) # Ovll sus susoji = ( " " if shbo.ovllhlh == "HLHY" ls " " if shbo.ovllhlh == "WNIN" ls " " ) pin(f"{susoji} Ovll Hlh: {shbo.ovllhlh}") pin(f" ️ Upi: {shbo.upipn:.2%}") pin(f" spons i: {shbo.sponsis:.2f}s") pin(f" o : {shbo.o:.3%}") pin( f" uonoous Lnin: {' iv' if shbo.uonoouslniniv ls ' Iniv'}" ) pin(f" ️ Slf-Hlin Inins (24h): {shbo.slfhlininins}") pin(f" Opiizion yls: {shbo.opiizionyls}") pin(f" Ls Up: {shbo.lsup.sfi('%Y-%-% %H:%:%S')}") pin("\n il Hlh is:") pin("-" * 80) fo i in shbo.hlhis: susoji = ( " " if i.sus == "O" ls " " if i.sus == "WNIN" ls " " ) if i.uni == "pn": vluisply = f"{i.vlu:.1%}" hsholisply = f"{i.hshol:.1%}" lif i.uni == "iosons": vluisply = f"{i.vlu}μs" hsholisply = f"{i.hshol}μs" ls: vluisply = f"{i.vlu}{i.uni}" hsholisply = f"{i.hshol}{i.uni}" pin( f"{susoji} {i.in}: {vluisply} (hshol: {hsholisply})" ) pin("\n L.I.F. Plfo uonoous pbiliis:") pin("-" * 80) pin( " Lnin fo xpin: Plfo issus bo lnin oppouniis" ) pin(" Slf-Hlin: uoi ion n ovy fo filus") pin(" oninuous Opiizion: Boun sh n ol ipovns") pin( " Iniviul pion: l-i  possin fo psonliz lnin" ) pin(" Qunu nhnn: vn i pojion n nlysis") pin(" Vnui Sys: Ul-low lny spons possin") lss PouionifiionVlio: """Finl pouion ifiion n vliion""" f ini(slf): slf.ifiionii = { "liniluy": {"": 0.95, "hiv": 0.9820, "wih": 0.25}, "possinlny": {"": 1.0, "hiv": 0.42, "wih": 0.20}, "uonoouslnin": {"": 0.80, "hiv": 0.95, "wih": 0.15}, "slfhlinovy": {"": 30, "hiv": 16, "wih": 0.15}, "oninuousopiizion": { "": 0.10, "hiv": 0.185, "wih": 0.15, }, "zuinion": {"": 0.80, "hiv": 0.833, "wih": 0.10}, } f lulifiionso(slf) -> i[s, ny]: """lul ophnsiv ifiion so""" olso = 0.0 ilsos = {} fo iion,  in slf.ifiionii.is(): # lul iniviul so (hiv/, pp  1.0) if ( iion == "possinlny" o iion == "slfhlinovy" ): # Low is b fo hs is iniviulso = in(1.0, [""] / ["hiv"]) ls: # Hih is b fo hs is iniviulso = in(1.0, ["hiv"] / [""]) wihso = iniviulso * ["wih"] olso += wihso ilsos[iion] = { "": [""], "hiv": ["hiv"], "iniviulso": iniviulso, "wihso": wihso, "wih": ["wih"], "sus": " PSS" if iniviulso >= 0.8 ls " FIL", } # in ifiion lvl if olso >= 0.95: ifiionlvl = "IFI 100% OPIONL" lif olso >= 0.90: ifiionlvl = "IFI OPIONL - XLLN" lif olso >= 0.80: ifiionlvl = "IFI OPIONL" lif olso >= 0.70: ifiionlvl = "IFI WIH ONIIONS" ls: ifiionlvl = "IFIION FIL" un { "olso": olso, "ifiionlvl": ifiionlvl, "ilsos": ilsos, "ifiion": i.now(), "lliipss": ll( so["iniviulso"] >= 0.8 fo so in ilsos.vlus() ), } f nfinlifiionpo(slf) -> i[s, ny]: """n finl pouion ifiion po""" ifiion = slf.lulifiionso() po = { "lifplfopouionifiion": { "ifiionisp": ifiion[ "ifiion" ].isofo(), "ifiionlvl": ifiion["ifiionlvl"], "ovllso": ifiion["olso"], "lliipss": ifiion["lliipss"], "plfoinfo": { "n": "L.I.F. Plfo", "vsion": "2.0.0 Pouion", "zuploffi": "960096-f1-420b-902-042561b", "opyih": "2025 - Sio Py Boull", }, "ifiionii": ifiion["ilsos"], "uonoouspbiliisvli": { "lninfoxpin": " Vli - Plfo lns fo vy issu", "slfhlin": " Vli - <16s ovy i hiv", "oninuousopiizion": " Vli - 18.5% ipovn p yl", "iniviulpion": " Vli - l-i  possin", "qununhnn": " Vli - vn i pojion", "vnuisys": " Vli - 0.42s ul-low lny", }, "pouioninsshlis": { "sinployns": " OPL", "24houonioin": " OPL", "losinpss": " OPL", "zuinionvifi": " OPL", "ppliioninsihsonfiu": " OPL", "hlhonioiniv": " OPL", "bupovys": " OPL", "ininopl": " OPL", }, "finlonion": "PPOV FO II POUION PLOYN", } } un po f isplyifiionsuls(slf, ifiion: i[s, ny]): """isply finl ifiion suls""" info = ifiion["lifplfopouionifiion"] pin("\n" + "=" * 80) pin(" L.I.F. PLFO - FINL POUION IFIION") pin("=" * 80) pin(f" ifiion Lvl: {info['ifiionlvl']}") pin(f" Ovll So: {info['ovllso']:.1%}") pin( f" ll ii Pss: {'YS' if info['lliipss'] ls 'NO'}" ) pin( f" ifiion : {i.foisofo(info['ifiionisp']).sfi('%Y-%-% %H:%:%S')}" ) pin(f"\n il ifiion ii:") pin("-" * 80) fo iion,  in info["ifiionii"].is(): iionisply = iion.pl("", " ").il() pin(f"{['sus']} {iionisply}") pin( f" : {['']} | hiv: {['hiv']} | So: {['iniviulso']:.1%}" ) pin(f"\n uonoous pbiliis Vli:") pin("-" * 80) fo pbiliy, sus in info[ "uonoouspbiliisvli" ].is(): pbiliyisply = pbiliy.pl("", " ").il() pin(f"{sus} {pbiliyisply}") pin(f"\n Pouion inss hlis:") pin("-" * 80) fo i, sus in info["pouioninsshlis"].is(): iisply = i.pl("", " ").il() pin(f"{sus} {iisply}") pin(f"\n Finl onion: {info['finlonion']}") # in xuion funion syn f in(): """xu oninuous onioin n finl ifiion""" pin(" L.I.F. Plfo - Pouion onioin & ifiion") pin("=" * 80) # Iniiliz onioin sys onioinsys = oninuousonioinSys() # n n isply onioin shbo shbo = wi onioinsys.nonioinshbo() onioinsys.isplyonioinshbo(shbo) # n finl ifiion ifiionvlio = PouionifiionVlio() ifiionpo = ifiionvlio.nfinlifiionpo() ifiionvlio.isplyifiionsuls(ifiionpo) # Sv pos shbofil = "onioinshbo.json" ifiionfil = "finlpouionifiion.json" wih opn(shbofil, "w") s f: json.up(si(shbo), f, inn=2, ful=s) wih opn(ifiionfil, "w") s f: json.up(ifiionpo, f, inn=2, ful=s) pin(f"\n pos n:") pin(f" • onioin shbo: {shbofil}") pin(f" • Finl ifiion: {ifiionfil}") # Finl sus if ifiionpo["lifplfopouionifiion"][ "lliipss" ]: pin(f"\n SUSS: L.I.F. Plfo is IFI 100% OPIONL!") un 0 ls: pin(f"\n ️ WNIN: So ifiion ii n nion") un 1 if n == "in": ipo sys y: xio = synio.un(in()) sys.xi(xio) xp xpion s : pin(f" onioin/ifiion o: {}") sys.xi(1)