# us/bin/nv pyhon3 """ L.I.F.. Plfo Pnn o nvionn opyih 2025 - Sio Py Boull zu pl Off I: 960096-f1-420b-902-042561b PNN O SOLUION - No zu pnnis libl lol nvionn fo Oob 15, 2025 o n ll fuu psnions O-Y: Slf-onin, pobl, bullpoof """ ipo os ipo sys ipo json ipo loin ipo synio ipo nupy s np fo i ipo i fo ypin ipo i, Lis, ny, Opionl fo lsss ipo lss, si fo nu ipo nu # Sup o nvionn SIPI = os.ph.in(os.ph.bsph(fil)) OI = os.ph.join(SIPI, "pnno") LOSI = os.ph.join(OI, "los") SULSI = os.ph.join(OI, "suls") OINSI = os.ph.join(OI, "oins") PSNIONSI = os.ph.join(OI, "psnions") #  ll o iois fo ioy in [OI, LOSI, SULSI, OINSI, PSNIONSI]: os.is(ioy, xiso=u) LOFIL = os.ph.join(LOSI, "pnno.lo") loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(lvln)s - %(ss)s", hnls=[ loin.FilHnl(LOFIL), loin.SHnl() ] ) lss LninS(nu): """Nul lnin ss fo o""" QUISIION = "quisiion" ONSOLIION = "onsoliion" NION = "nion" NSF = "nsf" lss NulS(nu): """Nul possin ss""" BSLIN = "bslin" FOUS = "fous" LNIN = "lnin" OPIIZ = "opiiz" @lss lss is: """ possin is fo o""" isp: i lphpow: flo bpow: flo hpow: flo pow: flo lpow: flo ohn: flo nioninx: flo lninffiiny: flo nuls: NulS @lss lss LninOuo: """Lnin sssion ouos""" sssioni: s si: i ni: i s: LninS uyipovn: flo nionso: flo pion: flo is: Lis[is] lss Pnnonvionn: """ opl pnn o nvionn fo L.I.F.. Plfo Slf-onin, no xnl pnnis """ f ini(slf): slf.on = "L.I.F.. Plfo - Lnin Iniviully fo xpin" slf.o = "Oob 15, 2025" slf.piipns = 23 slf.vsion = "Pouion v2025.10" slf.ploff = "960096-f1-420b-902-042561b" # o snios slf.snios = { "linil": "Hospil -bs oniiv ssssn", "uionl": "-12 psonliz lnin pion", "npis": "opo inin opiizion", "sh": "Nul fb opiizion suis" } slf.osuls = [] loin.info(f"Pnn o nvionn iniiliz fo {slf.o}") f nlisi(slf, uionsons: in = 30) -> np.ny: """ n lisi synhi   fo o """ splin = 256 # Hz hnnls = 8 # Sn  hnnls spls = uionsons * splin #  lisi  sinls wih nul pns i = np.linsp(0, uionsons, spls)  = np.zos((hnnls, spls)) fo hnnl in n(hnnls): # Bs nul hyhs lphhyh = 2.0 * np.sin(2 * np.pi * 10 * i) # 10 Hz lph bhyh = 1.5 * np.sin(2 * np.pi * 20 * i) # 20 Hz b hhyh = 3.0 * np.sin(2 * np.pi * 6 * i) # 6 Hz h #  lnin nhnn pns lninoulion = 1 + 0.3 * np.sin(2 * np.pi * 0.1 * i) # obin wih nois nois = 0.2 * np.no.nn(spls) [hnnl] = (lphhyh + bhyh + hhyh) * lninoulion + nois loin.info(f"n {uionsons}s of lisi   ({hnnls} hnnls)") un  syn f possos(slf, : np.ny) -> is: """ Poss   fo o wih lisi nul nlysis """ # x fquny bns (siplifi fo o) lphpow = np.n(np.bs([:, ::25])) # Siul lph xion bpow = np.n(np.bs([:, ::12])) # Siul b xion hpow = np.n(np.bs([:, ::42])) # Siul h xion pow = np.n(np.bs([:, ::8])) # Siul  xion lpow = np.n(np.bs([:, ::64])) # Siul l xion # lul iv is ohn = lphpow / (bpow + 0.001) # lph-b io nioninx = bpow / (hpow + 0.001) # nion lulion lninffiiny = (lphpow * ohn) / (1 + hpow) # in nul s bs on is if lninffiiny > 0.8: nuls = NulS.OPIIZ lif nioninx > 0.6: nuls = NulS.FOUS lif lninffiiny > 0.4: nuls = NulS.LNIN ls: nuls = NulS.BSLIN is = is( isp=i.now(), lphpow=flo(lphpow), bpow=flo(bpow), hpow=flo(hpow), pow=flo(pow), lpow=flo(lpow), ohn=flo(ohn), nioninx=flo(nioninx), lninffiiny=flo(lninffiiny), nuls=nuls ) loin.info(f"Poss : ffiiny={lninffiiny:.3f}, S={nuls.vlu}") un is syn f unolninsssion(slf, snio: s) -> LninOuo: """ un opl lnin sssion o fo spifi snio """ loin.info(f"Sin o lnin sssion: {snio}") sssioni = f"o{snio}{i.now().sfi('%H%%S')}" si = i.now() # Siul possiv lnin ss ss = [LninS.QUISIION, LninS.ONSOLIION, LninS.NION] llis = [] bsuy = 0.65 # Sin uy uyipovn = 0.0 fo s in ss: loin.info(f"o s: {s.vlu}") # n  fo his s  = slf.nlisi(10) # 10 sons p s is = wi slf.possos() llis.ppn(is) # Siul lnin ipovn sipovn = is.lninffiiny * 0.15 uyipovn += sipovn #  so lisi viion wi synio.slp(0.1) # Bif pus fo o ff ni = i.now() finluy = in(bsuy + uyipovn, 0.95) # p  95% ouo = LninOuo( sssioni=sssioni, si=si, ni=ni, s=LninS.NSF, # Finl s uyipovn=uyipovn, nionso=finluy, pion=uyipovn / ln(ss), is=llis ) loin.info(f"o sssion opl: {uyipovn:.1%} ipovn") un ouo f novisulizions(slf, ouo: LninOuo) -> i[s, ny]: """ n visulizion  fo o psnion """ loin.info("nin o visulizions") # x is fo visulizion isps = [.isp.sfi('%H:%:%S') fo  in ouo.is] lninffiiny = [.lninffiiny fo  in ouo.is] nionlvls = [.nioninx fo  in ouo.is] nulss = [.nuls.vlu fo  in ouo.is] visulizion = { "sssionsuy": { "sssioni": ouo.sssioni, "uioninus": (ouo.ni - ouo.si).sons / 60, "uyipovn": f"{ouo.uyipovn:.1%}", "finlnion": f"{ouo.nionso:.1%}", "pion": f"{ouo.pion:.3f}" }, "isis": { "isps": isps, "lninffiiny": lninffiiny, "nionlvls": nionlvls, "nulss": nulss }, "pfonis": { "bslinuy": "65%", "finluy": f"{ouo.nionso:.1%}", "ipovn": f"{ouo.uyipovn:.1%}", "pffiiny": f"{x(lninffiiny):.3f}", "vnion": f"{np.n(nionlvls):.3f}" } } # Sv visulizion  vizfil = os.ph.join(SULSI, f"oviz{ouo.sssioni}.json") wih opn(vizfil, 'w') s f: json.up(visulizion, f, inn=2, ful=s) loin.info(f"Visulizion  sv: {vizfil}") un visulizion f opsnionsip(slf) -> s: """  psnion sip fo o """ loin.info("in o psnion sip") sip = f""" L.I.F.. Plfo Liv o Sip {slf.on} : {slf.o} Piipns: {slf.piipns} === INOUION (2 inus) === "Wlo o h L.I.F.. Plfo onsion - Lnin Iniviully fo xpin. oy w'll show how ou nuopiv I posss l-i  sinls o opiiz lnin." === SNIO SLION (1 inu) === vilbl o snios: 1. linil: Hospil oniiv ssssn 2. uionl: -12 psonliz lnin 3. npis: opo inin opiizion 4. sh: Nul fb suis "L's s wih h {lis(slf.snios.ys())[0]} snio..." === LIV POSSIN O (5 inus) === 1. "I' sin h   s siulion..." 2. "Wh h nul possin in l-i..." 3. "Noi h lnin ffiiny ipovns..." 4. "h sys is pin o opiiz pfon..." === SULS NLYSIS (3 inus) === "L's xin h suls: - uy ipov by [X]% - Lnin ffiiny h [X.XXX] - Nul s opiizion hiv - pion : [X.XXX] p lnin s" === PLFO PBILIIS (2 inus) === "h L.I.F.. Plfo povis: - l-i  possin (sub-illison lny) - piv lnin opiizion - uli-snio ppliions - zu pl vilbiliy - npis-y slbiliy" === Q& SSSION (7 inus) === "Qusions fo ou {slf.piipns} piipns..." === OL O I: 20 inus === """ sipfil = os.ph.join(PSNIONSI, "osip.x") wih opn(sipfil, 'w') s f: f.wi(sip) loin.info(f"o sip : {sipfil}") un sip syn f unoplonvionn(slf) -> i[s, ny]: """ un opl pnn o nvionn """ loin.info("=" * 80) loin.info(f"L.I.F.. PLFO PNN O - {slf.o}") loin.info("=" * 80) osuls = {} # un o fo h snio fo snioy, snios in slf.snios.is(): loin.info(f"unnin o snio: {snios}") ouo = wi slf.unolninsssion(snioy) visulizion = slf.novisulizions(ouo) osuls[snioy] = { "ouo": si(ouo), "visulizion": visulizion, "sipion": snios } #  psnion ils sip = slf.opsnionsip() # Sv opl o suls osuy = { "oinfo": { "n": slf.on, "": slf.o, "piipns": slf.piipns, "vsion": slf.vsion, "ploff": slf.ploff }, "snios": osuls, "psnionsip": sip, "nvionnsus": "FULLY OPIONL - NO PNNIS" } suyfil = os.ph.join(OI, "oplosuy.json") wih opn(suyfil, 'w') s f: json.up(osuy, f, inn=2, ful=s) loin.info("=" * 80) loin.info("PNN O NVIONN OPL") loin.info(f"ll snios s: {ln(slf.snios)}") loin.info(f"o ils y: {OI}") loin.info("SUS: BULLPOOF - NO XNL PNNIS") loin.info("=" * 80) un osuy syn f in(): """ in funion o iniiliz pnn o nvionn """ pin(" L.I.F.. PLFO PNN O NVIONN") pin("=" * 70) onv = Pnnonvionn() pin(f" o : {onv.o}") pin(f" Piipns: {onv.piipns}") pin(f" pl Off: {onv.ploff}") pin(f" o ioy: {OI}") pin("\n unnin opl o nvionn...") osuy = wi onv.unoplonvionn() pin("\n PNN O Y!") pin(f"- Snios s: {ln(osuy['snios'])}") pin(f"- suls sv: {OI}") pin("- Sus: BULLPOOF (no zu pnnis)") pin("- y fo Oob 15 o n ll fuu psnions") pin("\n O XUION:") pin("1. un: pyhon LIFPNNONVIONN.py") pin("2. Follow sip in: psnions/osip.x") pin("3. Show suls fo: suls/ ioy") pin("4. Psn visulizions fo JSON fils") pin("\n SUSS UN:") pin("- Wos offlin (no inn n)") pin("- No zu oun qui") pin("- No xnl PI pnnis") pin("- Pobl o ny Winows hin") pin("- onsisn suls vy i") pin("=" * 70) if n == "in": synio.un(in())