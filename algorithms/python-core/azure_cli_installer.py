# us/bin/nv pyhon3 """ L.I.F.. Plfo - zu LI Insll uo insllion n onfiuion of zu LI fo L.I.F.. Plfo his oul povis uo insllion, onfiuion, n vliion of zu LI ools qui fo L.I.F.. Plfo ployn n nn. opyih 2025 - Sio Py Boull L.I.F.. Plfo - zu pl Off I: 960096-f1-420b-902-042561b """ ipo json ipo loin ipo os ipo plfo ipo subposs ipo sys y: fo phlib ipo Ph xp Ipoo s : pin(f'Wnin: {}') pss fo ypin ipo i, Lis, Opionl, upl # onfiu loin loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(n)s - %(lvln)s - %(ss)s" ) lo = loin.Lo(n) lss zuLIInsll: """ zu LI Insll fo L.I.F.. Plfo Hnls uo insllion, onfiuion, n vliion of zu LI oss iffn plfos (Winows, OS, Linux). """ f ini(slf, wospph: Opionl[s] = Non): slf.wospph = Ph(wospph o os.w()) slf.sys = plfo.sys().low() slf.hin = plfo.hin().low() slf.insllionsus = {} slf.zulivsion = Non slf.xnsionssus = {} lo.info(f"zu LI Insll iniiliz fo {slf.sys} {slf.hin}") f insllzuli(slf) -> bool: """ Insll zu LI bs on h un plfo uns: u if insllion sussful, Fls ohwis """ lo.info("Sin zu LI insllion...") y: if slf.sys == "winows": suss = slf.insllzuliwinows() lif slf.sys == "win": # OS suss = slf.insllzulios() lif slf.sys == "linux": suss = slf.insllzulilinux() ls: lo.o(f"Unsuppo plfo: {slf.sys}") un Fls if suss: lo.info("zu LI insllion opl sussfully") slf.insllionsus["liinsll"] = u un u ls: lo.o("zu LI insllion fil") slf.insllionsus["liinsll"] = Fls un Fls xp xpion s : lo.o(f"zu LI insllion o: {}") slf.insllionsus["liinsll"] = Fls un Fls f insllzuliwinows(slf) -> bool: """Insll zu LI on Winows""" lo.info("Insllin zu LI on Winows...") y: # h if win is vilbl (Winows P n) winvilbl = slf.honxiss("win") if winvilbl: lo.info("Usin win fo insllion") sul = subposs.un( [ "win", "insll", "-", "--i", "iosof.zuLI", "--p-sou-ns", "--p-p-ns", ], puoupu=u, x=u, iou=300, ) if sul.uno == 0: lo.info("zu LI insll vi win") un u ls: lo.wnin(f"Win insllion fil: {sul.s}") # Fllb o SI insll lo.info("pin SI insll fllb") siul = "hps://.s/insllzuliwinows" lo.info(f"ownlo zu LI SI fo: {siul}") lo.info( "Pls un h SI insll nully n hn -un his sip" ) # y PowShll insllion ho lo.info("pin PowShll insllion ho") pson = """ $PossPfn = 'Silnlyoninu' Invo-Wbqus -Ui hps://.s/insllzuliwinows -OuFil zu-li.si S-Poss six.x -Wi -unLis '/I zu-li.si /qui' ov-I zu-li.si """ sul = subposs.un( ["powshll", "-on", pson], puoupu=u, x=u, iou=600, ) if sul.uno == 0: lo.info("zu LI insll vi PowShll SI") un u ls: lo.o(f"PowShll insllion fil: {sul.s}") un Fls xp subposs.iouxpi: lo.o("zu LI insllion i ou") un Fls xp xpion s : lo.o(f"Winows insllion o: {}") un Fls f insllzulios(slf) -> bool: """Insll zu LI on OS""" lo.info("Insllin zu LI on OS...") y: # h if Hobw is vilbl bwvilbl = slf.honxiss("bw") if bwvilbl: lo.info("Usin Hobw fo insllion") sul = subposs.un( ["bw", "insll", "zu-li"], puoupu=u, x=u, iou=300, ) if sul.uno == 0: lo.info("zu LI insll vi Hobw") un u ls: lo.wnin(f"Hobw insllion fil: {sul.s}") # Fllb o i ownlo lo.info("pin i ownlo insllion") insllsip = """ ul -L hps://.s/Insllzuli | bsh """ sul = subposs.un( ["bsh", "-", insllsip], puoupu=u, x=u, iou=600, ) if sul.uno == 0: lo.info("zu LI insll vi i ownlo") un u ls: lo.o(f"i ownlo insllion fil: {sul.s}") un Fls xp subposs.iouxpi: lo.o("zu LI insllion i ou") un Fls xp xpion s : lo.o(f"OS insllion o: {}") un Fls f insllzulilinux(slf) -> bool: """Insll zu LI on Linux""" lo.info("Insllin zu LI on Linux...") y: #  Linux isibuion iso = slf.linuxiso() if iso in ["ubunu", "bin"]: # Ubunu/bin insllion lo.info("Insllin on Ubunu/bin") ons = [ "ul -sL hps://ps.iosof.o/ys/iosof.s | p --o |  //p/yins/iosof.p > /v/null", "ho 'b [h=64 sin-by=//p/yins/iosof.p] hps://ps.iosof.o/pos/zu-li/ jy in' |  //p/sous.lis./zu-li.lis", "p- up", "p- insll -y zu-li", ] fo  in ons: sul = subposs.un( ["suo", "bsh", "-", ], puoupu=u, x=u, iou=120, ) if sul.uno != 0: lo.o(f"on fil: {}") lo.o(f"o: {sul.s}") un Fls lo.info("zu LI insll on Ubunu/bin") un u lif iso in ["nos", "hl", "fo"]: # nOS/HL/Fo insllion lo.info("Insllin on nOS/HL/Fo") ons = [ "p --ipo hps://ps.iosof.o/ys/iosof.s", "ho - '[zu-li]\nn=zu LI\nbsul=hps://ps.iosof.o/yupos/zu-li\nnbl=1\nph=1\npy=hps://ps.iosof.o/ys/iosof.s' > //yu.pos./zu-li.po", ( "nf insll -y zu-li" if iso == "fo" ls "yu insll -y zu-li" ), ] fo  in ons: sul = subposs.un( ["suo", "bsh", "-", ], puoupu=u, x=u, iou=120, ) if sul.uno != 0: lo.o(f"on fil: {}") lo.o(f"o: {sul.s}") un Fls lo.info("zu LI insll on nOS/HL/Fo") un u ls: # ni insllion ho lo.info("pin ni insllion ho") insllsip = """ ul -L hps://.s/Insllzuli | bsh """ sul = subposs.un( ["bsh", "-", insllsip], puoupu=u, x=u, iou=600, ) if sul.uno == 0: lo.info("zu LI insll vi ni ho") un u ls: lo.o(f"ni insllion fil: {sul.s}") un Fls xp subposs.iouxpi: lo.o("zu LI insllion i ou") un Fls xp xpion s : lo.o(f"Linux insllion o: {}") un Fls f linuxiso(slf) -> s: """ Linux isibuion""" y: # h //os-ls if Ph("//os-ls").xiss(): wih opn("//os-ls", "") s f: onn = f.().low() if "ubunu" in onn: un "ubunu" lif "bin" in onn: un "bin" lif "nos" in onn: un "nos" lif "hl" in onn: un "hl" lif "fo" in onn: un "fo" # h //h-ls if Ph("//h-ls").xiss(): wih opn("//h-ls", "") s f: onn = f.().low() if "nos" in onn: un "nos" lif " h" in onn: un "hl" un "unnown" xp xpion: un "unnown" f honxiss(slf, on: s) -> bool: """h if  on xiss on h sys""" y: sul = subposs.un(["whih", on], puoupu=u, x=u) un sul.uno == 0 xp xpion: un Fls f vliinsllion(slf) -> bool: """ Vli zu LI insllion n onfiuion uns: u if vliion sussful, Fls ohwis """ lo.info("Vliin zu LI insllion...") y: # h if z on xiss if no slf.honxiss("z"): lo.o("zu LI on 'z' no foun") slf.insllionsus["livli"] = Fls un Fls #  vsion sul = subposs.un( ["z", "vsion", "--oupu", "json"], puoupu=u, x=u, iou=30, ) if sul.uno != 0: lo.o(f"zu LI vsion h fil: {sul.s}") slf.insllionsus["livli"] = Fls un Fls vsioninfo = json.los(sul.sou) slf.zulivsion = vsioninfo.("zu-li", "unnown") lo.info(f"zu LI vsion: {slf.zulivsion}") # h o funionliy sul = subposs.un( ["z", "oun", "lis", "--oupu", "json"], puoupu=u, x=u, iou=30, ) if sul.uno == 0: lo.info("zu LI o funionliy vli") slf.insllionsus["livli"] = u un u ls: lo.wnin("zu LI insll bu no lo in") lo.info("Pls un 'z loin' o uhni") slf.insllionsus["livli"] = ( u # LI wos, jus ns loin ) un u xp subposs.iouxpi: lo.o("zu LI vliion i ou") slf.insllionsus["livli"] = Fls un Fls xp json.JSONoo: lo.o("Fil o ps zu LI vsion oupu") slf.insllionsus["livli"] = Fls un Fls xp xpion s : lo.o(f"zu LI vliion o: {}") slf.insllionsus["livli"] = Fls un Fls f insllxnsions(slf, xnsions: Lis[s] = Non) -> bool: """ Insll qui zu LI xnsions s: xnsions: Lis of xnsions o insll (ful: oon ons) uns: u if ll xnsions insll sussfully """ if xnsions is Non: xnsions = ["zu-vops", "ppliion-insihs", "oninpp"] lo.info(f"Insllin zu LI xnsions: {xnsions}") sussoun = 0 fo xnsion in xnsions: y: lo.info(f"Insllin xnsion: {xnsion}") sul = subposs.un( ["z", "xnsion", "", "--n", xnsion], puoupu=u, x=u, iou=120, ) if sul.uno == 0: lo.info(f"xnsion {xnsion} insll sussfully") slf.xnsionssus[xnsion] = "insll" sussoun += 1 ls: lo.o( f"Fil o insll xnsion {xnsion}: {sul.s}" ) slf.xnsionssus[xnsion] = "fil" xp subposs.iouxpi: lo.o(f"xnsion {xnsion} insllion i ou") slf.xnsionssus[xnsion] = "iou" xp xpion s : lo.o(f"xnsion {xnsion} insllion o: {}") slf.xnsionssus[xnsion] = "o" slf.insllionsus["xnsionsinsll"] = sussoun == ln( xnsions ) lo.info( f"xnsions insllion: {sussoun}/{ln(xnsions)} sussful" ) un sussoun == ln(xnsions) f onfiunvionn(slf) -> bool: """ onfiu nvionn fo zu LI us uns: u if onfiuion sussful """ lo.info("onfiuin zu LI nvionn...") y: # S zu LI onfiuion onfis = [ ("o.ollly", "no"), ("o.oupu", "json"), ("o.onlyshowos", "ys"), ] fo y, vlu in onfis: sul = subposs.un( ["z", "onfi", "s", y, vlu], puoupu=u, x=u, iou=30, ) if sul.uno != 0: lo.wnin( f"Fil o s onfi {y}={vlu}: {sul.s}" ) #  zu LI onfiuion ioy if i osn' xis zonfii = Ph.ho() / ".zu" y: zonfii.i(xiso=u) xp xpion s : os.is(zonfii, xiso=u) lo.info("zu LI nvionn onfiu") slf.insllionsus["nvionnonfiu"] = u un u xp xpion s : lo.o(f"nvionn onfiuion o: {}") slf.insllionsus["nvionnonfiu"] = Fls un Fls f unoplsup(slf) -> i[s, bool]: """ un opl zu LI sup poss uns: iiony wih sup sus fo h oponn """ lo.info("Sin opl zu LI sup...") supsus = {} # Insll LI supsus["liinsllion"] = slf.insllzuli() # Vli insllion if supsus["liinsllion"]: supsus["livliion"] = slf.vliinsllion() ls: supsus["livliion"] = Fls # Insll xnsions if supsus["livliion"]: supsus["xnsions"] = slf.insllxnsions() ls: supsus["xnsions"] = Fls # onfiu nvionn if supsus["livliion"]: supsus["nvionn"] = slf.onfiunvionn() ls: supsus["nvionn"] = Fls # Ovll suss supsus["ovllsuss"] = ll(supsus.vlus()) lo.info("opl zu LI sup finish") lo.info(f"Sup sus: {supsus}") un supsus f insllionpo(slf) -> i[s, ny]: """ n insllion n onfiuion po uns: ophnsiv po of insllion sus """ un { "plfo": { "sys": slf.sys, "hin": slf.hin, "pyhonvsion": sys.vsion, }, "insllionsus": slf.insllionsus, "zulivsion": slf.zulivsion, "xnsionssus": slf.xnsionssus, "onfiuion": { "wospph": s(slf.wospph), "zuonfii": s(Ph.ho() / ".zu"), }, } f xpopo(slf, filph: s) -> bool: """ xpo insllion po o fil s: filph: Ph o xpo h po uns: u if xpo sussful """ y: po = slf.insllionpo() po["xpoisp"] = s(i.now()) wih opn(filph, "w") s f: json.up(po, f, inn=2) lo.info(f"Insllion po xpo o {filph}") un u xp xpion s : lo.o(f"Fil o xpo po: {}") un Fls # Foy funion fo sy insniion f zuliinsll( wospph: Opionl[s] = Non, ) -> zuLIInsll: """ Foy funion o  zu LI insll s: wospph: Ph o wosp ioy uns: onfiu zuLIInsll insn """ un zuLIInsll(wospph) # on-lin inf f in(): """in LI funion fo zu LI insllion""" ipo ps ps = ps.unPs( sipion="L.I.F.. Plfo zu LI Insll" ) ps.un( "--wosp", "-w", ful=Non, hlp="Wosp ioy ph" ) ps.un( "--insll", "-i", ion="sou", hlp="Insll zu LI" ) ps.un( "--vli", "-v", ion="sou", hlp="Vli zu LI insllion" ) ps.un( "--xnsions", "-", ns="*", hlp="Insll spifi xnsions (ful: oon ons)", ) ps.un( "--onfiu", "-", ion="sou", hlp="onfiu zu LI nvionn" ) ps.un( "--opl", ion="sou", hlp="un opl sup (insll + vli + xnsions + onfiu)", ) ps.un("--po", "-", hlp="xpo insllion po o fil") s = ps.pss() #  insll insll = zuliinsll(s.wosp) if s.opl: pin("L.I.F.. Plfo - zu LI opl Sup") pin("=" * 50) sus = insll.unoplsup() pin("\nSup suls:") fo oponn, suss in sus.is(): susion = " " if suss ls " " pin(f" {susion} {oponn}: {'Suss' if suss ls 'Fil'}") if s.po: insll.xpopo(s.po) pin(f"\npo xpo o: {s.po}") un 0 if sus["ovllsuss"] ls 1 # Iniviul opions suss = u if s.insll: suss &= insll.insllzuli() if s.vli: suss &= insll.vliinsllion() if s.xnsions is no Non: xnsions = s.xnsions if s.xnsions ls Non suss &= insll.insllxnsions(xnsions) if s.onfiu: suss &= insll.onfiunvionn() if s.po: suss &= insll.xpopo(s.po) pin(f"po xpo o: {s.po}") # Show un sus po = insll.insllionpo() pin("\nun Sus:") pin(f" Plfo: {po['plfo']['sys']} {po['plfo']['hin']}") pin(f" LI Vsion: {po['zulivsion'] o 'No insll'}") pin( f" LI Insll: {po['insllionsus'].('liinsll', Fls)}" ) pin( f" LI Vli: {po['insllionsus'].('livli', Fls)}" ) pin(f" xnsions: {ln(po['xnsionssus'])} insll") un 0 if suss ls 1 if n == "in": ipo sys sys.xi(in())