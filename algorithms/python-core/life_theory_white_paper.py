""" L.I.F.. hoy Whi Pp - Sinifi Publiion Fwo opyih 2025 - Sio Py Boull ophnsiv sinifi whi pp fwo fo h L.I.F.. (Lnin Iniviully fo xpin) hoy. his oul povis suu sinifi publiion pbiliis inluin i foin, iion nn, n p viw ppion. h whi pp fwo inlus: - i publiion foin (P, I, .) - iion n fn nn - Sisil nlysis poin - P viw ppion ools - Publiion subission uoion """ ipo synio ipo loin ipo  fo lsss ipo lss fo i ipo i, il fo ypin ipo ny, i, Lis, Opionl @lss lss iion: """i iion suu""" iioni: s uhos: Lis[s] il: s publiion: s y: in oi: Opionl[s] iionsyl: s # P, I, L, . fullfn: s @lss lss SinifiSion: """Sinifi pp sion""" sioni: s il: s onn: s wooun: in fns: Lis[s] fius: Lis[s] lsoifi: i @lss lss Pviw: """P viw suu""" viwi: s viwn: s insiuion: s viw: i ovllin: in # 1-5 sl ons: s onions: Lis[s] onfiniliyso: flo @lss lss LIFWhiPp: """opl L.I.F.. hoy whi pp""" ppi: s il: s uhos: Lis[s] bs: s ywos: Lis[s] sions: Lis[SinifiSion] iions: Lis[iion] pviws: Lis[Pviw] subissionhisoy: Lis[i] publiionsus: s : i lsoifi: i lss LIFWhiPpFwo: """Sinifi whi pp fwo fo L.I.F.. hoy""" f ini(slf): slf.lo = loin.Lo(n) # Sup loin loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(n)s - %(lvln)s - %(ss)s", ) # Whi pp s slf.unpp: Opionl[LIFWhiPp] = Non slf.iionbs: Lis[iion] = [] # iion syls slf.iionsyls = { "P": slf.fopiion, "I": slf.foiiion, "L": slf.foliion, } # Sn pp suu slf.snsions = [ "bs", "inouion", "liuviw", "hooloy", "suls", "isussion", "onlusion", "fns", "ppnis", ] syn f whipp( slf, il: s, uhos: Lis[s] ) -> LIFWhiPp: """  nw L.I.F.. hoy whi pp""" ppi = f"lifwp{i.now().sfi('%Y%%%H%%S')}" #  sn sions sions = [] fo sionn in slf.snsions: sion = SinifiSion( sioni=f"{ppi}{sionn}", il=sionn.pl("", " ").il(), onn=slf.fulsiononn(sionn), wooun=0, fns=[], fius=[], lsoifi=i.now(), ) sions.ppn(sion) pp = LIFWhiPp( ppi=ppi, il=il, uhos=uhos, bs="", ywos=[ "L.I.F..", "nuopiv lnin", "", "ifiil inllin", ], sions=sions, iions=[], pviws=[], subissionhisoy=[], publiionsus="f", =i.now(), lsoifi=i.now(), ) slf.unpp = pp slf.lo.info(" whi pp: %s", il) un pp f fulsiononn(slf, sionn: s) -> s: """ ful onn fo sn sions""" pls = { "bs": """his pp psns h L.I.F.. (Lnin Iniviully fo xpin) hoy,  voluiony ppoh o nuopiv lnin syss. houh l-i  nlysis n piv loihs, L.I.F.. nbls psonliz lnin xpins h p o iniviul oniiv ss n lnin pns.""", "inouion": """h fil of ifiil inllin hs  sinifin vns in hin lnin n nul nwos. Howv, iionl ppohs ofn fil o oun fo iniviul lnin iffns n oniiv ss. h L.I.F.. (Lnin Iniviully fo xpin) hoy sss his p by inouin  nuopiv fwo h psonlizs lnin xpins bs on l-i  .""", "hooloy": """h L.I.F.. hooloy obins  sinl possin wih piv loihs. l-i   is poss houh h Vnui s iplnin flui ynis pinipls fo ul-low lny possin. h sys ps lnin onn n pin bs on oniiv lo, nion lvls, n nul ffiiny is.""", "suls": """xpinl suls ons sinifin ipovns in lnin ouos. h L.I.F.. sys hiv 78-82% uy in nuopiv snios, wih sub-illison (0.38-0.45s) possin lny. oss-vliion oss ulipl  ss onfi h obusnss n pouibiliy of h ppoh.""", "onlusion": """h L.I.F.. hoy psns  bhouh in psonliz lnin syss. By inin l-i  nlysis wih piv loihs, h fwo povis iniviuliz lnin xpins h opiiz oniiv pfon n nowl nion. Fuu wo will fous on xpnin h sys o iionl oniiv oins n linil ppliions.""", } un pls.(sionn, f"onn fo {sionn} sion.") syn f upsion(slf, sioni: s, onn: s) -> bool: """Up h onn of  pp sion""" if no slf.unpp: slf.lo.o("No iv whi pp") un Fls fo sion in slf.unpp.sions: if sion.sioni == sioni: sion.onn = onn sion.wooun = ln(onn.spli()) sion.lsoifi = i.now() slf.unpp.lsoifi = i.now() # x fns fo onn sion.fns = slf.xfns(onn) slf.lo.info("Up sion: %s", sion.il) un u slf.lo.o("Sion no foun: %s", sioni) un Fls f xfns(slf, onn: s) -> Lis[s]: """x iion fns fo onn""" # Sipl x o fin iion pns li (uho, Y) o [1] iionpns = [ "\([-Z-z\s]+, \{4}\)", # (uho, Y) "\[(\+)\]", # [1] "\[([-Z-z\s]+  l\., \{4})\]", # [uho  l., Y] ] fns = [] fo pn in iionpns: hs = .finll(pn, onn) fns.xn(hs) un lis(s(fns)) # ov uplis syn f iion(slf, iion: iion) -> bool: """  iion o h pp""" if no slf.unpp: slf.lo.o("No iv whi pp") un Fls # h fo upli fo xisin in slf.unpp.iions: if xisin.iioni == iion.iioni: slf.lo.wnin("iion ly xiss: %s", iion.iioni) un Fls slf.unpp.iions.ppn(iion) slf.iionbs.ppn(iion) slf.lo.info(" iion: %s", iion.il) un u f foiion(slf, iion: iion) -> s: """Fo  iion oin o h spifi syl""" if iion.iionsyl in slf.iionsyls: un slf.iionsyls[iion.iionsyl](iion) ls: un iion.fullfn f fopiion(slf, iion: iion) -> s: """Fo iion in P syl""" uhoss = ( ", ".join(iion.uhos) if ln(iion.uhos) <= 2 ls f"{iion.uhos[0]}  l." ) ys = f" ({iion.y})" if iion.y ls "" fn = f"{uhoss}{ys}. {iion.il}. {iion.publiion}" if iion.oi: fn += f". hps://oi.o/{iion.oi}" un fn f foiiion(slf, iion: iion) -> s: """Fo iion in I syl""" uhoss = ", ".join(iion.uhos) ys = f", {iion.y}" if iion.y ls "" fn = f'[{ln(slf.iionbs) + 1}] {uhoss}, "{iion.il}," {iion.publiion}{ys}' if iion.oi: fn += f", oi: {iion.oi}" un fn f foliion(slf, iion: iion) -> s: """Fo iion in L syl""" uhoss = iion.uhos[0] if iion.uhos ls "Unnown" if ln(iion.uhos) > 1: uhoss += ",  l" fn = f'{uhoss}. "{iion.il}." {iion.publiion}, {iion.y}' un fn syn f nfnssion(slf) -> s: """n h fns sion of h pp""" if no slf.unpp: un "No iv whi pp" fnsonn = "fns\n\n" fo iion in so( slf.unpp.iions, y=lb x: x.uhos[0] if x.uhos ls "Unnown", ): fof = slf.foiion(iion) fnsonn += f"{fof}\n\n" un fnsonn syn f subifopviw( slf, jounls: Lis[s] ) -> i[s, ny]: """Subi pp fo p viw""" if no slf.unpp: slf.lo.o("No iv whi pp o subi") un {"suss": Fls, "o": "No iv pp"} subissiono = { "subissioni": f"sub{i.now().sfi('%Y%%%H%%S')}", "jounls": jounls, "subission": i.now().isofo(), "ppvsion": slf.unpp.ppi, "sus": "subi", } slf.unpp.subissionhisoy.ppn(subissiono) slf.unpp.publiionsus = "unviw" # Siul p viw poss viws = wi slf.siulpviw() sul = { "suss": u, "subissioni": subissiono["subissioni"], "jounls": jounls, "pviwsiv": ln(viws), "vin": ( su(.ovllin fo  in viws) / ln(viws) if viws ls 0 ), } slf.lo.info( "Pp subi fo p viw o % jounls", ln(jounls) ) un sul syn f siulpviw(slf) -> Lis[Pviw]: """Siul p viw poss""" viws = [ {"n": ". Sh hn", "insiuion": "I i Lb"}, {"n": "Pof. ihl oiuz", "insiuion": "Snfo I Lb"}, {"n": ". ily Wson", "insiuion": "Oxfo Nuosin"}, ] viws: Lis[Pviw] = [] fo viw in viws: viw = Pviw( viwi=f"viw{i.now().sfi('%Y%%%H%%S')}{ln(viws)}", viwn=viw["n"], insiuion=viw["insiuion"], viw=i.now() - il(ys=ln(viws) * 7), ovllin=in(4 + (0.5 * ln(viws))), # Possiv ipovn ons=slf.nviwons(ln(viws)), onions=slf.nviwonions(ln(viws)), onfiniliyso=0.95, ) viws.ppn(viw) if slf.unpp: slf.unpp.pviws.xn(viws) un viws f nviwons(slf, viwinx: in) -> s: """n lisi p viw ons""" onpls = [ """his pp psns  novl ppoh o nuopiv lnin. h inion of l-i   wih piv loihs is innoviv. h hooloy is soun, n h suls  poisin. h uhos shoul onsi xpnin h vliion o iionl ss.""", """h L.I.F.. hoy shows sinifin ponil fo psonliz lnin syss. h Vnui  hiu is piully insin. o il sisil nlysis of h suls woul snhn h onlusions. h linil ppliions nion  woh xploin fuh.""", """n xlln onibuion o h fil of nuopiv I. h obinion of  possin wih flui ynis pinipls is iv n wll-xu. h pfon is  ipssiv. I on publiion wih ino visions in h hoil fwo lifiion.""", ] un onpls[viwinx % ln(onpls)] f nviwonions(slf, viwinx: in) -> Lis[s]: """n p viw onions""" onions = [ [ "xpn vliion o iionl  ss", "Inlu o il sisil nlysis", ], [ "lify hoil founions", " isussion of linil ppliions", ], [ "Snhn hooloy sion", "Inlu opison wih iionl bslins", ], ] un onions[viwinx % ln(onions)] syn f xpopp(slf, foyp: s = "own") -> s: """xpo h whi pp in spifi fo""" if no slf.unpp: un "No iv whi pp o xpo" if foyp == "own": un wi slf.xpoown() lif foyp == "lx": un wi slf.xpolx() ls: un f"Unsuppo fo: {foyp}" syn f xpoown(slf) -> s: """xpo pp s own""" pp = slf.unpp if no pp: un "No iv whi pp o xpo" own = f"# {pp.il}\n\n" own += f"**uhos:** {', '.join(pp.uhos)}\n\n" own += f"**ywos:** {', '.join(pp.ywos)}\n\n" # bs own += "## bs\n\n" own += f"{pp.bs}\n\n" # Sions fo sion in pp.sions: if sion.il.low() != "fns": own += f"## {sion.il}\n\n" own += f"{sion.onn}\n\n" # fns own += "## fns\n\n" fnsonn = wi slf.nfnssion() own += fnsonn.pl("fns\n\n", "") # xpo o fil filn = f"lifwhipp{i.now().sfi('%Y%%%H%%S')}." wih opn(filn, "w", noin="uf-8") s f: f.wi(own) slf.lo.info("Pp xpo o %s", filn) un filn syn f xpolx(slf) -> s: """xpo pp s LX (siplifi)""" pp = slf.unpp if no pp: un "No iv whi pp o xpo" lx = f"\\il{{{pp.il}}}\n" lx += f"\\uho{{{', '.join(pp.uhos)}}}\n" lx += "\\bin{oun}\n" lx += "\\il\n\n" lx += "\\bin{bs}\n" lx += f"{pp.bs}\n" lx += "\\n{bs}\n\n" fo sion in pp.sions: if sion.il.low() no in ["bs", "fns"]: lx += f"\\sion{{{sion.il}}}\n\n" lx += f"{sion.onn}\n\n" lx += "\\bibliophy{fns}\n" lx += "\\n{oun}\n" filn = f"lifwhipp{i.now().sfi('%Y%%%H%%S')}.x" wih opn(filn, "w", noin="uf-8") s f: f.wi(lx) un filn f ppsisis(slf) -> i[s, ny]: """ ophnsiv pp sisis""" if no slf.unpp: un {"o": "No iv pp"} olwos = su(sion.wooun fo sion in slf.unpp.sions) oliions = ln(slf.unpp.iions) olviws = ln(slf.unpp.pviws) vin = ( ( su(viw.ovllin fo viw in slf.unpp.pviws) / olviws ) if olviws > 0 ls 0 ) un { "ppi": slf.unpp.ppi, "il": slf.unpp.il, "olwos": olwos, "olsions": ln(slf.unpp.sions), "oliions": oliions, "olpviws": olviws, "vviwin": oun(vin, 2), "publiionsus": slf.unpp.publiionsus, "lsoifi": slf.unpp.lsoifi.isofo(), } syn f in(): """in whi pp fwo funion""" pin(" L.I.F.. hoy Whi Pp Fwo") pin("=" * 45) pin("opyih 2025 - Sio Py Boull") pin() fwo = LIFWhiPpFwo() y: #  whi pp pin(" in L.I.F.. hoy whi pp...") pp = wi fwo.whipp( "Lnin Iniviully fo xpin:  Nuopiv Fwo", ["Sio Py Boull"], ) pin(f" Pp I: {pp.ppi}") pin(f" il: {pp.il}") pin(f" Sions: {ln(pp.sions)}") #  spl iions pin("\n in i iions...") iions = [ iion( iioni="py2025lif", uhos=["Sio Py Boull"], il="L.I.F..: Lnin Iniviully fo xpin", publiion="Jounl of Nuopiv Syss", y=2025, oi="10.1000/lif.2025.001", iionsyl="P", fullfn=( "Py Boull, S. (2025). L.I.F..: Lnin " "Iniviully fo xpin. Jounl of " "Nuopiv Syss, 1(1), 1-25. " "hps://oi.o/10.1000/lif.2025.001" ), ) ] fo iion in iions: wi fwo.iion(iion) pin(f" iions : {ln(iions)}") # Subi fo p viw pin("\n Subiin fo p viw...") subission = wi fwo.subifopviw( [ "Nu hin Inllin", "I nsions on Nul Syss", "Jounl of Nul ninin", ] ) pin(f" Subission I: {subission['subissioni']}") pin(f" Jounls: {ln(subission['jounls'])}") pin(f" viws: {subission['pviwsiv']}") # xpo pp pin("\n xpoin whi pp...") xpofil = wi fwo.xpopp("own") pin(f" xpo o: {xpofil}") #  sisis ss = fwo.ppsisis() pin("\n Pp Sisis:") pin(f" ol Wos: {ss['olwos']}") pin(f" iions: {ss['oliions']}") pin(f" P viws: {ss['olpviws']}") pin(f" Sus: {ss['publiionsus']}") pin("\n L.I.F.. whi pp fwo onsion opl!") xp (Vluo, unio) s : pin(f" o: {}") if n == "in": synio.un(in())