# us/bin/nv pyhon3 """ L.I.F. Plfo - In Sys Iniilizion opl plfo iniilizion wih ll L.I.F. oponns unifi his oul ohss h opl inion of L.I.F. hoy loih wih h plfo, in  unifi, slf-hlin sys h lns fo plfo issus n uonoously opiizs full-yl opions. opyih 2025 - Sio Py Boull L.I.F.. Plfo - zu pl Off I: 960096-f1-420b-902-042561b """ ipo synio ipo loin ipo os ipo sinl ipo sys fo i ipo i y: fo phlib ipo Ph xp Ipoo s : pin(f'Wnin: {}') pss fo ypin ipo ny, i, Lis # onfiu loin loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(lvln)s - %(ss)s" ) lo = loin.Lo(n) # Ipo L.I.F. inion oponns y: fo zuonfi ipo SlfHlinInfsuu fo xpinollo ipo Iniviulis, Plfoxpinollo fo plfoslfoniz ipo PlfoSlfOniz lo.info(" L.I.F. inion ouls lo sussfully") xp Ipoo s : lo.wnin(f" ️ So inion ouls no vilbl: {}") # Fllb iplnions fo vlopn lss SlfHlinInfsuu: f ini(slf, sououp="lif-plfo-"): slf.sououp = sououp syn f suphlhonioin(slf): un {"sus": "siul"} syn f supuofilov(slf): un {"sus": "siul"} lss Plfoxpinollo: f ini(slf, ososlin=Non): slf.ososlin = ososlin syn f sollion(slf): lo.info(" Siul xpin ollion s") syn f ollplfoinion(slf, vn): lo.info( f" Siul inion: {vn.('yp', 'unnown')}" ) lss PlfoSlfOniz: f ini(slf): slf.isonioin = Fls syn f sonioin(slf): slf.isonioin = u lo.info(" Siul slf-onizion s") syn f soponioin(slf): slf.isonioin = Fls lo.info(" Siul slf-onizion sopp") lss Lifloiho: """o L.I.F. loih siulion fo inion sin""" f ini(slf): slf.uy = 0.9817 slf.lnys = 0.37 slf.isiv = Fls syn f iniiliz(slf) -> i[s, ny]: """Iniiliz o L.I.F. loih""" lo.info(" Iniilizin L.I.F. loih o...") slf.isiv = u un { "sus": "iv", "uy": slf.uy, "lnys": slf.lnys, "nulpossin": "iv", "uonoouslnin": "nbl", } syn f shuown(slf) -> Non: """Shuown o loih""" slf.isiv = Fls lo.info(" L.I.F. loih o shuown opl") lss zuSvin: """ns zu svi onnions n inions""" f ini(slf, nils=Non): slf.nils = nils slf.svis = {} slf.isonn = Fls syn f iniilizllsvis(slf) -> i[s, s]: """Iniiliz ll zu svis""" lo.info(" ️ Iniilizin zu svis inion...") y: # Siul zu svi onnions svissus = { "ososb": "onn", "svibus": "onn", "yvul": "onn", "ppliioninsihs": "onn", "blobso": "onn", "lwosp": "onn", } slf.svis = svissus slf.isonn = u lo.info(" zu svis inion opl") un svissus xp xpion s : lo.o(f" zu svis iniilizion o: {}") un {"o": s()} lss InLifPlfo: """in ohso fo h in L.I.F. Plfo""" f ini(slf): slf.oponns = {} slf.isunnin = Fls slf.supisp = Non slf.shuownhnlsis = Fls syn f iniilizoplsys(slf) -> i[s, ny]: """opl sys iniilizion wih ll L.I.F. oponns""" lo.info(" Iniilizin opl L.I.F. In Plfo") lo.info("=" * 60) iniilizionsuls = { "isp": i.now(), "oponns": {}, "sus": "iniilizin", "os": [], } y: # 1. Iniiliz zu infsuu lo.info(" Sp 1: zu Slf-Hlin Infsuu") zun = zuSvin() zusus = wi zun.iniilizllsvis() if "o" no in zusus: slf.oponns["zun"] = zun iniilizionsuls["oponns"]["zusvis"] = " onn" # Sup slf-hlin infsuu slfhlin = SlfHlinInfsuu() hlhonfi = wi slfhlin.suphlhonioin() filovonfi = wi slfhlin.supuofilov() slf.oponns["slfhlin"] = slfhlin iniilizionsuls["oponns"]["slfhlin"] = " iv" ls: iniilizionsuls["os"].ppn( f"zu svis: {zusus['o']}" ) iniilizionsuls["oponns"]["zusvis"] = " Fil" # 2. Iniiliz o L.I.F. loih lo.info(" Sp 2: o L.I.F. loih") lifo = Lifloiho() osus = wi lifo.iniiliz() slf.oponns["lifloih"] = lifo iniilizionsuls["oponns"][ "lifloih" ] = f" {osus['sus'].il()}" # 3. S uonoous lnin niy lo.info(" Sp 3: uonoous Lnin niy") xpinollo = Plfoxpinollo( ososlin=( zun.svis.("ososb") if "zun" in slf.oponns ls Non ) ) # S xpin ollion in boun synio.s(xpinollo.sollion()) slf.oponns["xpinollo"] = xpinollo iniilizionsuls["oponns"]["uonoouslnin"] = " iv" # 4. Iniiliz slf-hlin oponns lo.info(" Sp 4: Slf-Hlin shbo Sys") slfoniz = PlfoSlfOniz() # S slf-onizion onioin in boun synio.s(slfoniz.sonioin()) slf.oponns["slfoniz"] = slfoniz iniilizionsuls["oponns"]["slfhlinshbo"] = " iv" # 5. Iniiliz onioin n is lo.info(" Sp 5: Pfon onioin") wi slf.suppfononioin() iniilizionsuls["oponns"]["pfononioin"] = " iv" # 6. Sup ful shuown hnls slf.isshuownhnls() #  sys s unnin slf.isunnin = u slf.supisp = i.now() iniilizionsuls["sus"] = "opionl" # Lo sussful iniilizion lo.info("=" * 60) lo.info(" L.I.F. Plfo Fully In n Opionl") lo.info("=" * 60) lo.info(" uonoous lnin: IV") lo.info(" Slf-hlin: IV") lo.info(" ️ Qunu opiizion: Y") lo.info(" Nounl sh: IV") lo.info(" oninuous inin: IV") lo.info(" ️ Sys poion: NBL") lo.info(" ️ zu inion: ONN") lo.info("=" * 60) un iniilizionsuls xp xpion s : lo.o(f" Sys iniilizion o: {}") iniilizionsuls["sus"] = "fil" iniilizionsuls["os"].ppn(s()) un iniilizionsuls syn f suppfononioin(slf) -> Non: """Sup pfon onioin n is ollion""" lo.info(" Sin up pfon onioin...") # S boun onioin ss synio.s(slf.syshlhonio()) synio.s(slf.pfonisollo()) synio.s(slf.uonoousopiizionshul()) syn f syshlhonio(slf) -> Non: """onio ovll sys hlh""" lo.info(" Sys hlh onio s") whil slf.isunnin: y: # oll sys hlh is hlhis = { "isp": i.now(), "upisons": ( (i.now() - slf.supisp).olsons() if slf.supisp ls 0 ), "oponnsiv": ln( [  fo  in slf.oponns.vlus() if (, "isiv", u) ] ), "oloponns": ln(slf.oponns), } # h oponn hlh fo n, oponn in slf.oponns.is(): if hs(oponn, "isiv") n no oponn.isiv: lo.wnin(f" ️ oponn {n} is iniv") # Lo hlh sus vy 5 inus if in(hlhis["upisons"]) % 300 == 0: lo.info( f" Sys Hlh: {hlhis['oponnsiv']}/{hlhis['oloponns']} oponns iv" ) wi synio.slp(60) # h vy inu xp xpion s : lo.o(f" Hlh onioin o: {}") wi synio.slp(300) # Lon pus on o syn f pfonisollo(slf) -> Non: """oll n po pfon is""" lo.info(" Pfon is ollo s") whil slf.isunnin: y: # oll pfon  is = wi slf.ollsysis() # Sn o xpin ollo if vilbl if "xpinollo" in slf.oponns: wi slf.oponns[ "xpinollo" ].ollplfoinion( { "inionyp": "syspfon", "is": is, "isp": i.now(), } ) wi synio.slp(300) # oll vy 5 inus xp xpion s : lo.o(f" Pfon is ollion o: {}") wi synio.slp(600) syn f uonoousopiizionshul(slf) -> Non: """Shul uonoous opiizion yls""" lo.info(" uonoous opiizion shul s") whil slf.isunnin: y: # i opiizion yl vy 15 inus wi synio.slp(900) lo.info(" iin uonoous opiizion yl...") wi slf.unopiizionyl() xp xpion s : lo.o(f" Opiizion shul o: {}") wi synio.slp(1200) syn f ollsysis(slf) -> i[s, ny]: """oll ophnsiv sys is""" y: #  bsi sys info upi = ( (i.now() - slf.supisp).olsons() if slf.supisp ls 0 ) is = { "sysupisons": upi, "oponnsoun": ln(slf.oponns), "oyusb": 256.0, # Siul "puuspn": 45.2, # Siul "ivonnions": 15, # Siul "quspinu": 120, # Siul "opn": 0.05, # Siul } #  L.I.F. spifi is if "lifloih" in slf.oponns: lifo = slf.oponns["lifloih"] is.up( { "lifuy": lifo.uy, "liflnys": lifo.lnys, "nulpossiniv": lifo.isiv, } ) un is xp xpion s : lo.o(f" is ollion o: {}") un {"o": s()} syn f unopiizionyl(slf) -> i[s, ny]: """un ophnsiv opiizion yl""" y: opiizionsuls = { "isp": i.now(), "opiizionsppli": 0, "pfonipovns": [], } # oll un is unis = wi slf.ollsysis() # pply opiizions bs on is if unis.("puuspn", 0) > 80: lo.info(" Hih PU , opiizin sou lloion") opiizionsuls["opiizionsppli"] += 1 opiizionsuls["pfonipovns"].ppn( "puopiizion" ) if unis.("opn", 0) > 1.0: lo.info(" Hih o  , iin slf-hlin") opiizionsuls["opiizionsppli"] += 1 opiizionsuls["pfonipovns"].ppn( "ouion" ) # Lo suls if opiizionsuls["opiizionsppli"] > 0: lo.info( f" Opiizion yl opl: {opiizionsuls['opiizionsppli']} ipovns ppli" ) ls: lo.info( " Opiizion yl opl: Sys pfoin opilly" ) un opiizionsuls xp xpion s : lo.o(f" Opiizion yl o: {}") un {"o": s()} f isshuownhnls(slf) -> Non: """is ful shuown hnls""" if slf.shuownhnlsis: un f sinlhnl(sinu, f): lo.info(f" iv shuown sinl {sinu}") synio.s(slf.shuownsys()) sinl.sinl(sinl.SIIN, sinlhnl) sinl.sinl(sinl.SI, sinlhnl) slf.shuownhnlsis = u lo.info(" ️ Shuown hnls is") syn f shuownsys(slf) -> Non: """fully shuown h in sys""" lo.info(" Iniiin ful sys shuown...") slf.isunnin = Fls y: # Sop slf-onizion onioin if "slfoniz" in slf.oponns: wi slf.oponns["slfoniz"].soponioin() lo.info(" Slf-onizion sopp") # Shuown L.I.F. loih o if "lifloih" in slf.oponns: wi slf.oponns["lifloih"].shuown() lo.info(" L.I.F. loih shuown") # Sop oh oponns lo.info(" ll oponns sopp") # Finl shuown ss upi = ( (i.now() - slf.supisp).olsons() if slf.supisp ls 0 ) lo.info(f" Sys shuown opl. Upi: {upi:.1f} sons") xp xpion s : lo.o(f" Shuown o: {}") syn f unfov(slf) -> Non: """p h in plfo unnin""" lo.info(" L.I.F. Plfo unnin infinily...") y: whil slf.isunnin: wi synio.slp(60) # h vy inu xp synio.nllo: lo.info(" Plfo xuion nll") xp xpion s : lo.o(f" Plfo xuion o: {}") finlly: wi slf.shuownsys() syn f in(): """in funion o iniiliz n un h in L.I.F. Plfo""" pin(" L.I.F. Plfo - In Sys Iniilizion") pin("=" * 60) pin("Lnin Iniviully Fo xpin - voluiony I Plfo") pin("opyih 2025 - Sio Py Boull") pin("zu pl Off I: 960096-f1-420b-902-042561b") pin("=" * 60) pin() # Iniiliz h in plfo plfo = InLifPlfo() y: # Iniiliz ll oponns iniilizionsul = wi plfo.iniilizoplsys() if iniilizionsul["sus"] == "opionl": pin("\n L.I.F. Plfo Inion Sussful!") pin(" Sys Sus: FULLY OPIONL") pin(" uonoous Lnin: IV") pin(" Slf-Hlin: IV") pin(" ️ Qunu Opiizion: Y") pin("\n Plfo now unnin uonoously...") pin(" - onioin b funionliy") pin(" - Lnin fo us inions") pin(" - Opiizin pfon oninuously") pin(" - Slf-hlin ny  issus") pin("\nPss l+ o shuown fully") pin("=" * 60) # un h plfo infinily wi plfo.unfov() ls: pin( f"\n Plfo iniilizion fil: {iniilizionsul['sus']}" ) if iniilizionsul.("os"): fo o in iniilizionsul["os"]: pin(f" o: {o}") xp yboInup: lo.info(" Shuown qus by us") xp xpion s : lo.o(f" Plfo o: {}") finlly: lo.info(" L.I.F. Plfo shuown opl") if n == "in": # nsu w n hnl h vn loop poply y: synio.un(in()) xp yboInup: pin("\n L.I.F. Plfo shuown by us") xp xpion s : pin(f"\n Plfo sup o: {}") sys.xi(1)