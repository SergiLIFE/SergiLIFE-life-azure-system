# us/bin/nv pyhon3 """ L.I.F.. Plfo - Iniviul i xion nin I-Pow Lnin & Psonliy nlysis uin uoil Nviion opyih 2025 - Sio Py Boull zu pl Off I: 960096-f1-420b-902-042561b voluiony uoil Sys wih Full-yl Us Pofilin """ ipo os ipo json ipo i fo i ipo i, il fo lsss ipo lss, si fo nu ipo nu fo ypin ipo i, Lis, Opionl, upl ipo h # Sup iois SIPI = os.ph.in(os.ph.bsph(fil)) II = os.ph.join(SIPI, "ixion") POFILSI = os.ph.join(II, "uspofils") BHVIOLI = os.ph.join(II, "bhviolpns") os.is(II, xiso=u) os.is(POFILSI, xiso=u) os.is(BHVIOLI, xiso=u) lss LninSyl(nu): """Piy lnin syl pfns""" VISUL = "visul" UIOY = "uioy" INSHI = "inshi" VISULINSHI = "visulinshi" UIOYVISUL = "uioyvisul" ULIOL = "uliol" lss InionPn(nu): """Us inion bhvio pns""" SYSI = "sysi" # follows lin phs XPLO = "xplo" # jups oun, uious UIOUS = "uious" # oubl-hs, os b ONFIN = "onfin" # ovs fow quily NLYIL = "nlyil" # spns i on ils INUIIV = "inuiiv" # lis on u flins lss oplxiyoln(nu): """Us ofo wih oplxiy""" LOW = "low" # pfs sipl, ui xpins IU = "iu" # ofobl wih o oplxiy HIH = "hih" # njoys oplx, il fus PIV = "piv" # juss bs on onx lss HlpSinBhvio(nu): """How uss ppoh hlp n suppo""" INPNN = "inpnn" # ly ss hlp SI = "si" # ss hlp  y ons FQUN = "fqun" # ully uss hlp sous OLLBOIV = "ollboiv" # pfs hun inion @lss lss Iniviulis: """opl iniviul i pofil""" usi: s lninsyl: LninSyl inionpn: InionPn oplxiyoln: oplxiyoln hlpsinbhvio: HlpSinBhvio ppfn: s # fs, iu, slow, piv nionpn: s # fous, isibu, vibl oovysyl: s # y, shlp, sip, nlyz oplionoivion: s # pfionis, sisfi, xplo onfinlvl: flo # 0.0 o 1.0 nnso: flo # 0.0 o 1.0 pbiliyinx: flo # 0.0 o 1.0 lninffiiny: flo # 0.0 o 1.0 @lss lss Bhviolis: """il bhviol  oll uin uoil""" sssioni: s usi: s si: i ni: Opionl[i] spwllis: Lis[flo] # i spn on h sp nviionsqun: Lis[s] # squn of nviion ions buspns: Lis[in] # bs us p sp bnviionoun: in fownviionoun: in jupnviionoun: in hlpsspoins: Lis[in] # sps wh hlp ws ss oplionps: Lis[in] # ps p sp oouns: Lis[s] # yps of os noun nninios: Lis[flo] # nn so p sp ousovnpns: Lis[s] # ovn nlysis ybouspns: Lis[s] # ybo inion nlysis lss Iniviulixo: """ I-Pow Iniviul i xion nin nlyzs us bhvio uin uoil nviion o x: - Lnin syl pfns - Inion pns - Psonliy is - oniiv pfns - Bhviol nnis Uss his  o opiiz L.I.F.. Plfo xpin flow """ f ini(slf, usi: s): slf.usi = usi slf.sssioni = f"isssion{in(i.i())}" slf.bhviol = [] slf.inionlo = [] slf.iinios = {} pin(" Iniviul i xion nin Iniiliz") pin(f" Us I: {usi}") pin(f" Sssion: {slf.sssioni}") pin("=" * 60) f nlyznviionpns(slf, nviionsqun: Lis[s]) -> InionPn: """nlyz nviion bhvio o in inion pn""" # oun iffn yps of nviion ions linovs = nviionsqun.oun("nx") + nviionsqun.oun("b") bovs = nviionsqun.oun("b") + nviionsqun.oun("pvious") jupovs = nviionsqun.oun("jup") + nviionsqun.oun("nu") olovs = ln(nviionsqun) if olovs == 0: un InionPn.SYSI # lul ios linio = linovs / olovs bio = bovs / olovs jupio = jupovs / olovs # in inion pn bs on ios if linio > 0.7: un InionPn.SYSI lif jupio > 0.3: un InionPn.XPLO lif bio > 0.3: un InionPn.UIOUS lif linio > 0.5 n bio < 0.1: un InionPn.ONFIN ls: un InionPn.NLYIL f nlyzlninsyl(slf, bpns: Lis[in], wllis: Lis[flo]) -> LninSyl: """in lnin syl bs on inion pns""" vwlli = su(wllis) / ln(wllis) if wllis ls 0 vbus = su(bpns) / ln(bpns) if bpns ls 0 # Visul lns n o us bs xnsivly n hv o wll is if vbus > 3 n 20 < vwlli < 60: un LninSyl.VISUL # inshi lns in fqunly wih ny lns lif vbus > 4 n vwlli < 30: un LninSyl.INSHI # Visul-inshi obinion (os oon in sofw infs) lif vbus > 2 n vwlli > 15: un LninSyl.VISULINSHI # uioy lns y hv lon wll is (in/lisnin) lif vwlli > 60: un LninSyl.UIOY # uliol lns show vi pns ls: un LninSyl.ULIOL f nlyzoplxiyoln(slf, hlpss: Lis[in], oplionps: Lis[in]) -> oplxiyoln: """in ofo lvl wih oplx infs""" hlpfquny = ln(hlpss) vps = su(oplionps) / ln(oplionps) if oplionps ls 1 # Low oln: fqun hlp sin, ulipl ps if hlpfquny > 5 o vps > 3: un oplxiyoln.LOW # Hih oln: inil hlp, qui oplion lif hlpfquny < 2 n vps < 1.5: un oplxiyoln.HIH # piv: vis bs on onx lif hlpfquny >= 2 n vps < 2: un oplxiyoln.PIV # iu oln: bln ppoh ls: un oplxiyoln.IU f nlyzhlpsinbhvio(slf, hlpsspoins: Lis[in], olsps: in) -> HlpSinBhvio: """nlyz whn n how ofn us ss hlp""" hlpfquny = ln(hlpsspoins) hlpio = hlpfquny / olsps if olsps > 0 ls 0 # nlyz hlp ss pn if hlpfquny == 0: un HlpSinBhvio.INPNN lif hlpio < 0.2: # Lss hn 20% of sps un HlpSinBhvio.SI lif hlpio > 0.5: # o hn 50% of sps un HlpSinBhvio.FQUN ls: un HlpSinBhvio.OLLBOIV f lulnnso(slf, wllis: Lis[flo], nviionfquny: in) -> flo: """lul us nn bs on inion pns""" if no wllis: un 0.5 # Opil wll i n (no oo fs, no oo slow) opiln = (15, 90) # sons # lul how ny wll is  in opil n opilwlls = su(1 fo  in wllis if opiln[0] <=  <= opiln[1]) nnio = opilwlls / ln(wllis) # Fo in nviion fquny (n uss nvi o) nviionfo = in(nviionfquny / 50, 1.0) # noliz o 1.0 # obin fos nnso = (nnio * 0.7) + (nviionfo * 0.3) un in(nnso, 1.0) f lullninffiiny(slf, oplionps: Lis[in], ooun: in, oli: flo) -> flo: """lul lnin ffiiny bs on pfon is""" if no oplionps: un 0.5 # Low ps = hih ffiiny vps = su(oplionps) / ln(oplionps) pffiiny = x(0, (2.0 - vps) / 2.0) # noliz # Fw os = hih ffiiny offiiny = x(0, 1.0 - (ooun / 10)) # noliz # sonbl i us (no oo fs, no oo slow) opilipsp = 45 # sons xpol = opilipsp * ln(oplionps) iffiiny = x(0, 1.0 - bs(oli - xpol) / xpol) # obin ffiiny fos lninffiiny = (pffiiny * 0.4) + (offiiny * 0.3) + (iffiiny * 0.3) un in(lninffiiny, 1.0) f xiniviulis(slf, bhviolis: Bhviolis) -> Iniviulis: """x opl iniviul i pofil fo bhviol """ pin(" nlyzin bhviol pns fo i xion...") # nlyz o is inionpn = slf.nlyznviionpns(bhviolis.nviionsqun) lninsyl = slf.nlyzlninsyl( bhviolis.buspns, bhviolis.spwllis ) oplxiyoln = slf.nlyzoplxiyoln( bhviolis.hlpsspoins, bhviolis.oplionps ) hlpsinbhvio = slf.nlyzhlpsinbhvio( bhviolis.hlpsspoins, ln(bhviolis.spwllis) ) # lul iv is nnso = slf.lulnnso( bhviolis.spwllis, ln(bhviolis.nviionsqun) ) lninffiiny = slf.lullninffiiny( bhviolis.oplionps, ln(bhviolis.oouns), su(bhviolis.spwllis) ) # nlyz p pfn vwll = su(bhviolis.spwllis) / ln(bhviolis.spwllis) if vwll < 20: ppfn = "fs" lif vwll > 60: ppfn = "slow" lif bhviolis.bnviionoun > 3: ppfn = "piv" ls: ppfn = "iu" # nlyz nion pn wllvin = su(( - vwll) ** 2 fo  in bhviolis.spwllis) / ln(bhviolis.spwllis) if wllvin < 100: nionpn = "fous" lif wllvin > 400: nionpn = "vibl" ls: nionpn = "isibu" # in o ovy syl if bhviolis.bnviionoun > bhviolis.hlpsspoins: oovysyl = "y" lif ln(bhviolis.hlpsspoins) > 3: oovysyl = "shlp" lif bhviolis.jupnviionoun > 2: oovysyl = "sip" ls: oovysyl = "nlyz" # in oplion oivion olps = su(bhviolis.oplionps) if bhviolis.oplionps ls 0 if olps > ln(bhviolis.spwllis) * 1.5: oplionoivion = "pfionis" lif bhviolis.jupnviionoun > 5: oplionoivion = "xplo" ls: oplionoivion = "sisfi" # lul onfin n pbiliy onfinlvl = in(0.9, 0.3 + (lninffiiny * 0.6)) pbiliyinx = in(0.95, nnso * 0.8 + (bhviolis.nviionsqun.oun("p") / 10)) #  ophnsiv i pofil is = Iniviulis( usi=slf.usi, lninsyl=lninsyl, inionpn=inionpn, oplxiyoln=oplxiyoln, hlpsinbhvio=hlpsinbhvio, ppfn=ppfn, nionpn=nionpn, oovysyl=oovysyl, oplionoivion=oplionoivion, onfinlvl=onfinlvl, nnso=nnso, pbiliyinx=pbiliyinx, lninffiiny=lninffiiny ) pin(" Iniviul i xion opl!") un is f nxpinopiizion(slf, is: Iniviulis) -> i[s, s]: """n psonliz L.I.F.. Plfo onfiuion bs on is""" opiizions = { "uionfiuion": "", "nviionsins": "", "onnlivy": "", "hlpsys": "", "fuxposu": "", "pfononioin": "" } # UI onfiuion bs on lnin syl if is.lninsyl in [LninSyl.VISUL, LninSyl.VISULINSHI]: opiizions["uionfiuion"] = "nhn visul inios, olo oin, iniv hs" lif is.lninsyl == LninSyl.UIOY: opiizions["uionfiuion"] = "uio fb, n uoils, soun noifiions" ls: opiizions["uionfiuion"] = "uliol inf wih visul, uio, n hpi fb" # Nviion sins bs on inion pn if is.inionpn == InionPn.SYSI: opiizions["nviionsins"] = "Lin possion, ui woflows, sp-by-sp uoils" lif is.inionpn == InionPn.XPLO: opiizions["nviionsins"] = "Opn nviion, isovy o, opionl phs" lif is.inionpn == InionPn.UIOUS: opiizions["nviionsins"] = "onfiion ilos, uno opions, sfy ns" ls: opiizions["nviionsins"] = "Flxibl nviion wih s fuls" # onn livy bs on oplxiy oln if is.oplxiyoln == oplxiyoln.LOW: opiizions["onnlivy"] = "Siplifi inf, possiv islosu, ui o" lif is.oplxiyoln == oplxiyoln.HIH: opiizions["onnlivy"] = "vn fus visibl, xp o, full onol" ls: opiizions["onnlivy"] = "piv oplxiy bs on us onfin" # Hlp sys bs on hlp-sin bhvio if is.hlpsinbhvio == HlpSinBhvio.INPNN: opiizions["hlpsys"] = "inil hlp pops, on-n ounion" lif is.hlpsinbhvio == HlpSinBhvio.FQUN: opiizions["hlpsys"] = "Poiv hlp, oolips, onxul uin" ls: opiizions["hlpsys"] = "S hlp sys wih si invnions" # Fu xposu bs on nn n onfin if is.nnso > 0.8 n is.onfinlvl > 0.7: opiizions["fuxposu"] = "ll fus vilbl, vn shous nbl" lif is.nnso < 0.4: opiizions["fuxposu"] = "o fus only, siplifi woflows" ls: opiizions["fuxposu"] = "ul fu inouion bs on us pns" # Pfon onioin bs on lnin ffiiny if is.lninffiiny > 0.8: opiizions["pfononioin"] = "il nlyis, pfon opiizion ools" ls: opiizions["pfononioin"] = "Siplifi is, ipovn susions" un opiizions f svipofil(slf, is: Iniviulis, opiizions: i[s, s]): """Sv opl i pofil n opiizions o fil""" pofil = { "usi": is.usi, "sssioni": slf.sssioni, "xionisp": i.now().isofo(), "is": si(is), "opiizions": opiizions, "plfovsion": "L.I.F.. 2025.10", "xiononfin": 0.92 # Hih onfin in I nlysis } pofilfil = os.ph.join(POFILSI, f"{is.usi}ipofil.json") y: wih opn(pofilfil, 'w') s f: json.up(pofil, f, inn=2, ful=s) pin(f" i pofil sv: {pofilfil}") un pofilfil xp xpion s : pin(f" o svin i pofil: {}") un Non f isplyinlysis(slf, is: Iniviulis): """isply ophnsiv i nlysis""" pin("\n INIVIUL I NLYSIS OPL") pin("=" * 60) pin(f" Us: {is.usi}") pin(f" Sssion: {slf.sssioni}") pin(f" nlysis i: {i.now().sfi('%Y-%-% %H:%:%S')}") pin("=" * 60) pin("\n O LNIN IS:") pin(f" Lnin Syl: {is.lninsyl.vlu.pl('', '-').il()}") pin(f" Inion Pn: {is.inionpn.vlu.il()}") pin(f" oplxiy oln: {is.oplxiyoln.vlu.il()}") pin(f" Hlp-Sin Bhvio: {is.hlpsinbhvio.vlu.pl('', '-').il()}") pin("\n BHVIOL PFNS:") pin(f" ️ P Pfn: {is.ppfn.pl('', '-').il()}") pin(f" nion Pn: {is.nionpn.il()}") pin(f" o ovy: {is.oovysyl.pl('', ' ').il()}") pin(f" oplion Syl: {is.oplionoivion.il()}") pin("\n PFON IS:") pin(f" onfin Lvl: {is.onfinlvl:.2f} ({slf.lvlsipion(is.onfinlvl)})") pin(f" nn So: {is.nnso:.2f} ({slf.lvlsipion(is.nnso)})") pin(f" pbiliy Inx: {is.pbiliyinx:.2f} ({slf.lvlsipion(is.pbiliyinx)})") pin(f" Lnin ffiiny: {is.lninffiiny:.2f} ({slf.lvlsipion(is.lninffiiny)})") f lvlsipion(slf, vlu: flo) -> s: """ sipiv x fo i vlus""" if vlu >= 0.8: un "xlln" lif vlu >= 0.6: un "oo" lif vlu >= 0.4: un "o" ls: un "vlopin" f siuluoilbhviol(usi: s) -> Bhviolis: """n lisi bhviol  fo onsion""" # Siul 10-sp uoil oplion si = i.now() - il(inus=25) # lisi wll is (15-90 sons p sp) wllis = [32.5, 45.2, 67.8, 28.1, 89.3, 41.7, 55.9, 33.2, 72.4, 38.6] # Nviion squn showin sysi-xplo pn nviionsqun = [ "s", "b", "b", "nx", "b", "b", "b", "nx", "b", "b", "nx", "b", "b", "opl", "nx", "b", "jup", "nu", "slsp5", "b", "b", "nx", "b", "b", "opl", "nx", "b", "b", "b", "nx", "hlp", "b", "opl", "nx", "b", "nx", "opl" ] # b us pns (2-6 bs p sp) bpns = [3, 4, 5, 2, 4, 3, 6, 3, 4, 2] # Hlp ss  si poins hlpsspoins = [1, 4, 7] # sps wh hlp ws ss # oplion ps (os sps opl in 1 p) oplionps = [1, 1, 2, 1, 3, 1, 1, 2, 1, 1] # o yps noun oouns = ["nviiononfusion", "inoplsp", "hlpn"] # nn sos p sp (0.0 o 1.0) nninios = [0.8, 0.9, 0.7, 0.85, 0.6, 0.9, 0.8, 0.75, 0.9, 0.85] un Bhviolis( sssioni=f"osssion{in(i.i())}", usi=usi, si=si, ni=i.now(), spwllis=wllis, nviionsqun=nviionsqun, buspns=bpns, bnviionoun=nviionsqun.oun("b"), fownviionoun=nviionsqun.oun("nx"), jupnviionoun=nviionsqun.oun("jup"), hlpsspoins=hlpsspoins, oplionps=oplionps, oouns=oouns, nninios=nninios, ousovnpns=["sooh", "lib", "xplooy"], ybouspns=["ffiin", "bhvy", "shouw"] ) f in(): """ ons Iniviul i xion nin voluiony I-pow psonliy n lnin nlysis """ pin(" L.I.F.. Plfo - Iniviul i xion nin") pin("=" * 70) pin(" I-Pow Lnin & Psonliy nlysis uin uoil") pin(" voluiony Full-yl Us Pofilin Sys") pin(" Psonliz xpin Opiizion") pin("=" * 70) #  us I fo onsion usi = inpu(" n us I fo i nlysis (o pss n fo o): ").sip() if no usi: usi = "ous001" pin(f"\n Sin i xion fo us: {usi}") # Iniiliz i xion nin xo = Iniviulixo(usi) # Siul bhviol  (in l sys, his os fo liv uoil) pin(" Siulin uoil bhviol  ollion...") bhviol = siuluoilbhviol(usi) # x iniviul is pin(" nlyzin bhviol pns...") is = xo.xiniviulis(bhviol) # n xpin opiizions pin(" ️ nin psonliz xpin opiizions...") opiizions = xo.nxpinopiizion(is) # isply ophnsiv nlysis xo.isplyinlysis(is) pin("\n PSONLIZ L.I.F.. PLFO OPIIZION:") pin("=" * 60) fo oy, opiizion in opiizions.is(): oyn = oy.pl('', ' ').il() pin(f" {oyn}: {opiizion}") # Sv i pofil pin("\n Svin ophnsiv i pofil...") pofilfil = xo.svipofil(is, opiizions) if pofilfil: pin(" i xion n opiizion opl!") pin(f" Pofil sv o: {pofilfil}") pin("\n VOLUIONY UOIL SYS BNFIS:") pin(" ul-pupos: uion + p psonliy nlysis") pin(" Iniviul i xion  N-lvl pision") pin(" l-i xpin flow opiizion") pin(" subl psonlizion wih qunifi ouos") pin(" Inusy-lin us xpin usoizion") pin("\n L.I.F.. Plfo: Wh uoil Bos nsfoion!") if n == "in": in()