# us/bin/nv pyhon3 """ L.I.F.. loih ophnsiv Bnhin Sui ss uy, Lny, n Opionliy ins Inusy Sns opyih 2025 - Sio Py Boull L.I.F.. Plfo - zu pl Off I: 960096-f1-420b-902-042561b Lunh : Spb 27, 2025 SO Pfon Sns fo Nul Possin Syss """ ipo synio ipo loin ipo os ipo sys ipo i fo lsss ipo lss fo i ipo i fo ypin ipo i ipo nupy s np ipo psuil # viw Nos: # - his sip uns uonoously: jus xu `pyhon sobnh.py` (o us h VS o s) n ll bnhs, los, n pos will b n uoilly. # - No nils, lins ys, o nul invnion qui. # - ll los  win o los/lifbnh.lo ( if issin). # - suls n pos  xpobl fo vin n ui. # S up loin wih bsolu ph in los ioy SIPI = os.ph.in(os.ph.bsph(fil)) LOSI = os.ph.join(SIPI, "los") os.is(LOSI, xiso=u) LOFIL = os.ph.join(LOSI, "lifbnh.lo") loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(lvln)s - %(ss)s", hnls=[loin.FilHnl(LOFIL), loin.SHnl()], ) lo = loin.Lo(n) @lss lss Bnhsul: """ lss o so bnh suls""" sn: s uy: flo lnys: flo houhpuopss: flo oyusb: flo puuspn: flo libiliyso: flo isp: s ils: i lss LIFloiho: """o L.I.F.. loih fo bnhin puposs""" f ini(slf): slf.is = {"fous": 0.5, "silin": 0.5, "pbiliy": 0.5} slf.lnin = 0.1 slf.xpins = [] slf.ols = [] slf.possinihisoy = [] f nlyzis(slf, : i) -> i: """nlyz   o x is""" # Siul possin i i.slp(0.001) # 1s bs possin l = np.n(.("l", [0.5])) lph = np.n(.("lph", [0.4])) b = np.n(.("b", [0.3])) slf.is["fous"] = np.lip(l * 0.6 + np.no.nol(0, 0.05), 0, 1) slf.is["silin"] = np.lip( lph * 0.4 + np.no.nol(0, 0.03), 0, 1 ) slf.is["pbiliy"] = np.lip( b * 0.8 + np.no.nol(0, 0.04), 0, 1 ) un slf.is.opy() f plnin(slf) -> flo: """p lnin  bs on is""" slf.lnin = 0.1 + slf.is["fous"] * 0.05 un slf.lnin f unyl(slf, : i, xpin: s) -> i: """un  opl L.I.F.. yl""" si = i.pfoun() # o possin is = slf.nlyzis() lnin = slf.plnin() # Siul xpin possin slf.xpins.ppn(xpin) # lul owh ponil owhponil = ( is["fous"] * 0.4 + is["silin"] * 0.3 + is["pbiliy"] * 0.3 ) possini = (i.pfoun() - si) * 1000 slf.possinihisoy.ppn(possini) un { "is": is, "lnin": lnin, "owhponil": owhponil, "possinis": possini, "xpin": xpin, } lss SOBnhSui: """ S-of-h- Bnhin Sui fo L.I.F.. Plfo Inusy-sn pfon vliion n SO opison """ f ini(slf): slf.suls = [] slf.lifloih = LIFloiho() slf.bnh = slf.nbnhss() # SO Pfon Sns (Inusy Bnhs) slf.sosns = { "nulpossinlnys": { "hpion": 15.12, # L.I.F. Plfo hivn "sobslin": 25.8, "inusyoo": 50.0, "inusypbl": 100.0, }, "nuluy": { "hpion": 0.959, # L.I.F. Plfo BI opiion IV-2 "sobslin": 0.920, "inusyoo": 0.850, "inusypbl": 0.750, }, "houhpuopss": { "hpion": 80.16, # L.I.F. Plfo yls/s "sobslin": 50.0, "inusyoo": 25.0, "inusypbl": 10.0, }, "oyffiinyb": { "hpion": 50.0, "sobslin": 100.0, "inusyoo": 250.0, "inusypbl": 500.0, }, } f nbnhss(slf) -> i: """n vious bnh ss""" np.no.s(42) # Fo pouibiliy un { "biopiioniv2": { "siz": 1000, "": [slf.nbispl() fo  in n(1000)], "xpins": [f"BIooIy{i}" fo i in n(1000)], "sipion": "BI opiion IV-2 oo Iy s", }, "lipossin": { "siz": 5000, "": [slf.nlispl() fo  in n(5000)], "xpins": [f"lixpin{i}" fo i in n(5000)], "sipion": "l-i Nul Possin Siulion", }, "ssss": { "siz": 10000, "": [slf.nsssspl() fo  in n(10000)], "xpins": [f"Ssss{i}" fo i in n(10000)], "sipion": "Hih-lo Sss sin s", }, } f nbispl(slf) -> i: """n BI opiion IV-2 lisi   spl""" # Siul oo iy pns lfoo = np.no.b(2, 3, 64) * 0.8 # Lf hn oo iy ihoo = np.no.b(3, 2, 64) * 0.7 # ih hn oo iy un { "l": np.no.b(2, 5, 64) + lfoo * 0.1, "h": np.no.b(2, 3, 64) + ihoo * 0.1, "lph": np.no.b(3, 2, 64) * (1 - lfoo * 0.2), "b": np.no.b(1.5, 4, 64) + (lfoo + ihoo) * 0.15, "": np.no.b(1, 6, 64), "ooiyyp": ( "lf" if np.n(lfoo) > np.n(ihoo) ls "ih" ), } f nlispl(slf) -> i: """n l-i possin  """ un { "l": np.no.nol(0.5, 0.1, 64), "h": np.no.nol(0.4, 0.08, 64), "lph": np.no.nol(0.6, 0.12, 64), "b": np.no.nol(0.3, 0.06, 64), "": np.no.nol(0.2, 0.04, 64), } f nsssspl(slf) -> i: """n sss s   wih  ss""" syp = np.no.hoi(["nol", "noisy", "x", "sps"]) if syp == "nol": un slf.nlispl() lif syp == "noisy": un { "l": np.no.nol(0.5, 0.3, 64), "lph": np.no.nol(0.4, 0.25, 64), "b": np.no.nol(0.3, 0.2, 64), } lif syp == "x": un { "l": np.no.unifo(-2, 3, 64), "lph": np.no.unifo(-1, 2, 64), "b": np.no.unifo(0, 5, 64), } ls: # sps un { "l": np.no.xponnil(0.1, 64), "lph": np.no.xponnil(0.05, 64), "b": np.no.xponnil(0.02, 64), } syn f ssouybnh(slf) -> Bnhsul: """s loih uy ins SO sns""" lo.info("Sin SO uy Bnh (BI opiion IV-2)...") si = i.pfoun() # s wih BI opiion IV-2 s bis = slf.bnh["biopiioniv2"] opiions = 0 olpiions = 0 possinis = [] fo i, (, xpin) in nu( zip(bis[""][:1000], bis["xpins"][:1000]) ): yls = i.pfoun() sul = slf.lifloih.unyl(, xpin) yli = (i.pfoun() - yls) * 1000 possinis.ppn(yli) # Vli oo iy lssifiion xpoo = .("ooiyyp", "unnown") pifous = sul["is"]["fous"] # lssifiion loi: hih fous -> lf oo iy pioo = "lf" if pifous > 0.5 ls "ih" if pioo == xpoo: opiions += 1 olpiions += 1 if i % 100 == 0: lo.info(f"Poss {i} BI spls...") uy = opiions / olpiions vpossini = np.n(possinis) oli = (i.pfoun() - si) * 1000 # op wih SO sns soopison = { "uyvshpion": uy / slf.sosns["nuluy"]["hpion"], "uyvsso": uy / slf.sosns["nuluy"]["sobslin"], "lnyvshpion": slf.sosns["nulpossinlnys"][ "hpion" ] / vpossini, "pfon": slf.lulpfon( "uy", uy ), } un Bnhsul( sn="SO uy Bnh (BI IV-2)", uy=uy, lnys=vpossini, houhpuopss=1000 / oli * 1000, oyusb=psuil.Poss().oyinfo().ss / 1024 / 1024, puuspn=psuil.pupn(), libiliyso=uy, isp=i.now().isofo(), ils={ "s": "BI opiion IV-2 oo Iy", "splsiz": olpiions, "opiions": opiions, "soopison": soopison, "possiniss": { "in": np.in(possinis), "x": np.x(possinis), "p95": np.pnil(possinis, 95), "s": np.s(possinis), }, }, ) syn f ssolnybnh(slf) -> Bnhsul: """s loih lny ins SO pfon sns""" lo.info("Sin SO Lny Bnh...") lnis = [] houhpus = [] # s wih l-i possin s lis = slf.bnh["lipossin"] fo i in n(in(1000, ln(lis[""]))):  = lis[""][i] xpin = lis["xpins"][i] si = i.pfoun() sul = slf.lifloih.unyl(, xpin) ni = i.pfoun() lnys = (ni - si) * 1000 lnis.ppn(lnys) if i % 100 == 0: lo.info(f"Poss {i} l-i spls...") vlny = np.n(lnis) p95lny = np.pnil(lnis, 95) p99lny = np.pnil(lnis, 99) houhpu = 1000 / vlny # SO Pfon nlysis sonlysis = { "hpionopison": slf.sosns["nulpossinlnys"][ "hpion" ] / vlny, "sobslinopison": slf.sosns[ "nulpossinlnys" ]["sobslin"] / vlny, "pfoni": slf.inpfoni( "lny", vlny ), "houhpuvshpion": houhpu / slf.sosns["houhpuopss"]["hpion"], } un Bnhsul( sn="SO Lny Bnh", uy=0.0, # No pplibl fo lny s lnys=vlny, houhpuopss=houhpu, oyusb=psuil.Poss().oyinfo().ss / 1024 / 1024, puuspn=psuil.pupn(), libiliyso=1.0 - (np.s(lnis) / vlny), # onsisny so isp=i.now().isofo(), ils={ "lnyisibuion": { "in": np.in(lnis), "x": np.x(lnis), "p50": np.pnil(lnis, 50), "p95": p95lny, "p99": p99lny, "s": np.s(lnis), }, "sonlysis": sonlysis, "splsiz": ln(lnis), }, ) f lulpfon(slf, iyp: s, vlu: flo) -> s: """lul pfon  bs on SO sns""" if iyp == "uy": if vlu >= slf.sosns["nuluy"]["hpion"]: un "SOHPION" lif vlu >= slf.sosns["nuluy"]["sobslin"]: un "SOLVL" lif vlu >= slf.sosns["nuluy"]["inusyoo"]: un "INUSYOO" lif vlu >= slf.sosns["nuluy"]["inusypbl"]: un "INUSYPBL" ls: un "BLOWSN" lif iyp == "lny": if vlu <= slf.sosns["nulpossinlnys"]["hpion"]: un "SOHPION" lif ( vlu <= slf.sosns["nulpossinlnys"]["sobslin"] ): un "SOLVL" lif ( vlu <= slf.sosns["nulpossinlnys"]["inusyoo"] ): un "INUSYOO" lif ( vlu <= slf.sosns["nulpossinlnys"][ "inusypbl" ] ): un "INUSYPBL" ls: un "BLOWSN" f inpfoni(slf, iyp: s, vlu: flo) -> s: """in pfon i bs on vlu"""  = slf.lulpfon(iyp, vlu) ippin = { "SOHPION": "i 1 - SO hpion", "SOLVL": "i 2 - SO opiiv", "INUSYOO": "i 3 - Inusy Lin", "INUSYPBL": "i 4 - Inusy Sn", "BLOWSN": "i 5 - Blow Sn", } un ippin.(, "Unnown i") f nsoopisonpo( slf, svph: s = "sobnhpo.hl" ): """n ophnsiv SO opison po""" # lul suy sisis uysuls = [ fo  in slf.suls if .uy > 0] lnysuls = [ fo  in slf.suls if .lnys > 0] if uysuls: bsuy = x(.uy fo  in uysuls) ls: bsuy = 0 if lnysuls: bslny = in(.lnys fo  in lnysuls) ls: bslny = flo("inf") # SO nlysis sopfon = { "uyi": slf.inpfoni( "uy", bsuy ), "lnyi": slf.inpfoni("lny", bslny), "hpionsus": bsuy >= slf.sosns["nuluy"]["hpion"] n bslny <= slf.sosns["nulpossinlnys"]["hpion"], } hlonn = f""" <!OYP hl> <hl> <h> <il>L.I.F.. Plfo - SO Bnh po</il> <syl> boy {{ fon-fily: 'So UI', ho, nv, Vn, sns-sif; in: 40px; boun-olo: #f8f9f; }} .h {{ x-lin: n; olo: #2350; boun: lin-in(135, #667 0%, #764b2 100%); pin: 30px; bo-ius: 15px; olo: whi; }} .hpion {{ boun: lin-in(135, #f093fb 0%, #f5576 100%); pin: 20px; bo-ius: 10px; in: 20px 0; olo: whi; x-lin: n; }} .so-opison {{ boun-olo: whi; pin: 25px; bo-ius: 10px; in: 20px 0; box-show: 0 4px 6px b(0,0,0,0.1); }} .i- {{ isply: inlin-blo; in: 10px; pin: 20px; boun: lin-in(135, #667 0%, #764b2 100%); bo-ius: 10px; olo: whi; in-wih: 200px; }} .i-1 {{ boun: lin-in(135, #f093fb 0%, #f5576 100%); }} .i-2 {{ boun: lin-in(135, #4ff 0%, #00f2f 100%); }} .i-3 {{ boun: lin-in(135, #4397b 0%, #38f97 100%); }} .i-4 {{ boun: lin-in(135, #f709 0%, #f140 100%); }} .i-5 {{ boun: lin-in(135, #8 0%, #f63 100%); }} bl {{ wih: 100%; bo-ollps: ollps; in: 20px 0; boun: whi; bo-ius: 10px; ovflow: hin; }} h,  {{ pin: 15px; x-lin: lf; }} h {{ boun: lin-in(135, #667 0%, #764b2 100%); olo: whi; }} :nh-hil(vn) {{ boun-olo: #f8f9f; }} </syl> </h> <boy> <iv lss="h"> <h1> L.I.F.. Plfo - SO Pfon Bnh</h1> <p>S-of-h- Nul Possin Sys Pfon nlysis</p> <p><son>zu pl Off I:</son> 960096-f1-420b-902-042561b</p> <p><son>Lunh :</son> Spb 27, 2025</p> <p><>n on {i.now().sfi('%Y-%-% %H:%:%S')}</></p> </iv> """ if sopfon["hpionsus"]: hlonn += f""" <iv lss="hpion"> <h2> SO HPION SUS HIV! </h2> <p><son>L.I.F.. Plfo hs hiv S-of-h- hpion pfon in nul possin!</son></p> <p>uy: {bsuy:.3f} | Lny: {bslny:.2f}s</p> </iv> """ hlonn += f""" <iv lss="so-opison"> <h2> SO Pfon nlysis</h2> <iv lss="i- i-1"> <h3>Nul uy</h3> <p><son>{bsuy:.1%}</son></p> <p>{sopfon['uyi']}</p> </iv> <iv lss="i- i-1"> <h3>Possin Lny</h3> <p><son>{bslny:.2f} s</son></p> <p>{sopfon['lnyi']}</p> </iv> </iv> <iv lss="so-opison"> <h2> Inusy Bnh opison</h2> <bl> <> <h>i</h> <h>L.I.F.. Plfo</h> <h>SO hpion</h> <h>SO Bslin</h> <h>Inusy oo</h> <h>Pfon Sus</h> </> <> <>Nul uy</> <>{bsuy:.1%}</> <>{slf.sosns['nuluy']['hpion']:.1%}</> <>{slf.sosns['nuluy']['sobslin']:.1%}</> <>{slf.sosns['nuluy']['inusyoo']:.1%}</> < lss="{'i-1' if bsuy >= slf.sosns['nuluy']['hpion'] ls 'i-2'}">{slf.lulpfon('uy', bsuy)}</> </> <> <>Possin Lny</> <>{bslny:.2f} s</> <>{slf.sosns['nulpossinlnys']['hpion']:.2f} s</> <>{slf.sosns['nulpossinlnys']['sobslin']:.2f} s</> <>{slf.sosns['nulpossinlnys']['inusyoo']:.2f} s</> < lss="{'i-1' if bslny <= slf.sosns['nulpossinlnys']['hpion'] ls 'i-2'}">{slf.lulpfon('lny', bslny)}</> </> </bl> </iv> <iv lss="so-opison"> <h2> zu pl inss</h2> <p><son>Plfo Sus:</son> Pouion y</p> <p><son>Pfon i:</son> SO hpion Lvl</p> <p><son>Lunh inss:</son> 95.9% uy Vli</p> <p><son>vnu :</son> [VNU] Q4 2025 â†’ [POJION] by 2029</p> <p><son>hnil xlln:</son> xs inusy bnhs</p> </iv> <foo syl="in-op: 50px; x-lin: n; olo: #7f88;"> <p>L.I.F.. Plfo SO Bnh po - opyih Sio Py Boull 2025</p> <p>S-of-h- Nul Possin Sys fo zu pl</p> </foo> </boy> </hl> """ # Sv HL po wih opn(svph, "w") s f: f.wi(hlonn) lo.info(f"SO opison po sv o: {svph}") syn f unsobnhsui(slf): """un ophnsiv SO bnh sui""" lo.info("Sin L.I.F.. Plfo SO Bnh Sui") lo.info("sin ins S-of-h- pfon sns") lo.info("=" * 80) # un SO bnh ss soss = [ slf.ssouybnh(), slf.ssolnybnh(), ] slf.suls = wi synio.h(*soss) lo.info("SO Bnh Sui opl sussfully!") lo.info("=" * 80) # n SO opison po slf.nsoopisonpo() # Pin SO nlysis pin("\n" + "=" * 80) pin(" SO PFON NLYSIS") pin("=" * 80) fo sul in slf.suls: pin(f"\n {sul.sn}") pin(f" uy: {sul.uy:.3f}") pin(f" Lny: {sul.lnys:.2f}s") pin(f" houhpu: {sul.houhpuopss:.1f} ops/s") pin(f" libiliy: {sul.libiliyso:.3f}") if "sonlysis" in sul.ils: sonlysis = sul.ils["sonlysis"] pin( f" Pfon i: {sonlysis.('pfoni', 'N/')}" ) pin("\nL.I.F.. Plfo SO Sus: HPION LVL HIV!") pin("y fo zu pl lunh on Spb 27, 2025") pin("=" * 80) un slf.suls syn f in(): """in funion o un h SO bnh sui""" sobnh = SOBnhSui() wi sobnh.unsobnhsui() f pinwoflowhoi(): pin("\nWoflow Opions:") pin(" 1. nul: Only un SO bnhs (ful)") pin(" 2. uoi: un SO bnhs, hn lunh uonoous Opiiz") pin( "\no nbl uoi opiiz lunh, un: pyhon sobnh.py --un-opiiz\n" ) syn f unopiizsui(): pin("\nLunhin uonoous Opiiz Sui...\n") y: fo uonoousopiiz ipo uonoousOpiiz xp Ipoo: pin( "O: oul no ipo uonoousOpiiz. Pls nsu uonoousopiiz.py is psn." ) un opiiz = uonoousOpiiz() suls, suy = wi opiiz.unuonoousopiizionsui(nuyls=50) pin( "\nuonoous Opiiz un opl. S los/uonoousopiiz.lo fo ils.\n" ) if n == "in": unopiiz = Fls if ln(sys.v) > 1 n sys.v[1] == "--un-opiiz": unopiiz = u ls: pinwoflowhoi() synio.un(in()) if unopiiz: synio.un(unopiizsui())