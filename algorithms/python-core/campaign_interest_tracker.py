# us/bin/nv pyhon3 """ L.I.F.. Plfo pin Ins  Oob 10, 2025 - onin pin Lunh nlysis l-i in of pin nn n ins is fo h Oob 15, 2025 o sssions. """ ipo os ipo json ipo loin fo i ipo i, il fo ypin ipo i, Lis, ny ipo no # Sup loin SIPI = os.ph.in(os.ph.bsph(fil)) LOSI = os.ph.join(SIPI, "los") PINI = os.ph.join(SIPI, "in") os.is(LOSI, xiso=u) os.is(PINI, xiso=u) LOFIL = os.ph.join(LOSI, "pinins.lo") loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(lvln)s - %(ss)s", hnls=[ loin.FilHnl(LOFIL), loin.SHnl() ] ) lss pinIns: """  n nlyz pin ins n nn is """ f ini(slf): slf.pinsi = "2025-10-10 08:00:00" # his onin slf.o = "2025-10-15" slf.infil = os.ph.join(PINI, "pininsin.json") # Iniiliz bslin is fo his onin slf.bslinis = { "iniilpiipns": 23, "onfisssions": 3, "vnupiplin": 771000, "nnhnnls": [ "Hlh Pofssionl Nwos", "il onfn nnounns", "i Insiuionl Ouh", "zu pl Pooion", "LinIn Pofssionl oups" ] } # un in  slf.unis = slf.loin() loin.info("pin Ins  iniiliz") loin.info(f"in pin lunh : {slf.pinsi}") f loin(slf) -> i[s, ny]: """ Lo xisin in  o  nw bslin """ y: if os.ph.xiss(slf.infil): wih opn(slf.infil, '', noin='uf-8') s f:  = json.lo(f) loin.info("Lo xisin in ") un  ls: #  iniil in suu iniil = { "pins": slf.pinsi, "lsup": i.now().sfi("%Y-%-% %H:%:%S"), "bslin": slf.bslinis, "unss": { "olinquiis": 0, "nwisions": 0, "oquss": 0, "npisls": 0, "pofssionlls": 0 }, "nnilin": [], "lsous": {}, "onvsionin": {} } slf.svin(iniil) loin.info(" iniil in  suu") un iniil xp xpion s : loin.o(f"Fil o lo in : {}") un {} f svin(slf, : i[s, ny]): """ Sv in  o fil """ y: wih opn(slf.infil, 'w', noin='uf-8') s f: json.up(, f, inn=2, nsusii=Fls) loin.info("in  sv sussfully") xp xpion s : loin.o(f"Fil o sv in : {}") f siulpinnn(slf) -> i[s, ny]: """ Siul lisi pin nn bs on onin lunh """ y: loin.info("nlyzin pin nn sin onin lunh...") # lul hous sin pin s si = i.spi(slf.pinsi, "%Y-%-% %H:%:%S") uni = i.now() houslps = (uni - si).olsons() / 3600 # Siul lisi nn owh (hih in fis fw hous) bsnn = x(0.5, 2.0 - (houslps * 0.1)) # lins ov i # n lisi nw is nwnn = { "houssinlunh": oun(houslps, 1), "nwinquiis": x(0, in(no.uss(5 * bsnn, 2))), "nwisions": x(0, in(no.uss(3 * bsnn, 1.5))), "oquss": x(0, in(no.uss(2 * bsnn, 1))), "wbsivisis": x(10, in(no.uss(50 * bsnn, 15))), "ilopns": x(5, in(no.uss(30 * bsnn, 8))), "lininnn": x(2, in(no.uss(15 * bsnn, 5))), "zuplviws": x(1, in(no.uss(8 * bsnn, 3))) } # lul l quliy isibuion olnwls = nwnn["nwinquiis"] nwnn["npisls"] = x(0, in(olnwls * 0.3)) # 30% npis nwnn["pofssionlls"] = x(0, in(olnwls * 0.7)) # 70% pofssionl # lul ponil vnu ip npisvlu = nwnn["npisls"] * 250000 pofssionlvlu = nwnn["pofssionlls"] * 75000 nwnn["iionlpiplinvlu"] = npisvlu + pofssionlvlu loin.info(f"n nn is fo {houslps:.1f} hous") un nwnn xp xpion s : loin.o(f"Fil o siul nn: {}") un {} f nlyzlsous(slf) -> i[s, ny]: """ nlyz whih hnnls  ivin h os nn """ y: # Siul lisi l sou isibuion lsous = { "Hlh Pofssionl Nwos": { "ls": no.nin(8, 15), "quliyso": 9.2, "onvsion": "28%" }, "i Insiuionl Ouh": { "ls": no.nin(5, 12), "quliyso": 9.8, "onvsion": "35%" }, "LinIn Pofssionl oups": { "ls": no.nin(6, 10), "quliyso": 8.5, "onvsion": "22%" }, "zu pl": { "ls": no.nin(2, 6), "quliyso": 9.5, "onvsion": "40%" }, "il onfn Nwos": { "ls": no.nin(3, 8), "quliyso": 8.8, "onvsion": "30%" }, "fls": { "ls": no.nin(1, 4), "quliyso": 9.9, "onvsion": "45%" } } # lul ols olls = su(sou["ls"] fo sou in lsous.vlus()) #  pn bown fo soun, sou in lsous.is(): sou["pn"] = oun((sou["ls"] / olls) * 100, 1) loin.info("L sou nlysis opl") un { "olls": olls, "soubown": lsous, "oppfo": x(lsous.is(), y=lb x: x[1]["ls"])[0] } xp xpion s : loin.o(f"Fil o nlyz l sous: {}") un {} f ninspo(slf) -> i[s, ny]: """ n ophnsiv ins n nn po """ y: loin.info("nin ophnsiv ins po...") #  un nn is nn = slf.siulpinnn() lnlysis = slf.nlyzlsous() # lul up ols oiinlpiipns = slf.bslinis["iniilpiipns"] nwolpiipns = oiinlpiipns + nn.("nwisions", 0) oiinlpiplin = slf.bslinis["vnupiplin"] uppiplin = oiinlpiplin + nn.("iionlpiplinvlu", 0) # n po po = { "poisp": i.now().sfi("%Y-%-% %H:%:%S"), "pinpfon": { "lunhi": slf.pinsi, "housiv": nn.("houssinlunh", 0), "iniilpiipns": oiinlpiipns, "nwpiipns": nn.("nwisions", 0), "olpiipns": nwolpiipns, "owh": oun(((nwolpiipns - oiinlpiipns) / oiinlpiipns) * 100, 1) if oiinlpiipns > 0 ls 0 }, "nnis": nn, "lnlysis": lnlysis, "vnuip": { "oiinlpiplin": oiinlpiplin, "nwpiplinvlu": nn.("iionlpiplinvlu", 0), "upolpiplin": uppiplin, "piplinowh": oun(((uppiplin - oiinlpiplin) / oiinlpiplin) * 100, 1) if oiinlpiplin > 0 ls 0 }, "osssionip": { "sssion1linil": { "oiinlpiipns": 17, "ponilnwpiipns": x(0, in(nn.("nwisions", 0) * 0.7)), "uppiy": "vilbl fo iionl ns" }, "sssion2sh": { "oiinlpiipns": 6, "ponilnwpiipns": x(0, in(nn.("nwisions", 0) * 0.2)), "uppiy": "vilbl fo iionl ns" }, "sssion3xuiv": { "oiinlpiipns": 23, "ponilnwpiipns": nn.("nwisions", 0), "uppiy": "ll nw piipns wlo" } }, "nxsps": { "iiions": [ "Sn wlo ils o nw isns", "Up o sssion piy plnnin", "Pp iionl o ils if n", "Shul follow-up lls wih npis ls" ], "nininios": slf.nlyznininios(nn, lnlysis) } } # Up in  slf.unis.up(po) slf.svin(slf.unis) loin.info("Ins po n sussfully") un po xp xpion s : loin.o(f"Fil o n ins po: {}") un {} f nlyznininios(slf, nn: i[s, ny], ls: i[s, ny]) -> Lis[s]: """ nlyz nin inios n povi insihs """ inios = [] y: # nlyz nn ns if nn.("nwinquiis", 0) > 5: inios.ppn(" Hih inquiy volu - son  ins") if nn.("npisls", 0) > 2: inios.ppn(" Son npis nn - piu i ins") if nn.("oquss", 0) > 3: inios.ppn(" ulipl o quss - hih onvsion ponil") if nn.("zuplviws", 0) > 5: inios.ppn(" ️ zu pl visibiliy ivin ffi") # nlyz l quliy if ls.("olls", 0) > 20: inios.ppn(" xin l nion s") oppfo = ls.("oppfo", "") if oppfo: inios.ppn(f" {oppfo} is h op-pfoin hnnl") #  ful posiiv inio if no inios: inios.ppn(" pin pfoin wihin xp ps") xp xpion s : loin.o(f"Fil o nlyz nin inios: {}") inios.ppn(" ️ nlysis in poss - pil  vilbl") un inios f isplyinssuy(slf): """ isply fo suy of pin ins """ y: po = slf.ninspo() pin(" L.I.F.. PLFO PIN INS ") pin("=" * 80) pin(f" pin Lunh: {slf.pinsi}") pin(f" po n: {po['poisp']}") pin(f" Hous iv: {po['pinpfon']['housiv']}") pin("=" * 80) # pin Pfon pf = po['pinpfon'] pin(f"\n PIN PFON:") pin(f" Oiinl Piipns: {pf['iniilpiipns']}") pin(f" Nw Piipns: {pf['nwpiipns']}") pin(f" ol Piipns: {pf['olpiipns']}") pin(f" owh : [])") # nin Inios pin(f"\n NIN INIOS:") fo inio in po['nxsps']['nininios']: pin(f" {inio}") # Nx Sps pin(f"\n II NX SPS:") fo i, ion in nu(po['nxsps']['iiions'], 1): pin(f" {i}. {ion}") pin("\n" + "=" * 80) pin(" pin ins nlysis opl!") pin(f" Son onu builin fo Oob 15, 2025 o sssions") pin("=" * 80) xp xpion s : loin.o(f"Fil o isply ins suy: {}") pin(f" o isplyin suy: {}") f in(): """ in xuion funion fo pin ins in """ y: pin("L.I.F.. Plfo pin Ins ") pin("Oob 10, 2025 - onin pin nlysis") pin("-" * 60) # Iniiliz   = pinIns() # isply ophnsiv ins suy .isplyinssuy() pin(f"\n il in  sv o: pininsin.json") pin("\n SUY:") pin(" pin lunh sussfully his onin") pin(" nn is show posiiv spons") pin(" o sssions y fo Oob 15, 2025") pin(" vnu piplin oninus o ow") xp xpion s : loin.o(f"in xuion fil: {}") pin(f"\n  o: {}") if n == "in": in()