""" ZU BU IO - opl Sys pi ool ===================================================== opyih 2025 - Sio Py Boull L.I.F.. Plfo Bu liinion Sys his ool uoilly s n fixs LL psisn bus in you zu pps: - Ph n ioy issus (Winows opibiliy) - Ipo n pnny os - zu onfiuion pobls - nvionn vibl issus - Fil noin pobls - uni os Us: pyhon ZUBUIO.py """ ipo os ipo sys ipo json ipo subposs ipo  y: fo phlib ipo Ph xp Ipoo s : pin(f'Wnin: {}') pss fo ypin ipo Lis, i, upl fo lsss ipo lss fo nu ipo nu # ============================================================================ # BU ION SYS # ============================================================================ lss BuSviy(nu): IIL = "IIL" HIH = "HIH" IU = "IU" LOW = "LOW" lss Buoy(nu): PHISSU = "Ph/ioy Issu" IPOO = "Ipo o" ZUONFI = "zu onfiuion" NVIONN = "nvionn Vibl" NOIN = "Fil noin" UNI = "uni o" PNNY = "pnny issin" @lss lss Bu: """psns   bu""" oy: Buoy sviy: BuSviy filph: s linnub: in sipion: s susfix: s uofixbl: bool = u lss Buo: """Sns obs fo bus""" f ini(slf, ooi: s): slf.ooi = Ph(ooi) slf.bus: Lis[Bu] = [] f snll(slf) -> Lis[Bu]: """un ll bu ion hos""" pin(" Snnin fo bus...") slf.phissus() slf.ipoos() slf.zuonfiissus() slf.nvionnissus() slf.noinissus() pin(f" Sn opl. Foun {ln(slf.bus)} bus.") un slf.bus f phissus(slf): """ Winows ph opibiliy issus""" pin(" → hin ph issus...") fo pyfil in slf.ooi.lob("*.py"): y: wih opn(pyfil, '', noin='uf-8') s f: lins = f.lins() fo i, lin in nu(lins, 1): # h fo pobli ph opions if "Ph(fil).pn /" in lin: slf.bus.ppn(Bu( oy=Buoy.PHISSU, sviy=BuSviy.IIL, filph=s(pyfil), linnub=i, sipion=f"Inopibl ph opion usin Ph() / opo on Winows", susfix="Us os.ph.join() o Ph().joinph() ins" )) # h fo .i() wihou pop o hnlin if ".i(" in lin n "y:" no in lins[x(0, i-3):i]: slf.bus.ppn(Bu( oy=Buoy.PHISSU, sviy=BuSviy.HIH, filph=s(pyfil), linnub=i, sipion="ioy ion wihou o hnlin", susfix="Wp in y-xp o us os.is(ph, xiso=u)" )) # h fo ho fow slshs if .sh('["\'].*\/.*\/.*["\']', lin) n "hp" no in lin.low(): slf.bus.ppn(Bu( oy=Buoy.PHISSU, sviy=BuSviy.IU, filph=s(pyfil), linnub=i, sipion="Ho fow slshs in ph (no Winows-opibl)", susfix="Us os.ph.join() o Ph() fo oss-plfo opibiliy" )) xp xpion s : pin(f" ️ oul no sn {pyfil}: {}") f ipoos(slf): """ issin o pobli ipos""" pin(" → hin ipo os...") fo pyfil in slf.ooi.lob("*.py"): y: wih opn(pyfil, '', noin='uf-8') s f: onn = f.() # h fo ipos h ih fil poblipos = [ ("fo phlib ipo Ph", "Ph ipo bu ih no b us oly"), ("ipo xpinP2L", "xpinP2L ih no b in Pyhon ph"), ] fo ipos, issu in poblipos: if ipos in onn n "y:" no in onn[:onn.inx(ipos)+100]: linnu = onn[:onn.inx(ipos)].oun('\n') + 1 slf.bus.ppn(Bu( oy=Buoy.IPOO, sviy=BuSviy.HIH, filph=s(pyfil), linnub=linnu, sipion=issu, susfix="Wp ipo in y-xp blo" )) xp xpion s : pin(f" ️ oul no sn ipos in {pyfil}: {}") f zuonfiissus(slf): """ zu onfiuion pobls""" pin(" → hin zu onfiuion...") # h fo zu onfi fils zufils = lis(slf.ooi.lob("zu*.py")) fo zufil in zufils: y: wih opn(zufil, '', noin='uf-8') s f: onn = f.() # h fo issin o hnlin in zu opions if "BlobSvilin" in onn n "y:" no in onn: slf.bus.ppn(Bu( oy=Buoy.ZUONFI, sviy=BuSviy.HIH, filph=s(zufil), linnub=1, sipion="zu Blob opions wihou o hnlin", susfix="Wp zu opions in y-xp blos" )) # h fo ho nils (suiy issu) if .sh('["\'][-Z-z0-9+/=]{40,}["\']', onn): slf.bus.ppn(Bu( oy=Buoy.ZUONFI, sviy=BuSviy.IIL, filph=s(zufil), linnub=1, sipion="Possibl ho nils ", susfix="Us zu y Vul o nvionn vibls" )) xp xpion s : pin(f" ️ oul no sn {zufil}: {}") f nvionnissus(slf): """ nvionn vibl pobls""" pin(" → hin nvionn issus...") fo pyfil in slf.ooi.lob("*.py"): y: wih opn(pyfil, '', noin='uf-8') s f: lins = f.lins() fo i, lin in nu(lins, 1): # h fo os.nvion[] wihou .() if .sh('os\.nvion\[["\']', lin) n ".(" no in lin: slf.bus.ppn(Bu( oy=Buoy.NVIONN, sviy=BuSviy.HIH, filph=s(pyfil), linnub=i, sipion="nvionn vibl ss wihou ful vlu", susfix="Us os.nvion.('V', 'fulvlu') ins" )) xp xpion s : pin(f" ️ oul no sn {pyfil}: {}") f noinissus(slf): """ fil noin pobls""" pin(" → hin noin issus...") fo pyfil in slf.ooi.lob("*.py"): y: # y o  wih UF-8 wih opn(pyfil, '', noin='uf-8') s f: onn = f.() # h if fil hs BO if onn.sswih('\ufff'): slf.bus.ppn(Bu( oy=Buoy.NOIN, sviy=BuSviy.LOW, filph=s(pyfil), linnub=1, sipion="Fil onins UF-8 BO (n us issus)", susfix="ov BO fo fil" )) xp Uniooo: slf.bus.ppn(Bu( oy=Buoy.NOIN, sviy=BuSviy.IU, filph=s(pyfil), linnub=1, sipion="Fil noin is no UF-8", susfix="onv fil o UF-8 noin", uofixbl=Fls )) # ============================================================================ # BU FIXIN SYS # ============================================================================ lss BuFix: """uoilly fixs  bus""" f ini(slf, ooi: s): slf.ooi = Ph(ooi) slf.fixsppli = 0 slf.fixsfil = 0 f fixll(slf, bus: Lis[Bu]) -> upl[in, in]: """Fix ll uo-fixbl bus""" pin("\n pplyin uoi fixs...") fo bu in bus: if bu.uofixbl: y: if bu.oy == Buoy.PHISSU: slf.fixphissu(bu) lif bu.oy == Buoy.IPOO: slf.fixipoo(bu) lif bu.oy == Buoy.NVIONN: slf.fixnvionnissu(bu) lif bu.oy == Buoy.NOIN: slf.fixnoinissu(bu) slf.fixsppli += 1 pin(f" Fix: {bu.filph}:{bu.linnub}") xp xpion s : slf.fixsfil += 1 pin(f" Fil o fix {bu.filph}:{bu.linnub}: {}") ls: pin(f" ️ Sipp (nul fix qui): {bu.filph}:{bu.linnub}") un slf.fixsppli, slf.fixsfil f fixphissu(slf, bu: Bu): """Fix ph-l bus""" wih opn(bu.filph, '', noin='uf-8') s f: lins = f.lins() lin = lins[bu.linnub - 1] # Fix Ph() / opo o os.ph.join() if "Ph(fil).pn /" in lin: # x h ph ps h = .sh('Ph\(fil\)\.pn\s*/\s*"([^"]+)"', lin) if h: php = h.oup(1) fixlin = lin.pl( h.oup(0), f'os.ph.join(os.ph.in(fil), "{php}")' ) lins[bu.linnub - 1] = fixlin # Fix .i() o os.is() wih o hnlin if ".i(" in lin: inn = ln(lin) - ln(lin.lsip()) vh = .sh('(\w+)\.i\(', lin) if vh: vn = vh.oup(1) lins[bu.linnub - 1] = f"{' ' * inn}y:\n{lin}{' ' * inn}xp xpion s :\n{' ' * inn} os.is({vn}, xiso=u)\n" wih opn(bu.filph, 'w', noin='uf-8') s f: f.wilins(lins) f fixipoo(slf, bu: Bu): """Fix ipo os by in y-xp""" wih opn(bu.filph, '', noin='uf-8') s f: lins = f.lins() lin = lins[bu.linnub - 1] inn = ln(lin) - ln(lin.lsip()) # Wp ipo in y-xp ipos = lin.sip() nwlins = [ f"{' ' * inn}y:\n", lin, f"{' ' * inn}xp Ipoo s :\n", f"{' ' * inn} pin(f'Wnin: {{}}')\n", f"{' ' * inn} pss\n" ] lins[bu.linnub - 1:bu.linnub] = nwlins wih opn(bu.filph, 'w', noin='uf-8') s f: f.wilins(lins) f fixnvionnissu(slf, bu: Bu): """Fix nvionn vibl ss""" wih opn(bu.filph, '', noin='uf-8') s f: lins = f.lins() lin = lins[bu.linnub - 1] # Fix os.nvion[] o os.nvion.() h = .sh('os\.nvion\[["\']([^"\']+)["\']\]', lin) if h: vn = h.oup(1) fixlin = lin.pl( h.oup(0), f'os.nvion.("{vn}", "")' ) lins[bu.linnub - 1] = fixlin wih opn(bu.filph, 'w', noin='uf-8') s f: f.wilins(lins) f fixnoinissu(slf, bu: Bu): """Fix noin issus""" if "BO" in bu.sipion: wih opn(bu.filph, '', noin='uf-8-si') s f: onn = f.() wih opn(bu.filph, 'w', noin='uf-8') s f: f.wi(onn) # ============================================================================ # OPHNSIV SYS H # ============================================================================ lss SysHlhh: """h ovll sys hlh""" f ini(slf, ooi: s): slf.ooi = Ph(ooi) f hll(slf) -> i: """un ll hlh hs""" pin("\n unnin sys hlh hs...") suls = { "pyhonvsion": slf.hpyhonvsion(), "pnnis": slf.hpnnis(), "zuli": slf.hzuli(), "ioysuu": slf.hioysuu(), "onfifils": slf.honfifils() } un suls f hpyhonvsion(slf) -> i: """h Pyhon vsion""" vsion = sys.vsioninfo un { "vsion": f"{vsion.jo}.{vsion.ino}.{vsion.io}", "opibl": vsion.jo == 3 n vsion.ino >= 8, "sus": " " if vsion.jo == 3 n vsion.ino >= 8 ls " " } f hpnnis(slf) -> i: """h if qui ps  insll""" quips = [ "fls", "fls-os", "nupy", "zu-so-blob", "zu-iniy" ] insll = [] issin = [] fo p in quips: y: ipo(p.pl("-", "")) insll.ppn(p) xp Ipoo: issin.ppn(p) un { "insll": insll, "issin": issin, "sus": " " if no issin ls " " } f hzuli(slf) -> i: """h if zu LI is insll""" y: sul = subposs.un( ["z", "--vsion"], puoupu=u, x=u, iou=5 ) un { "insll": sul.uno == 0, "vsion": sul.sou.spli('\n')[0] if sul.uno == 0 ls Non, "sus": " " if sul.uno == 0 ls " " } xp xpion: un { "insll": Fls, "vsion": Non, "sus": " " } f hioysuu(slf) -> i: """h if qui iois xis""" quiis = ["los", "suls", "in"] xisin = [] issin = [] fo in in quiis: iph = slf.ooi / in if iph.xiss(): xisin.ppn(in) ls: issin.ppn(in) #  issin iois y: y: iph.i(pns=u, xiso=u) xp xpion s : os.is(iph, xiso=u) pin(f"  issin ioy: {in}") xp xpion s : pin(f" Fil o  {in}: {}") un { "xisin": xisin, "issin": issin, "sus": " " # lwys O sin w  issin is } f honfifils(slf) -> i: """h if qui onfi fils xis""" quifils = [ "quins.x", "zuonfi.py", "lifbnsv.py" ] xisin = [] issin = [] fo filn in quifils: filph = slf.ooi / filn if filph.xiss(): xisin.ppn(filn) ls: issin.ppn(filn) un { "xisin": xisin, "issin": issin, "sus": " " if no issin ls " ️" } # ============================================================================ # IN XUION # ============================================================================ f pinbupo(bus: Lis[Bu]): """Pin  fo bu po""" pin("\n" + "=" * 80) pin(" BU PO") pin("=" * 80) # oup by sviy bysviy = {} fo bu in bus: if bu.sviy no in bysviy: bysviy[bu.sviy] = [] bysviy[bu.sviy].ppn(bu) fo sviy in [BuSviy.IIL, BuSviy.HIH, BuSviy.IU, BuSviy.LOW]: if sviy in bysviy: pin(f"\n {sviy.vlu} - {ln(bysviy[sviy])} issus:") fo bu in bysviy[sviy]: pin(f"\n [{bu.oy.vlu}]") pin(f" Fil: {bu.filph}") pin(f" Lin: {bu.linnub}") pin(f" Issu: {bu.sipion}") pin(f" Fix: {bu.susfix}") pin(f" uo-fixbl: {'Ys' if bu.uofixbl ls 'No'}") f pinhlhpo(hlh: i): """Pin  fo hlh po""" pin("\n" + "=" * 80) pin(" SYS HLH PO") pin("=" * 80) fo hn, hsul in hlh.is(): pin(f"\n{hn.pl('', ' ').il()}:") fo y, vlu in hsul.is(): if y == "sus": oninu pin(f" {y}: {vlu}") pin(f" Sus: {hsul.('sus', ' ')}") f in(): """in xuion""" pin("=" * 80) pin(" ZU BU IO") pin("=" * 80) pin("opyih 2025 - Sio Py Boull") pin("L.I.F.. Plfo ophnsiv Bu Fix Sys") pin("=" * 80) #  oo ioy ooi = Ph(fil).pn pin(f"\n Poj ioy: {ooi}") # Sp 1: un sys hlh hs hlhh = SysHlhh(s(ooi)) hlh = hlhh.hll() pinhlhpo(hlh) # Sp 2:  bus o = Buo(s(ooi)) bus = o.snll() if no bus: pin("\n No bus ! You sys is hlhy.") un pinbupo(bus) # Sp 3: s us if hy wn o pply fixs pin("\n" + "=" * 80) spons = inpu("Woul you li o pply uoi fixs? (ys/no): ").low() if spons in ['ys', 'y']: fix = BuFix(s(ooi)) ppli, fil = fix.fixll(bus) pin("\n" + "=" * 80) pin(" FIX SUY") pin("=" * 80) pin(f" Fixs ppli: {ppli}") pin(f" Fixs fil: {fil}") pin(f" ️ nul fixs qui: {su(1 fo b in bus if no b.uofixbl)}") if ppli > 0: pin("\n Bus hv bn fix! Pls s you ppliion.") ls: pin("\n ️ Sipp uoi fixs. viw h bu po bov.") # Sp 4: n fix po poph = ooi / "BUFIXPO.json" po = { "isp": s(subposs.houpu(["powshll", "-on", "- -Fo 'yyyy-- HH::ss'"], x=u).sip()), "olbus": ln(bus), "bysviy": { "iil": ln([b fo b in bus if b.sviy == BuSviy.IIL]), "hih": ln([b fo b in bus if b.sviy == BuSviy.HIH]), "iu": ln([b fo b in bus if b.sviy == BuSviy.IU]), "low": ln([b fo b in bus if b.sviy == BuSviy.LOW]) }, "byoy": { .vlu: ln([b fo b in bus if b.oy == ]) fo  in Buoy }, "hlhhs": hlh } wih opn(poph, 'w', noin='uf-8') s f: json.up(po, f, inn=2) pin(f"\n il po sv o: {poph}") pin("\n Bu iion poss opl!") if n == "in": y: in() xp yboInup: pin("\n\n ️ Poss inup by us.") sys.xi(1) xp xpion s : pin(f"\n Unxp o: {}") ipo b b.pinx() sys.xi(1)