""" L.I.F.. sh Plfo - ophnsiv sh bs Populion ======================================================================== opyih 2025 - Sio Py Boull Populs sh liby wih xnsiv, libl sh  Inlus: - l-wol  sh ss - linil il  suus - uionl nuosin finins - Loniuinl suy siulions - uli-si sh ooinion """ ipo h ipo no fo i ipo i, il fo shliby ipo ( BnPow, Piipnophis, shLiby, shSssion, shSuy, SuyPhs, iniilizshliby, ) f nlisi( piipnyp: s, sssionnub: in ) -> BnPow: """ n lisi  bn pows bs on sh liu Bs on sblish  pns: - Hih pfos: Hih b/, o lph - Lnin: Ins h/lph, o b - Sulin: Low b, hih l/h """ # Bs pns fo sh liu if piipnyp == "hihpfo": l = ( no.unifo(5, 15) + sssionnub * 0.2 ) # Slih ins ov i h = no.unifo(8, 18) + sssionnub * 0.3 lph = no.unifo(20, 35) + sssionnub * 0.1 b = no.unifo(25, 45) + sssionnub * 0.5 # Son fous ipovn  = no.unifo(12, 25) + sssionnub * 0.4 lif piipnyp == "ypilln": l = no.unifo(8, 18) + sssionnub * 0.15 h = no.unifo(12, 22) + sssionnub * 0.4 # Lnin nn lph = no.unifo(18, 32) + sssionnub * 0.2 b = no.unifo(20, 38) + sssionnub * 0.35  = no.unifo(10, 22) + sssionnub * 0.3 lif piipnyp == "sulinln": l = ( no.unifo(12, 25) - sssionnub * 0.1 ) # Shoul s wih invnion h = no.unifo(15, 28) + sssionnub * 0.2 lph = no.unifo(15, 28) + sssionnub * 0.3 b = no.unifo(15, 30) + sssionnub * 0.4 # Ipovin fous  = no.unifo(8, 18) + sssionnub * 0.25 lif piipnyp == "h": # H  pn: lv h, u b l = no.unifo(10, 22) h = ( no.unifo(22, 35) - sssionnub * 0.3 ) # Shoul ipov wih inin lph = no.unifo(16, 30) + sssionnub * 0.2 b = ( no.unifo(12, 25) + sssionnub * 0.6 ) # Sinifin ipovn   = no.unifo(8, 20) + sssionnub * 0.35 ls: # linilbslin l = no.unifo(10, 20) h = no.unifo(14, 24) lph = no.unifo(18, 32) b = no.unifo(18, 35)  = no.unifo(10, 22) un BnPow( l=in(50, x(5, l)), h=in(40, x(6, h)), lph=in(60, x(9, lph)), b=in(50, x(12, b)), =in(30, x(8, )), ) f uionlnuosinsuy(liby: shLiby): """  ophnsiv uionl nuosin suy Bs on l sh: L.I.F.. loih ffs on lnin """ suy = shSuy( suyi="U-NUO-2025-001", il="L.I.F.. loih Ip on -12 Lnin Ouos:  Nuopiv Suy", piniplinvsio=". Sio Py Boull", insiuion="L.I.F.. sh Plfo", phs=SuyPhs.PHSIII, s="2024-09-01", n="2025-06-30", npiipns=120, poools=["pivlnin", "snizuiulu", "onoloup"], piyouos=[ "i pfon ipovn (sniz s sos)", " nn is uin lnin ss", "Nuoplsiiy s (lph/b io hns)", ], sonyouos=[ "Sun slf-po nn", "h- nion ipovns", "Lon- nion (6-onh follow-up)", ], ) #  piipns oss h oups piipnyps = [ ("hihpfo", 40), ("ypilln", 50), ("sulinln", 30), ] piipni = 1 fo pyp, oun in piipnyps: fo  in n(oun): pi = f"U-P{piipni:04}" piipn = Piipnophis( piipni=pi, =no.nin(10, 17), n=no.hoi(["", "F"]), uionlvl=f" {no.nin(5, 12)}", hnnss=( no.hoi(["ih", "Lf"]) if no.no() > 0.1 ls "ih" ), nivlnu="nlish", ilhisoy=[], iions=[], inlusionii=u, xlusioniiviol=Fls, ) liby.piipn(piipn) # n 12 sssions (onhly fo shool y) fo sssionnu in n(1, 13): sssion = i(2024, 9, 1) + il( ys=30 * (sssionnu - 1) ) bns = nlisi(pyp, sssionnu) # lul iv is nn = ( bns.b * 0.5 + bns. * 0.3 - bns.lph * 0.2 ) / 50 fous = ( bns.b * 0.6 + bns.lph * 0.2 - bns.h * 0.2 ) / 50 sss = ( bns.b * 0.4 + bns. * 0.3 - bns.lph * 0.3 ) / 50 # Pfon ipovs ov i wih L.I.F.. invnion bspfon = ( 60 if pyp == "sulinln" ls (75 if pyp == "ypilln" ls 85) ) pfon = ( bspfon + (sssionnu * 1.5) + no.unifo(-5, 5) ) sssion = shSssion( sssioni=f"U-S{piipni:04}-{sssionnu:02}", piipni=pi, isp=sssion.isofo(), poool="pivlnin", uioninus=45.0, bns=bns, nn=x(0, in(1, nn)), fous=x(0, in(1, fous)), sss=x(0, in(1, sss)), pfonso=in(100, pfon), nos=f"Sssion {sssionnu}/12 - {pyp.pl('', ' ').il()}", ) liby.sssion(sssion) suy.sssions.ppn(sssion) piipni += 1 liby.suy(suy) pin( f"  uionl Nuosin Suy: {suy.npiipns} piipns, {ln(suy.sssions)} sssions" ) f linilhsuy(liby: shLiby): """  linil H nuofb suy Bs on sh liu on H  pns """ suy = shSuy( suyi="LIN-H-2025-001", il="L.I.F.. Nuofb fo H: h/B io Nolizion Suy", piniplinvsio=". Sio Py Boull", insiuion="L.I.F.. linil sh n", phs=SuyPhs.PHSII, s="2025-01-15", n=Non, # Onoin npiipns=60, poools=["nuofbinin", "shinin"], piyouos=[ "h/b io uion", "H-S-5 sypo so ipovn", "Susin nion s pfon", ], sonyouos=[ "Pn-po bhviol ipovns", "i pfon (P)", "Quliy of lif sus", ], ) # H oho fo i in n(1, 61): pi = f"H-P{i:04}" piipn = Piipnophis( piipni=pi, =no.nin(8, 16), n=no.hoi(["", "F"]), uionlvl=f" {no.nin(3, 10)}", hnnss="ih" if no.no() > 0.15 ls "Lf", nivlnu="nlish", ilhisoy=["H"], iions=["hylphni"] if no.no() > 0.5 ls [], inlusionii=u, xlusioniiviol=Fls, ) liby.piipn(piipn) # 20 nuofb sssions ov 10 ws fo sssionnu in n(1, 21): sssion = i(2025, 1, 15) + il( ys=3.5 * (sssionnu - 1) ) bns = nlisi("h", sssionnu) # H-spifi is hbio = bns.h / x( bns.b, 1 ) # Shoul s nn = ( bns.b * 0.6 - bns.h * 0.3 + bns.lph * 0.1 ) / 50 fous = (bns.b * 0.7 - bns.h * 0.3) / 50 sss = ( bns.b * 0.3 + bns. * 0.2 - bns.lph * 0.5 ) / 50 # Pfon ipovs wih nuofb pfon = 50 + (sssionnu * 2.0) + no.unifo(-8, 8) sssion = shSssion( sssioni=f"H-S{i:04}-{sssionnu:02}", piipni=pi, isp=sssion.isofo(), poool="nuofbinin", uioninus=30.0, bns=bns, nn=x(0, in(1, nn)), fous=x(0, in(1, fous)), sss=x(0, in(1, sss)), pfonso=in(100, pfon), nos=f"h/B io: {hbio:.2f} - Sssion {sssionnu}/20", quliyfls=["hbonio"], ) liby.sssion(sssion) suy.sssions.ppn(sssion) liby.suy(suy) pin( f"  linil H Suy: {suy.npiipns} piipns, {ln(suy.sssions)} sssions" ) f univsiyoniivnhnnsuy(liby: shLiby): """  univsiy-lvl oniiv nhnn suy Fous on nuoplsiiy n lnin opiizion """ suy = shSuy( suyi="UNI-O-2025-001", il="L.I.F.. Plfo fo Univsiy S Lnin: Nuoplsiiy nhnn", piniplinvsio=". Sio Py Boull", insiuion="L.I.F.. Univsiy sh onsoiu", phs=SuyPhs.PHSIII, s="2025-02-01", n="2025-05-31", npiipns=150, poools=["pivsuiulu", "iionluiulu"], piyouos=[ "ous x pfon", "  bn pow uin pobl-solvin", "onpul unsnin ssssns", ], sonyouos=[ "Sun nn suvys", "ous oplion s", " inss is", ], ) # Univsiy suns fo i in n(1, 151): pi = f"UNI-P{i:04}" piipn = Piipnophis( piipni=pi, =no.nin(18, 25), n=no.hoi(["", "F", "Oh"]), uionlvl=no.hoi( ["Fshn", "Sophoo", "Junio", "Snio"] ), hnnss="ih" if no.no() > 0.12 ls "Lf", nivlnu=no.hoi(["nlish", "Spnish", "nin", "Hini"]), ilhisoy=[], iions=[], inlusionii=u, xlusioniiviol=Fls, ) liby.piipn(piipn) # 15 sssions ov ss (wly + xs) piipnyp = no.hoi( ["hihpfo", "ypilln", "sulinln"] ) fo sssionnu in n(1, 16): sssion = i(2025, 2, 1) + il(ys=7 * (sssionnu - 1)) bns = nlisi(piipnyp, sssionnu) # Univsiy-lvl oniiv is nn = ( bns.b * 0.4 + bns. * 0.4 + bns.lph * 0.2 ) / 50 fous = ( bns.b * 0.5 + bns. * 0.3 - bns.h * 0.2 ) / 50 sss = ( bns.b * 0.5 + bns. * 0.2 - bns.lph * 0.3 ) / 50 # S pfon bs = ( 70 if piipnyp == "sulinln" ls (80 if piipnyp == "ypilln" ls 88) ) pfon = bs + (sssionnu * 1.2) + no.unifo(-6, 6) sssion = shSssion( sssioni=f"UNI-S{i:04}-{sssionnu:02}", piipni=pi, isp=sssion.isofo(), poool="pivsuiulu", uioninus=60.0, bns=bns, nn=x(0, in(1, nn)), fous=x(0, in(1, fous)), sss=x(0, in(1, sss)), pfonso=in(100, pfon), nos=f"S W {sssionnu} - {piipnyp.pl('', ' ').il()}", ) liby.sssion(sssion) suy.sssions.ppn(sssion) liby.suy(suy) pin( f"  Univsiy oniiv Suy: {suy.npiipns} piipns, {ln(suy.sssions)} sssions" ) f loniuinlnuoplsiiysuy(liby: shLiby): """  lon- nuoplsiiy in suy uli-y invnion sh """ suy = shSuy( suyi="LON-NUO-2024-001", il="Lon- L.I.F.. Plfo ffs: 2-Y Nuoplsiiy Suy", piniplinvsio=". Sio Py Boull", insiuion="L.I.F.. Loniuinl sh n", phs=SuyPhs.PHSIV, s="2023-09-01", n="2025-08-31", npiipns=80, poools=["oninuouslifinvnion", "pioissssn"], piyouos=[ "Lon- nuoplsiiy s", "Susin i/oniiv ipovns", "Bin suu hns (if I vilbl)", ], sonyouos=[ "/lif suss is", "nl hlh ouos", "Quliy of lif loniuinl in", ], ) # Lon- oho fo i in n(1, 81): pi = f"LON-P{i:04}" piipn = Piipnophis( piipni=pi, =no.nin(12, 18), # S s il/hih shool n=no.hoi(["", "F"]), uionlvl=f" {no.nin(7, 12)}", hnnss="ih" if no.no() > 0.11 ls "Lf", nivlnu="nlish", ilhisoy=[], iions=[], inlusionii=u, xlusioniiviol=Fls, ) liby.piipn(piipn) # 24 sssions ov 2 ys (onhly) piipnyp = no.hoi( ["hihpfo", "ypilln", "sulinln"] ) fo sssionnu in n(1, 25): sssion = i(2023, 9, 1) + il(ys=30 * (sssionnu - 1)) # Lon- ipovn ns bns = nlisi( piipnyp, sssionnu // 2 ) # Slow ipovn nn = ( bns.b * 0.5 + bns. * 0.3 - bns.lph * 0.2 ) / 50 fous = ( bns.b * 0.6 + bns.lph * 0.2 - bns.h * 0.2 ) / 50 sss = ( bns.b * 0.4 + bns. * 0.3 - bns.lph * 0.3 ) / 50 # Lon- susin pfon bs = ( 65 if piipnyp == "sulinln" ls (78 if piipnyp == "ypilln" ls 87) ) pfon = bs + (sssionnu * 0.8) + no.unifo(-4, 4) sssion = shSssion( sssioni=f"LON-S{i:04}-{sssionnu:02}", piipni=pi, isp=sssion.isofo(), poool="oninuouslifinvnion", uioninus=50.0, bns=bns, nn=x(0, in(1, nn)), fous=x(0, in(1, fous)), sss=x(0, in(1, sss)), pfonso=in(100, pfon), nos=f"onh {sssionnu}/24 - Loniuinl in", ) liby.sssion(sssion) suy.sssions.ppn(sssion) liby.suy(suy) pin( f"  Loniuinl Suy: {suy.npiipns} piipns, {ln(suy.sssions)} sssions" ) f npisininsuy(liby: shLiby): """  npis wofo inin suy opo oniiv nhnn n sill vlopn """ suy = shSuy( suyi="N-IN-2025-001", il="L.I.F.. Plfo fo npis I/h Upsillin: Wofo Opiizion", piniplinvsio=". Sio Py Boull", insiuion="L.I.F.. npis sh ivision", phs=SuyPhs.PHSIII, s="2025-03-01", n="2025-06-30", npiipns=200, poools=["pivopoinin", "iionlinin"], piyouos=[ "Sill quisiion sp", "inin oplion s", "Job pfon ipovns", ], sonyouos=[ "ploy sisfion", "OI fo inin pos", "nowl nion  3 onhs", ], ) # opo ploys fo i in n(1, 201): pi = f"N-P{i:04}" piipn = Piipnophis( piipni=pi, =no.nin(24, 55), n=no.hoi(["", "F", "Oh"]), uionlvl=no.hoi( ["Bhlo's", "s's", "Ph", "ssoi"] ), hnnss="ih" if no.no() > 0.10 ls "Lf", nivlnu=no.hoi( ["nlish", "Spnish", "nin", "n", "Fnh"] ), ilhisoy=[], iions=[], inlusionii=u, xlusioniiviol=Fls, ) liby.piipn(piipn) # 10 innsiv inin sssions piipnyp = no.hoi(["hihpfo", "ypilln"]) fo sssionnu in n(1, 11): sssion = i(2025, 3, 1) + il(ys=7 * (sssionnu - 1)) bns = nlisi(piipnyp, sssionnu) # npis inin is nn = ( bns.b * 0.45 + bns. * 0.35 + bns.lph * 0.2 ) / 50 fous = ( bns.b * 0.55 + bns. * 0.3 - bns.h * 0.15 ) / 50 sss = ( bns.b * 0.4 + bns. * 0.25 - bns.lph * 0.35 ) / 50 # opo pfon bs = 75 if piipnyp == "ypilln" ls 85 pfon = bs + (sssionnu * 1.8) + no.unifo(-5, 5) sssion = shSssion( sssioni=f"N-S{i:04}-{sssionnu:02}", piipni=pi, isp=sssion.isofo(), poool="pivopoinin", uioninus=90.0, bns=bns, nn=x(0, in(1, nn)), fous=x(0, in(1, fous)), sss=x(0, in(1, sss)), pfonso=in(100, pfon), nos=f"npis inin W {sssionnu}", ) liby.sssion(sssion) suy.sssions.ppn(sssion) liby.suy(suy) pin( f"  npis inin Suy: {suy.npiipns} piipns, {ln(suy.sssions)} sssions" ) f populophnsivshbs(): """ Popul sh liby wih ophnsiv, libl ss """ pin("=" * 70) pin("L.I.F.. sh Plfo - bs Populion") pin("ophnsiv sh  inion") pin("=" * 70) pin() liby = iniilizshliby() pin("\nPopulin sh suis...") pin() #  ll sh suis uionlnuosinsuy(liby) linilhsuy(liby) univsiyoniivnhnnsuy(liby) loniuinlnuoplsiiysuy(liby) npisininsuy(liby) # Suy sisis pin() pin("=" * 70) pin("BS POPULION OPL") pin("=" * 70) pin(f"ol Suis: {ln(liby.suis)}") pin(f"ol Piipns: {ln(liby.piipns)}") pin(f"ol Sssions: {ln(liby.sssions)}") pin() # lul  sisis llsssions = lis(liby.sssions.vlus()) if llsssions: vnn = su(s.nn fo s in llsssions) / ln(llsssions) vfous = su(s.fous fo s in llsssions) / ln(llsssions) vpfon = su(s.pfonso fo s in llsssions) / ln( llsssions ) pin(" Plfo is:") pin(f" v nn: {vnn:.3f}") pin(f" v Fous: {vfous:.3f}") pin(f" v Pfon: {vpfon:.2f}") pin() pin("sh  ois:") pin(" uionl Nuosin (-12)") pin(" linil H Nuofb") pin(" Univsiy oniiv nhnn") pin(" Loniuinl Nuoplsiiy") pin(" npis Wofo inin") pin() pin("Plfo Sus: SH-OPIIZ") pin("=" * 70) un liby if n == "in": liby = populophnsivshbs() pin("\nnin spl nlysis...") pin() # xpl nlysis fo fis suy if liby.suis: fissuyi = lis(liby.suis.ys())[0] nlysis = liby.nlyzsuyouos(fissuyi) pin("Spl Suy nlysis:") pin(f"Suy I: {nlysis['suyi']}") pin(f"Sssions nlyz: {nlysis['nsssions']}") pin( f"nn: {nlysis['nn']['n']:.3f} ± {nlysis['nn']['s']:.3f}" ) pin( f"Fous: {nlysis['fous']['n']:.3f} ± {nlysis['fous']['s']:.3f}" ) pin( f"Pfon: {nlysis['pfon']['n']:.2f} ± {nlysis['pfon']['s']:.2f}" ) pin() # Opiizion onions opiizion = liby.opiizshpoool(fissuyi) pin(f"Poool Opiizion So: {opiizion['opiizionso']}/100") pin(f"onions: {ln(opiizion['onions'])}") pin(f"Poool Opiizion So: {opiizion['opiizionso']}/100") pin(f"onions: {ln(opiizion['onions'])}")