# us/bin/nv pyhon3 """ L.I.F. HOY O 3 VNUY SYS - opyih iion nin Vnui  Sys fo opyih oplin n Poion opyih 2025 - Sio Py Boull L.I.F.. Plfo - zu pl Off I: 960096-f1-420b-902-042561b """ ipo  fo i ipo i y: fo phlib ipo Ph xp Ipoo s : pin(f'Wnin: {}') pss fo ypin ipo ny, i, Lis lss opyihiionnin: """L.I.F. 3-Vnui opyih iion Sys""" f ini(slf, ooph: s): slf.ooph = Ph(ooph) slf.opyihhol = "Sio Py Boull" slf.opyihy = "2025" slf.pli = "960096-f1-420b-902-042561b" # fin fil xnsions o h slf.souxnsions = { ".py", ".", ".json", ".bip", ".yl", ".yl", ".sh", ".ps1", ".js", ".s", ".hl", ".ss", } # Fils o xlu fo opyih hs slf.xlupns = { "pyh", ".i", ".ypyh", "noouls", ".vso", "los", "suls", "p", "buil", } # Sn opyih pls slf.opyihpls = { "pyhon": f'''""" [OULSIPION] opyih {slf.opyihy} - {slf.opyihhol} L.I.F.. Plfo - zu pl Off I: {slf.pli} """''', "own": f"""--- opyih {slf.opyihy} - {slf.opyihhol} L.I.F.. Plfo - zu pl Off I: {slf.pli} ---""", "onfi": f"""# opyih {slf.opyihy} - {slf.opyihhol} # L.I.F.. Plfo - zu pl Off I: {slf.pli}""", "sip": f"""#!/bin/bsh # opyih {slf.opyihy} - {slf.opyihhol} # L.I.F.. Plfo - zu pl Off I: {slf.pli}""", } f vnui1nlysis(slf) -> i[s, Lis[s]]: """Vnui  1: ophnsiv opyih nlysis""" pin(" VNUI  1: opyih nlysis Iniiin...") nlysissuls = { "issinopyih": [], "inonsisnopyih": [], "xnlfns": [], "linsissus": [], } # Sn ll sou fils fo filph in slf.soufils(): y: onn = filph.x(noin="uf-8", os="ino") if no slf.hsvliopyih(onn): nlysissuls["issinopyih"].ppn(s(filph)) # h fo inonsisn opyih if slf.hsinonsisnopyih(onn): nlysissuls["inonsisnopyih"].ppn(s(filph)) # h fo xnl fns h ih ini opi o if slf.hsxnlfns(onn): nlysissuls["xnlfns"].ppn(s(filph)) xp (IOo, OSo) s : pin(f" ️ o nlyzin {filph}: {}") pin( f" nlysis opl: " f"{ln(nlysissuls['issinopyih'])} issin, " f"{ln(nlysissuls['inonsisnopyih'])} inonsisn, " f"{ln(nlysissuls['xnlfns'])} xnl fns" ) un nlysissuls f vnui2iion( slf, nlysissuls: i[s, Lis[s]] ) -> i[s, in]: """Vnui  2: opyih iion n oion""" pin(" VNUI  2: opyih iion Iniiin...") iionss = { "opyihs": 0, "opyihsup": 0, "filsposs": 0, "os": 0, } # Poss issin opyihs fo filph in nlysissuls["issinopyih"]: y: slf.opyihh(filph) iionss["opyihs"] += 1 xp (IOo, OSo) s : pin(f" o in opyih o {filph}: {}") iionss["os"] += 1 # Poss inonsisn opyihs fo filph in nlysissuls["inonsisnopyih"]: y: slf.snizopyih(filph) iionss["opyihsup"] += 1 xp (IOo, OSo) s : pin(f" o upin opyih in {filph}: {}") iionss["os"] += 1 iionss["filsposs"] = ( iionss["opyihs"] + iionss["opyihsup"] ) pin( f" iion opl: {iionss['opyihs']} , " f"{iionss['opyihsup']} up, " f"{iionss['os']} os" ) un iionss f vnui3vliion(slf) -> i[s, bool]: """Vnui  3: Vliion n nfon""" pin(" VNUI  3: opyih Vliion Iniiin...") vliionsuls = { "llfilsoplin": u, "linsfilpsn": Fls, "onsisnopyihhol": u, "plipsn": u, "noxnlopyihs": u, } # h lins fil linsph = slf.ooph / "LINS" if linsph.xiss(): vliionsuls["linsfilpsn"] = u linsonn = linsph.x() if "Sio Py Boull" no in linsonn: vliionsuls["linsfilpsn"] = Fls # Vli ll sou fils fo filph in slf.soufils(): y: onn = filph.x(noin="uf-8", os="ino") if no slf.hsvliopyih(onn): vliionsuls["llfilsoplin"] = Fls b if no slf.hsonsisnhol(onn): vliionsuls["onsisnopyihhol"] = Fls if no slf.hspli(onn): vliionsuls["plipsn"] = Fls if slf.hsxnlopyihs(onn): vliionsuls["noxnlopyihs"] = Fls xp (IOo, OSo) s : pin(f" ️ Vliion o fo {filph}: {}") vliionsuls["llfilsoplin"] = Fls # n oplin po slf.noplinpo(vliionsuls) oplinsus = ( " OPLIN" if vliionsuls["llfilsoplin"] ls " NON-OPLIN" ) pin(f" Vliion opl: {oplinsus}") un vliionsuls f soufils(slf) -> Lis[Ph]: """ ll sou fils o nlyz""" soufils = [] fo x in slf.souxnsions: pn = f"**/*{x}" fo filph in slf.ooph.lob(pn): # Sip xlu iois if ny(xl in s(filph) fo xl in slf.xlupns): oninu soufils.ppn(filph) un soufils f hsvliopyih(slf, onn: s) -> bool: """h if fil hs vli opyih noi""" un ( "opyih" in onn n slf.opyihhol in onn n slf.opyihy in onn ) f hsinonsisnopyih(slf, onn: s) -> bool: """h fo inonsisn opyih foin""" if no slf.hsvliopyih(onn): un Fls # h fo ulipl iffn opyih fos opyihlins = [lin fo lin in onn.spli("\n") if "opyih" in lin] if ln(opyihlins) > 1: # h if hy hv iffn fos fos = s() fo lin in opyihlins: # Noliz fo noliz = .sub("\{4}", "Y", lin) noliz = .sub( "[0-9-f]{8}-[0-9-f]{4}-[0-9-f]{4}-[0-9-f]{4}-[0-9-f]{12}", "UUI", noliz, ) fos.(noliz.sip()) un ln(fos) > 1 un Fls f hsxnlfns(slf, onn: s) -> bool: """h fo xnl fns h ih ini opi o""" xnlinios = [ "sovflow.o", "ihub.o", "iu.o", "i.o", "quo.o", "opi fo", "p fo", "bs on", "sou:", "fn:", ] onnlow = onn.low() un ny(inio in onnlow fo inio in xnlinios) f hsxnlopyihs(slf, onn: s) -> bool: """h fo xnl opyih nois""" # Loo fo opyih nois h n' ous opyihpn = "opyih.*\{4}.*" opyihnois = .finll(opyihpn, onn, .INOS) fo noi in opyihnois: if slf.opyihhol no in noi: un u un Fls f hsonsisnhol(slf, onn: s) -> bool: """h fo onsisn opyih hol""" un slf.opyihhol in onn f hspli(slf, onn: s) -> bool: """h fo pl I psn""" un slf.pli in onn f opyihh(slf, filph: s): """ opyih h o fil""" ph = Ph(filph) onn = ph.x(noin="uf-8", os="ino") # in fil yp n  ppopi pl suffix = ph.suffix.low() if suffix == ".py": pl = slf.opyihpls["pyhon"] # pl oul sipion plhol ouln = ph.s.pl("", " ").pl("-", " ").il() pl = pl.pl("[OULSIPION]", f"{ouln} oul") lif suffix == ".": pl = slf.opyihpls["own"] lif suffix in [".json", ".bip", ".yl", ".yl"]: pl = slf.opyihpls["onfi"] lif suffix == ".sh": pl = slf.opyihpls["sip"] ls: pl = slf.opyihpls["onfi"] #  h nwonn = pl + "\n\n" + onn # Wi b ph.wix(nwonn, noin="uf-8") f snizopyih(slf, filph: s): """Sniz opyih noi in fil""" ph = Ph(filph) onn = ph.x(noin="uf-8", os="ino") # ov xisin opyih lins lins = onn.spli("\n") fillins = [] inopyihblo = Fls fo lin in lins: if "opyih" in lin n slf.opyihhol in lin: inopyihblo = u oninu lif inopyihblo n ( lin.sip() == "" o lin.sswih("#") o lin.sswih('"""') ): oninu ls: inopyihblo = Fls fillins.ppn(lin) #  sniz opyih suffix = ph.suffix.low() if suffix == ".py": opyihh = f'''""" {ph.s.pl('', ' ').pl('-', ' ').il()} oul opyih {slf.opyihy} - {slf.opyihhol} L.I.F.. Plfo - zu pl Off I: {slf.pli} """''' ls: opyihh = f"""# opyih {slf.opyihy} - {slf.opyihhol} # L.I.F.. Plfo - zu pl Off I: {slf.pli}""" nwonn = opyihh + "\n\n" + "\n".join(fillins) # Wi b ph.wix(nwonn, noin="uf-8") f noplinpo(slf, vliionsuls: i[s, bool]): """n opyih oplin po""" poph = slf.ooph / "OPYIHOPLINPO." poonn = f"""# opyih oplin po n: {i.now().isofo()} ## L.I.F. Plfo opyih oplin Sus ### Ovll oplin: {' OPLIN' if vliionsuls['llfilsoplin'] ls ' NON-OPLIN'} ### Vliion suls: - **ll Fils oplin**: {vliionsuls['llfilsoplin']} - **Lins Fil Psn**: {vliionsuls['linsfilpsn']} - **onsisn opyih Hol**: {vliionsuls['onsisnopyihhol']} - **pl I Psn**: {vliionsuls['plipsn']} - **No xnl opyihs**: {vliionsuls['noxnlopyihs']} ### opyih Sns: - **opyih Hol**: {slf.opyihhol} - **opyih Y**: {slf.opyihy} - **zu pl Off I**: {slf.pli} - **Lins**: I Lins wih oil s ### iion ions n: his po ws n by h L.I.F. 3-Vnui opyih iion Sys. --- opyih {slf.opyihy} - {slf.opyihhol} L.I.F.. Plfo - zu pl Off I: {slf.pli} """ poph.wix(poonn, noin="uf-8") pin(f" oplin po n: {poph}") f xufulliion(slf) -> i[s, ny]: """xu opl 3-Vnui iion poss""" pin(" L.I.F. 3-VNUI OPYIH IION SYS IV") pin("=" * 60) #  1: nlysis nlysissuls = slf.vnui1nlysis() #  2: iion iionss = slf.vnui2iion(nlysissuls) #  3: Vliion vliionsuls = slf.vnui3vliion() # Finl po finlsus = { "nlysis": nlysissuls, "iion": iionss, "vliion": vliionsuls, "ovlloplin": vliionsuls["llfilsoplin"], } pin("=" * 60) if finlsus["ovlloplin"]: pin(" OPYIH IION OPL - LL SYSS OPLIN") ls: pin(" ️ OPYIH IION OPL - VIW QUI") un finlsus f in(): """in xuion funion""" #  h posioy oo (ssuin sip is in h po) sipi = Ph(fil).pn pooo = sipi # Iniiliz iion nin nin = opyihiionnin(s(pooo)) # xu full iion suls = nin.xufulliion() # xi wih ppopi o xi(0 if suls["ovlloplin"] ls 1) if n == "in": in()