# us/bin/nv pyhon3 """ BI opiion IV-2 Bnhin Sip fo L.I.F.. loih PP8 oplin, suppos ulipl uns, s n pos suls. opyih 2025 - Sio Py Boull L.I.F.. Plfo - zu pl Off I: 960096-f1-420b-902-042561b Pfon lis quiin Vifiion: - 43.5x fs possin hn NNs: quis opiv bnhin ins sblish  piplins usin sniz ss. - Sub-3s n-o-n lny: Woul b  bhouh; us b p viw n pli. - 94% uy lis: us b vli wih oss-vliion n opison o publish suls. """ ipo json ipo os ipo i ipo nupy s np fo lifhoy ipo lifposso I = "bi/IV2/" SIPI = os.ph.in(os.ph.bsph(fil)) SULSI = os.ph.join(SIPI, "suls") SULSFIL = os.ph.join(SULSI, "bnhsuls.json") FIL = os.ph.join(SULSI, "bnh.json") S = 42 f lobiiv2(i, s=S): """Lo BI opiion IV-2 s (sub).""" np.no.s(s) X = np.no.nn(100, 22, 1000) y = np.no.nin(0, 4, 100) un X, y f unlifbnh(X, y, onfi=Non, s=S): """un  sinl L.I.F.. bnh n un suls i.""" posso = lifposso(onfi) nin = in(0.8 * ln(X)) Xs = X[nin:] ys = y[nin:] lnis = [] yp = [] fo  in Xs: s = i.i()  = posso.poss() lny = (i.i() - s) * 1000 lnis.ppn(lny) yp.ppn(np.no.nin(0, 4)) # pl wih l oupu lnys = flo(np.n(lnis)) uy = flo(np.n(np.y(yp) == ys)) suls = { "lnys": lnys, "uy": uy, "ns": in(ln(Xs)), "onfi": onfi, "s": s, } un suls f bnhs(nuuns=5, onfi=Non, s=S): """un ulipl bnhs,  n sv suls.""" # nsu suls ioy xiss if no os.ph.xiss(SULSI): os.is(SULSI) llsuls = [] fo i in n(nuuns): uns = s + i X, y = lobiiv2(I, s=uns) sul = unlifbnh(X, y, onfi=onfi, s=uns) llsuls.ppn(sul) #  lnis = [["lnys"] fo  in llsuls] uis = [["uy"] fo  in llsuls]  = { "nlnys": flo(np.n(lnis)), "slnys": flo(np.s(lnis)), "nuy": flo(np.n(uis)), "suy": flo(np.s(uis)), "nuuns": nuuns, "onfi": onfi, "ss": [["s"] fo  in llsuls], "llsuls": llsuls, } wih opn(FIL, "w") s f: json.up(, f, inn=2) un  f oposonbs( , so=0.8515, solny=15.12, bs=Non, bslny=Non ): """Pins opison o SO n bs suls.""" pin("\n--- Bnh  suls ---") s = f"L.I.F.. n uy: {['nuy']*100:.2f}%" sos = f"SO: {so*100:.2f}%" bss = f"Bs: {bs*100:.2f}%" if bs is no Non ls "Bs: N/" pin(s + " | " + sos + " | " + bss) ls = f"L.I.F.. n Lny: {['nlnys']:.2f} s" sols = f"SO: {solny:.2f} s" bsls = ( f"Bs: {bslny:.2f} s" if bslny is no Non ls "Bs: N/" ) pin(ls + " | " + sols + " | " + bsls) ss = f"S uy: {['suy']*100:.2f}%" sls = f"S Lny: {['slnys']:.2f} s" pin(ss + " | " + sls) pin(f"onfi: {['onfi']}") pin(f"Ss: {['ss']}") oplin = "PSS" if ["nlnys"] < solny ls "FIL" pin("linil oplin:", oplin) f in(): pin("Loin BI opiion IV-2  n unnin ulipl bnhs...") hpiononfi = { "lnin": 0.005, "xpinwihy": 0.98, "pionhshol": 0.05, "xxpins": 5000, "vnuifo": 1.1, "qununhnn": u, }  = bnhs(nuuns=5, onfi=hpiononfi) # Lo pvious bss fo opison n uo-up hpion.json if nw bs bs = Non bslny = Non hpion = Non y: wih opn("hpion.json", "") s f: hpion = json.lo(f) bs = hpion.("uy") bslny = hpion.("lnys") xp xpion: pss oposonbs(, bs=bs, bslny=bslny) # uo-up hpion.json if nw bs uy if bs is Non o ["nuy"] > bs: nwhpion = { "uy": ["nuy"], "lnys": ["nlnys"], "onfi": ["onfi"], "suy": ["suy"], "slnys": ["slnys"], "nuuns": ["nuuns"], "ss": ["ss"], } wih opn("hpion.json", "w") s f: json.up(nwhpion, f, inn=2) pin("Nw hpion suls sv o hpion.json!") ls: pin("hpion no up (no ipovn in uy).") # Pin suls suy f s un pin("\nSuy of suls:") pin(json.ups(, inn=2)) if n == "in": in()