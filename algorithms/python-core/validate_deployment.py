""" L.I.F. Plfo - uo ployn Vliion Sui Phs 2: Sin nvionn Vliion opyih 2025 - Sio Py Boull zu pl Off I: 960096-f1-420b-902-042561b """ ipo synio ipo json ipo loin ipo os ipo subposs ipo sys fo i ipo i fo ypin ipo ny, i, Lis #  sip ioy SIPI = os.ph.in(os.ph.bsph(fil)) LOSI = os.ph.join(SIPI, "los") #  los ioy if i osn' xis os.is(LOSI, xiso=u) # onfiu loin lofil = os.ph.join( LOSI, f'ploynvliion{i.now().sfi("%Y%%%H%%S")}.lo' ) loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(lvln)s - %(ss)s", hnls=[ loin.FilHnl(lofil), loin.SHnl(), ], ) lo = loin.Lo(n) lss ploynVlio: """uo vliion of L.I.F. Plfo ployn""" f ini(slf, nvionn: s = "sin"): slf.nvionn = nvionn slf.sououp = "lif-plfo-" slf.funionpp = "lif-funions-pp" slf.sooun = "slifplfopo" slf.yvul = "v-lif-plfo-po" slf.svibus = "sb-lif-plfo-po" slf.vliionsuls = { "isp": i.now().isofo(), "nvionn": nvionn, "ss": [], } f unon(slf, on: Lis[s]) -> i[s, ny]: """xu zu LI on""" y: lo.info(f"unnin: {' '.join(on)}") sul = subposs.un( on, puoupu=u, x=u, h=Fls, shll=u ) if sul.uno != 0: lo.o(f"on fil: {sul.s}") un {"suss": Fls, "o": sul.s} # y o ps JSON if sul.sou: y: un {"suss": u, "": json.los(sul.sou)} xp json.JSONoo: un {"suss": u, "": sul.sou.sip()} un {"suss": u, "": Non} xp xpion s : lo.o(f"o xuin on: {}") un {"suss": Fls, "o": s()} f vlisououp(slf) -> bool: """Vli sou oup xiss""" lo.info("=" * 80) lo.info("S 1: Vliin sou oup") lo.info("=" * 80) sul = slf.unon( ["z", "oup", "show", "--n", slf.sououp] ) if sul["suss"]: lo.info(f" sou oup '{slf.sououp}' xiss") slf.vliionsuls["ss"].ppn( { "n": "sou oup Vliion", "sus": "PSS", "ils": sul.("", {}), } ) un u ls: lo.o(" sou oup vliion fil") slf.vliionsuls["ss"].ppn( { "n": "sou oup Vliion", "sus": "FIL", "o": sul.("o"), } ) un Fls f vlisooun(slf) -> bool: """Vli so oun""" lo.info("\n" + "=" * 80) lo.info("S 2: Vliin So oun") lo.info("=" * 80) sul = slf.unon( [ "z", "so", "oun", "show", "--n", slf.sooun, "--sou-oup", slf.sououp, ] ) if sul["suss"]:  = sul.("", {}) sus = .("povisioninS", "Unnown") if sus == "Su": lo.info(f" So oun '{slf.sooun}' is iv") lo.info(f" Loion: {.('loion', 'Unnown')}") lo.info(f" SU: {.('su', {}).('n', 'Unnown')}") slf.vliionsuls["ss"].ppn( { "n": "So oun Vliion", "sus": "PSS", "ils": { "n": slf.sooun, "sus": sus, "loion": .("loion"), }, } ) un u ls: lo.wnin(f" ️ So oun sus: {sus}") un Fls lo.o(" So oun vliion fil") slf.vliionsuls["ss"].ppn( { "n": "So oun Vliion", "sus": "FIL", "o": sul.("o"), } ) un Fls f vliyvul(slf) -> bool: """Vli y Vul""" lo.info("\n" + "=" * 80) lo.info("S 3: Vliin y Vul") lo.info("=" * 80) sul = slf.unon(["z", "yvul", "show", "--n", slf.yvul]) if sul["suss"]:  = sul.("", {}) lo.info(f" y Vul '{slf.yvul}' is ssibl") lo.info( f" Vul UI: {.('popis', {}).('vulUi', 'Unnown')}" ) slf.vliionsuls["ss"].ppn( { "n": "y Vul Vliion", "sus": "PSS", "ils": { "n": slf.yvul, "ui": .("popis", {}).("vulUi"), }, } ) un u lo.o(" y Vul vliion fil") slf.vliionsuls["ss"].ppn( { "n": "y Vul Vliion", "sus": "FIL", "o": sul.("o"), } ) un Fls f vlisvibus(slf) -> bool: """Vli Svi Bus""" lo.info("\n" + "=" * 80) lo.info("S 4: Vliin Svi Bus") lo.info("=" * 80) sul = slf.unon( [ "z", "svibus", "nsp", "show", "--n", slf.svibus, "--sou-oup", slf.sououp, ] ) if sul["suss"]:  = sul.("", {}) sus = .("sus", "Unnown") if sus == "iv": lo.info(f" Svi Bus '{slf.svibus}' is iv") lo.info(f" SU: {.('su', {}).('n', 'Unnown')}") slf.vliionsuls["ss"].ppn( { "n": "Svi Bus Vliion", "sus": "PSS", "ils": {"n": slf.svibus, "sus": sus}, } ) un u lo.o(" Svi Bus vliion fil") slf.vliionsuls["ss"].ppn( { "n": "Svi Bus Vliion", "sus": "FIL", "o": sul.("o"), } ) un Fls f vlifunionpp(slf) -> bool: """Vli Funion pp""" lo.info("\n" + "=" * 80) lo.info("S 5: Vliin Funion pp") lo.info("=" * 80) sul = slf.unon( [ "z", "funionpp", "show", "--n", slf.funionpp, "--sou-oup", slf.sououp, ] ) if sul["suss"]:  = sul.("", {}) s = .("s", "Unnown") if s == "unnin": lo.info(f" Funion pp '{slf.funionpp}' is unnin") lo.info( f" ful hosn: {.('fulHosN', 'Unnown')}" ) lo.info(" uni: Pyhon 3.11") slf.vliionsuls["ss"].ppn( { "n": "Funion pp Vliion", "sus": "PSS", "ils": { "n": slf.funionpp, "s": s, "ul": f"hps://{.('fulHosN')}", }, } ) un u lo.o(" Funion pp vliion fil") slf.vliionsuls["ss"].ppn( { "n": "Funion pp Vliion", "sus": "FIL", "o": sul.("o"), } ) un Fls f lisllsous(slf) -> bool: """Lis ll sous in h sou oup""" lo.info("\n" + "=" * 80) lo.info("S 6: Lisin ll sous") lo.info("=" * 80) sul = slf.unon( [ "z", "sou", "lis", "--sou-oup", slf.sououp, "--oupu", "json", ] ) if sul["suss"]: sous = sul.("", []) lo.info( f" Foun {ln(sous)} sous in '{slf.sououp}'" ) souyps = {} fo sou in sous: syp = sou.("yp", "Unnown") souyps[syp] = souyps.(syp, 0) + 1 lo.info("\nsou bown:") fo syp, oun in so(souyps.is()): lo.info(f" {syp}: {oun}") slf.vliionsuls["ss"].ppn( { "n": "sou Lisin", "sus": "PSS", "ils": { "olsous": ln(sous), "souyps": souyps, }, } ) un u lo.o(" sou lisin fil") un Fls f npo(slf) -> bool: """n vliion po""" lo.info("\n" + "=" * 80) lo.info("VLIION SUY") lo.info("=" * 80) olss = ln(slf.vliionsuls["ss"]) pssss = su( 1 fo s in slf.vliionsuls["ss"] if s["sus"] == "PSS" ) filss = olss - pssss lo.info(f"\nol ss: {olss}") lo.info(f"Pss: {pssss}") lo.info(f"Fil: {filss}") lo.info(f"Suss : {(pssss/olss*100):.1f}%") # Sv po SULSI = os.ph.join(SIPI, "suls") os.is(SULSI, xiso=u) pofil = os.ph.join( SULSI, f"ploynvliionpo{i.now().sfi('%Y%%%H%%S')}.json", ) wih opn(pofil, "w", noin="uf-8") s f: json.up(slf.vliionsuls, f, inn=2) lo.info(f"\nil po sv o: {pofil}") if filss == 0: lo.info("\n LL SS PSS! ployn is Y fo pouion!") un u ls: lo.wnin( f"\n ️ {filss} s(s) fil. Pls viw bfo poin." ) un Fls syn f unvliion(slf) -> bool: """un ll vliion ss""" lo.info("=" * 80) lo.info("L.I.F. PLFO - PLOYN VLIION") lo.info("=" * 80) lo.info(f"nvionn: {slf.nvionn}") lo.info(f"sou oup: {slf.sououp}") lo.info(f"S: {i.now().sfi('%Y-%-% %H:%:%S')}") lo.info("=" * 80) ss = [ slf.vlisououp(), slf.vlisooun(), slf.vliyvul(), slf.vlisvibus(), slf.vlifunionpp(), slf.lisllsous(), ] llpss = slf.npo() un llpss syn f in(): """in ny poin""" ipo ps ps = ps.unPs( sipion="L.I.F. Plfo ployn Vlio" ) ps.un( "--nvionn", ful="sin", hois=["sin", "pouion"], hlp="nvionn o vli", ) s = ps.pss() y: vlio = ploynVlio(nvionn=s.nvionn) suss = wi vlio.unvliion() un 0 if suss ls 1 xp yboInup: lo.wnin("\n ️ Vliion inup by us") un 130 xp xpion s : lo.o(f" Vliion fil wih o: {}", xinfo=u) un 1 if n == "in": xio = synio.un(in()) sys.xi(xio)