# us/bin/nv pyhon3 """ L.I.F. HOY PLFO -  HIVN  Fous on hiin ll L.I.F. s on i fo Spb 27, 2025 lunh his sys onios iil L.I.F. hoy Plfo s n nsus w inin onu fo slss Ni Phs 2 inion. opyih 2025 - Sio Py Boull zu pl Off I: 960096-f1-420b-902-042561b """ ipo synio ipo json ipo loin ipo os fo i ipo i fo lsss ipo lss fo ypin ipo i, Lis, ny ipo nupy s np # onfiu fous loin os.is('los', xiso=u) loin.bsionfi( lvl=loin.INFO, fo='%(si)s - %(lvln)s - %(ss)s', hnls=[ loin.FilHnl('los/lifhoys.lo'), loin.SHnl() ] ) lo = loin.Lo(n) @lss lss LIF: """L.I.F. hoy Plfo  finiion""" n: s unvlu: flo vlu: flo uni: s pioiy: s # "iil", "hih", "iu" lin: s sipion: s niip: flo # How his ffs Ni inss (0-10) lss LIFhoy: """Fous L.I.F. hoy Plfo  in sys""" f ini(slf): slf.lunh = "Spb 27, 2025" slf.s = slf.iniilizlifs() slf.iniv = u lo.info(" L.I.F. hoy   iniiliz") lo.info(f" Lunh : {slf.lunh}") lo.info(f" in {ln(slf.s)} iil s") f iniilizlifs(slf) -> Lis[LIF]: """Iniiliz ll iil L.I.F. hoy Plfo s""" un [ # O LOIH PFON LIF( n="Nul Possin Lny", unvlu=0.45, # s vlu=0.38, # Sub-illison  uni="s", pioiy="iil", lin="Spb 27, 2025", sipion="o L.I.F. loih possin sp", niip=10.0 # iil fo Ni l-i possin ), LIF( n=" Possin uy", unvlu=78.0, # % vlu=82.0, # SO bnh uni="%", pioiy="iil", lin="Spb 27, 2025", sipion="  lssifiion n nlysis uy", niip=9.5 # ssnil fo uli-ol snso fusion ), LIF( n="Lnin pion ", unvlu=72.0, # % vlu=80.0, # piv lnin ffiiny uni="%", pioiy="hih", lin="Spb 27, 2025", sipion="loih pion o iniviul pns", niip=9.0 # Founion fo xponnil lnin ), # ️ ZU INFSUU LIF( n="zu Funion libiliy", unvlu=99.2, # % vlu=99.9, # npis libiliy uni="%", pioiy="iil", lin="Spb 27, 2025", sipion="Svlss funion upi n suss ", niip=8.5 # libl lou infsuu n ), LIF( n="So Pfon", unvlu=95.0, # % vlu=98.0, # Hih-pfon so uni="%", pioiy="hih", lin="Spb 27, 2025", sipion="zu Blob So houhpu n vilbiliy", niip=7.0 #  so fo l ss ), LIF( n="y Vul Suiy", unvlu=98.0, # % vlu=100.0, # Pf suiy uni="%", pioiy="iil", lin="Spb 27, 2025", sipion="nypion n s nn suiy", niip=8.0 # npis suiy quins ), # PL & BUSINSS LIF( n="zu pl ifiion", unvlu=95.0, # % vlu=100.0, # Lunh y uni="%", pioiy="iil", lin="Spb 27, 2025", sipion="opl pl off ifiion", niip=9.0 # Plfo fo Ni isibuion ), LIF( n="ounion oplnss", unvlu=90.0, # % vlu=100.0, # Full ounion uni="%", pioiy="hih", lin="Spb 27, 2025", sipion="Us uis, PI os, n hnil sps", niip=6.0 # Founion fo Ni os ), # PFON IS LIF( n="s Sui ov", unvlu=85.0, # % vlu=95.0, # ophnsiv sin uni="%", pioiy="hih", lin="Spb 27, 2025", sipion="uo s ov n vliion", niip=8.0 # Quliy ssun founion ), LIF( n="Pouion ployn Suss", unvlu=100.0, # % vlu=100.0, # ly hiv! uni="%", pioiy="iil", lin="Spb 27, 2025", sipion="Sussful pouion nvionn ployn", niip=10.0 # ssnil infsuu ), # BUSINSS S LIF( n="Q4 2025 vnu ", unvlu=0.0, # Jus lunhin vlu=345000, # [VNU] uni="US", pioiy="iil", lin="b 31, 2025", sipion="Q4 vnu ilson fo businss vliion", niip=9.5 # Funin fo Phs 2 vlopn ), LIF( n="Us quisiion ", unvlu=0.0, # Lunh y s vlu=1000, # Iniil us bs uni="uss", pioiy="hih", lin="b 31, 2025", sipion="iv us bs fo plfo vliion", niip=7.5 #  vliion fo Ni ) ] f lulovllinss(slf) -> i[s, flo]: """lul ovll L.I.F. plfo inss""" olposs = 0.0 iilposs = 0.0 niinss = 0.0 iils = [ fo  in slf.s if .pioiy == "iil"] fo  in slf.s: # lul poss pn if .vlu > 0: poss = in(100.0, (.unvlu / .vlu) * 100) ls: poss = 100.0 if .unvlu >= .vlu ls 0.0 olposs += poss #  iil s sply if .pioiy == "iil": iilposs += poss # lul Ni inss ip wihip = (poss / 100.0) * .niip niinss += wihip un { "ovllinss": olposs / ln(slf.s), "iilinss": iilposs / ln(iils), "nippion": niinss / su(.niip fo  in slf.s) * 100, "sopl": ln([ fo  in slf.s if .unvlu >= .vlu]), "sis": ln([ fo  in slf.s if .unvlu < (.vlu * 0.8) n .pioiy == "iil"]) } f inifyfouss(slf) -> Lis[i[s, ny]]: """Inify y fous s o hi s on i""" fouss = [] fo  in slf.s: if .unvlu < .vlu: p = .vlu - .unvlu posspn = (.unvlu / .vlu) * 100 fous = { "": .n, "pioiy": .pioiy, "unposs": f"{posspn:.1f}%", "polos": f"{p:.2f} {.uni}", "niip": .niip, "uny": "HIH" if .pioiy == "iil" n posspn < 90 ls "IU", "onion": slf.onion(, posspn) } fouss.ppn(fous) # So by pioiy n Ni ip fouss.so(y=lb x: ( 0 if x["pioiy"] == "iil" ls 1, -x["niip"] )) un fouss f onion(slf, : LIF, poss: flo) -> s: """ spifi onion fo  hivn""" if .n == "Nul Possin Lny": if poss < 85: un "Opiiz o loih loops n syn possin" ls: un "Fin-un pfon bolns fo sub-illison " lif .n == " Possin uy": if poss < 85: un "nhn sinl possin loihs n nois uion" ls: un "Ipln vn hin lnin lssifiion" lif .n == "zu Funion libiliy": if poss < 95: un "Ipln ophnsiv o hnlin n y loi" ls: un " onioin n uo-slin pbiliis" lif .n == "zu pl ifiion": if poss < 98: un "opl inin ifiion quins" ls: un "Finl viw n subission fo ppovl" lif .n == "Q4 2025 vnu ": un "Fous on us quisiion n onvsion opiizion" ls: un f"l vlopn o los {100-poss:.1f}% p" syn f up(slf, n: s, nwvlu: flo): """Up  un vlu""" fo  in slf.s: if .n == n: olvlu = .unvlu .unvlu = nwvlu lo.info(f" Up {n}: {olvlu} → {nwvlu} {.uni}") # h if  hiv if nwvlu >= .vlu: lo.info(f"  HIV: {n} ({nwvlu} {.uni})") b f nfousshbo(slf) -> s: """n fous L.I.F. s shbo""" inss = slf.lulovllinss() fouss = slf.inifyfouss() shbo = f""" L.I.F. HOY PLFO -  HIVN SHBO ========================================================= Lunh : {slf.lunh} un Sus: Spb 27, 2025 - LUNH Y! OVLL INSS IS: Ovll Plfo inss: {inss['ovllinss']:.1f}% iil s Poss: {inss['iilinss']:.1f}% Ni Phs 2 Ppion: {inss['nippion']:.1f}% s opl: {inss['sopl']}/{ln(slf.s)} ️ iil s  is: {inss['sis']} PIOIY FOUS S: """ fo i,  in nu(fouss[:5], 1): # op 5 fous s shbo += f""" {i}. {['']} ({['pioiy'].upp()} PIOIY) un Poss: {['unposs']} p o los: {['polos']} Ni Ip: {['niip']}/10 Uny: {['uny']} ion: {['onion']} """ # Phs 2 inss ssssn if inss['nippion'] >= 75.0: shbo += f""" PHS 2 NSIION SUS: y fo Ni inion plnnin L.I.F. plfo povis soli founion Slss nsiion onu hiv """ ls: shbo += f""" PHS 2 PPION N: Buil Ni inss o 75%+ (unly {inss['nippion']:.1f}%) Fous on hih Ni-ip s inin L.I.F. onu whil ppin Phs 2 """ shbo += f""" ========================================================= L.I.F. hoy Plfo - Hiin s On i! y fo slss Ni Phs 2 inion! ========================================================= """ un shbo syn f xpopo(slf) -> s: """xpo il  in po""" inss = slf.lulovllinss() fouss = slf.inifyfouss() po = { "poinfo": { "il": "L.I.F. hoy Plfo -  hivn po", "n": i.now().isofo(), "lunh": slf.lunh, "poyp": " in & Ni Ppion" }, "inssis": inss, "sil": [ { "n": .n, "unvlu": .unvlu, "vlu": .vlu, "uni": .uni, "pioiy": .pioiy, "posspn": in(100.0, (.unvlu / .vlu) * 100), "niip": .niip, "sipion": .sipion, "lin": .lin } fo  in slf.s ], "fouss": fouss, "onions": { "iiions": [["onion"] fo  in fouss[:3]], "phs2ppion": "Buil Ni inion inss houh L.I.F. xlln", "sussis": "hiv 95%+ iil s fo slss nsiion" } } # xpo o JSON os.is('suls', xiso=u) oupufil = 'suls/lifhoypo.json' wih opn(oupufil, 'w') s f: json.up(po, f, inn=2) lo.info(f" L.I.F.  po xpo o: {oupufil}") un oupufil syn f in(): """in L.I.F. hoy  in funion""" pin(" L.I.F. HOY PLFO -  HIVN ") pin("opyih 2025 - Sio Py Boull") pin("Fous: Hi ll s on i fo Spb 27, 2025 lunh") pin("ol: Slss Ni Phs 2 ppion") # Iniiliz   = LIFhoy() # Siul so un poss (pl wih l suns) wi .up("Nul Possin Lny", 0.42) # Ipov! wi .up(" Possin uy", 80.5) # On ! wi .up("zu pl ifiion", 98.0) # los h! # isply fous shbo shbo = .nfousshbo() pin(shbo) # xpo il po pofil = wi .xpopo() pin(f"\n L.I.F.  IN OPL:") pin(f" ll iil s onio") pin(f" Ni Phs 2 ppion ssss") pin(f" il po: {pofil}") pin(f"\n y o hi ll s on i!") if n == "in": synio.un(in())