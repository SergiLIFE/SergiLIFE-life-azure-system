# us/bin/nv pyhon3 """ Iniv   Insion ool PhysioN & Opn Sin l-i Sh & ownlo Fus: - Sh fo  ss by yp - l-i s isovy - i ownlo fo PhysioN/OpnNuo - uoi possin & nlysis - zu Blob So uplo pbiliy opyih 2025 - Sio Py Boull """ ipo synio ipo json ipo loin ipo os ipo sys fo i ipo i fo ypin ipo i, Lis, Opionl ipo quss # Sup loin os.is("los", xiso=u) loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(lvln)s - %(ss)s", ) lo = loin.Lo(n) lss sSh: """Sh fo  ss by yp n ii""" # ophnsiv s lo SLO = { # PhysioN oo Iy "ooiy": { "n": "oo Iy", "sous": [ { "i": "biiv2", "n": "BI opiion IV-2", "sou": "PhysioN", "ul": "hps://physion.o/fils/ib/1.0.0", "subjs": 9, "hnnls": 22, "splin": 250, "sipion": "oo iy  uin ovn iinion", "pp": "hps://oi.o/10.1109/NS.2008.927637", } ], }, # PhysioN Slp "slp": { "n": "Slp Sin", "sous": [ { "i": "slpf", "n": "Slp-F", "sou": "PhysioN", "ul": "hps://physion.o/fils/slp-fx/1.0.0", "subjs": 197, "hnnls": 2, "splin": 100, "sipion": "Full-nih slp oins wih s nnoions", "pp": "hps://oi.o/10.1038/s.2018.3", } ], }, # Bin-H ouplin "binh": { "n": "- ouplin", "sous": [ { "i": "ouplin", "n": "- ouplin", "sou": "PhysioN", "ul": "hps://physion.o/fils/ib/1.0.0", "subjs": 109, "hnnls": 64, "splin": 256, "sipion": "Bin-h synhonizion uin s", "pp": "hps://oi.o/10.1038/sp00508", } ], }, # Sizu ion "sizu": { "n": "Sizu ion", "sous": [ { "i": "hbi", "n": "HB-I Slp  bs", "sou": "PhysioN", "ul": "hps://physion.o/fils/hbi/1.0.0", "subjs": 24, "hnnls": 23, "splin": 256, "sipion": "Pii sizu bs", "pp": "hps://oi.o/10.1109/IBS.2005.1617480", }, { "i": "plsizu", "n": "pl Univsiy Sizu bs", "sou": "PhysioN", "ul": "hps://physion.o/fils/uh/1.0.0", "subjs": 109, "hnnls": 21, "splin": 250, "sipion": "pl Hospil  oins", "pp": "hps://oi.o/10.1038/s.2016.47", }, ], }, # linil bnoliis "bnoliy": { "n": "linil bnoliy ion", "sous": [ { "i": "uhbnol", "n": "UH bnol ", "sou": "PhysioN", "ul": "hps://physion.o/fils/uhbnol/1.0.0", "subjs": 200, "hnnls": 21, "splin": 250, "sipion": "bnol vs nol  lssifiion", "pp": "hps://oi.o/10.1038/s.2016.47", } ], }, # Nuoplsiiy "nuoplsiiy": { "n": "Nuoplsiiy & Lnin", "sous": [ { "i": "biiv2", "n": "BI oo Lnin", "sou": "PhysioN", "ul": "hps://physion.o/fils/ib/1.0.0", "subjs": 9, "hnnls": 22, "splin": 250, "sipion": "oo iy lnin possion", "pp": "hps://oi.o/10.1109/NS.2008.927637", } ], }, # sin S "sins": { "n": "sin S ", "sous": [ { "i": "opnnuosin", "n": "OpnNuo sin S", "sou": "OpnNuo", "ul": "hps://opnnuo.o", "subjs": 300, "hnnls": 64, "splin": 256, "sipion": "BIS-oplin sin s ", "pp": "hps://opnnuo.o/", } ], }, # oniiv ss "oniiv": { "n": "oniiv s ", "sous": [ { "i": "opnnuooniiv", "n": "OpnNuo oniiv ss", "sou": "OpnNuo", "ul": "hps://opnnuo.o", "subjs": 200, "hnnls": 32, "splin": 512, "sipion": "Woin oy, nion, N-b ss", "pp": "hps://opnnuo.o/", } ], }, # Pholoil "pholoil": { "n": "Pholoil ", "sous": [ { "i": "hbi", "n": "Sizu Pholoy", "sou": "PhysioN", "ul": "hps://physion.o/fils/hbi/1.0.0", "subjs": 24, "hnnls": 23, "splin": 256, "sipion": "Sizu & pilpsy inosis", "pp": "hps://oi.o/10.1109/IBS.2005.1617480", } ], }, } f ini(slf): slf.sls = Non slf.shsuls = [] f isplynu(slf): """isply in nu""" pin("\n" + "=" * 80) pin(" L.I.F.. Iniv   Insion ool") pin("=" * 80) pin("\n Sl  s yp:\n") ois = lis(slf.SLO.ys()) fo i, oy in nu(ois, 1): info = slf.SLO[oy] pin(f" {i}. {info['n']}") pin(f" {ln(ois) + 1}. Sh by ywo") pin(f" {ln(ois) + 2}. Lis ll ss") pin(f" {ln(ois) + 3}. xi") un ois f shbyywo(slf, ywo: s) -> Lis[i]: """Sh ss by ywo""" ywolow = ywo.low() suls = [] fo oy, oy in slf.SLO.is(): fo sou in oy["sous"]: if ( ywolow in sou["n"].low() o ywolow in sou["sipion"].low() o ywolow in oy.low() ): suls.ppn(sou) un suls f isplysils(slf, s: i): """isply il infoion bou  s""" pin("\n" + "=" * 80) pin(f" s: {s['n']}") pin("=" * 80) pin(f"Sou: {s['sou']}") pin(f"Subjs: {s['subjs']}") pin(f"hnnls: {s['hnnls']}") pin(f"Splin : {s['splin']} Hz") pin(f"sipion: {s['sipion']}") pin(f"Pp: {s['pp']}") pin(f"UL: {s['ul']}") pin("=" * 80) f isplyllss(slf): """Lis ll vilbl ss""" pin("\n" + "=" * 80) pin(" ll vilbl  ss") pin("=" * 80) ix = 1 fo oy, oy in slf.SLO.is(): pin(f"\n{oy.upp().pl('', ' ')}:") fo sou in oy["sous"]: pin(f" {ix}. {sou['n']}") pin(f" Sou: {sou['sou']}") pin(f" Subjs: {sou['subjs']}") pin(f" Splin: {sou['splin']} Hz") ix += 1 lss liownlo: """ownlo ss in l-i fo PhysioN/OpnNuo""" f ini(slf): slf.hi = "physionh" os.is(slf.hi, xiso=u) syn f ownlos( slf, si: s, subji: in = 1, sssion: in = 1 ) -> Opionl[bys]: """ownlo s in l-i""" pin(f"\n ownloin {si}...") pin(f" Subj: {subji}") pin(f" Sssion: {sssion}") y: if si == "biiv2": un wi slf.ownlobiiv2(subji, sssion) lif si == "slpf": un wi slf.ownloslpf(subji) lif si == "hbi": un wi slf.ownlohbi(subji) lif si == "uhbnol": un wi slf.ownlouhbnol(subji) ls: pin(f" s {si} ownlo no y onfiu") un Non xp xpion s : lo.o(f"ownlo o: {}") pin(f" ownlo fil: {}") un Non syn f ownlobiiv2(slf, subj: in, sssion: in) -> Opionl[bys]: """ownlo BI IV-2 wih poss""" ul = ( f"hps://physion.o/fils/ib/1.0.0/S{subj:03}/" f"S{subj:03}{sssion:02}.f" ) y: pin(f" onnin o PhysioN...") spons = quss.(ul, iou=60, s=u) spons.isfosus() olsiz = in(spons.hs.("onn-lnh", 0)) ownlo = 0 pin(f" Fil siz: {olsiz / (1024 * 1024):.2f} B") pin(f" ownloin...") onn = b"" fo hun in spons.ionn(hunsiz=8192): if hun: onn += hun ownlo += ln(hun) if olsiz: poss = (ownlo / olsiz) * 100 pin( f" Poss: {poss:.1f}% " f"({ownlo / (1024 * 1024):.2f}/{olsiz / (1024 * 1024):.2f} B)", n="\", ) pin( f"\n ownlo {ln(onn) / (1024 * 1024):.2f} B " f"({ln(onn)} bys)" ) un onn xp quss.qusxpion s : lo.o(f"BI IV-2 ownlo fil: {}") pin(f" Fil: {}") un Non syn f ownloslpf(slf, subj: in) -> Opionl[bys]: """ownlo Slp-F""" ul = ( f"hps://physion.o/fils/slp-fx/1.0.0/slp-ss/" f"S4{subj:03}0-PS.f" ) y: pin(f" onnin o PhysioN...") spons = quss.(ul, iou=60) spons.isfosus() pin(f" ownlo {ln(spons.onn) / (1024 * 1024):.2f} B") un spons.onn xp quss.qusxpion s : pin(f" Fil: {}") un Non syn f ownlohbi(slf, subj: in) -> Opionl[bys]: """ownlo HB-I sizu """ ul = f"hps://physion.o/fils/hbi/1.0.0/hb{subj:02}/hb{subj:02}01.f" y: pin(f" onnin o PhysioN...") spons = quss.(ul, iou=60) spons.isfosus() pin(f" ownlo {ln(spons.onn) / (1024 * 1024):.2f} B") un spons.onn xp quss.qusxpion s : pin(f" Fil: {}") un Non syn f ownlouhbnol(slf, subj: in) -> Opionl[bys]: """ownlo UH bnol """ ul = ( f"hps://physion.o/fils/uhbnol/1.0.0/" f"v/bnol/01pl/000/{subj:06}.f" ) y: pin(f" onnin o PhysioN...") spons = quss.(ul, iou=60) spons.isfosus() pin(f" ownlo {ln(spons.onn) / (1024 * 1024):.2f} B") un spons.onn xp quss.qusxpion s : pin(f" Fil: {}") un Non lss zuUplo: """Uplo poss  o zu Blob So""" f ini(slf): slf.oninn = "-" syn f uploozu(slf, filph: s, sinfo: i) -> bool: """Uplo   o zu Blob So""" y: fo zu.iniy ipo fulzunil fo zu.so.blob ipo Bloblin pin(f"\n Ppin zu uplo...") pin(f" onin: {slf.oninn}") pin(f" s: {sinfo['n']}") nil = fulzunil() #  so oun fo nvionn o onfi sooun = os.nv("ZUSOOUN", "slifplfopo") blobn = f"{sinfo['sou']}/{sinfo['n']}/S{sinfo.('subji', 1):03}.f" blobul = ( f"hps://{sooun}.blob.o.winows.n/" f"{slf.oninn}/{blobn}" ) pin(f" Uploin o zu...") pin(f" UL: {blobul}") wih opn(filph, "b") s : bloblin = Bloblin(blobul, nil=nil) bloblin.uploblob(, ovwi=u) pin(f" Sussfully uplo o zu!") un u xp Ipoo: pin(" ️ zu S no insll. Insll wih:") pin(" pip insll zu-so-blob zu-iniy") un Fls xp xpion s : lo.o(f"zu uplo fil: {}") pin(f" Uplo fil: {}") un Fls lss InivInso: """in iniv insion ool""" f ini(slf): slf.sh = sSh() slf.ownlo = liownlo() slf.uplo = zuUplo() syn f un(slf): """in iniv loop""" whil u: ois = slf.sh.isplynu() y: hoi = inpu("\n n you hoi: ").sip() if no hoi.isii(): pin(" Invli inpu. Pls n  nub.") oninu hoinu = in(hoi) # xi if hoinu == ln(ois) + 3: pin("\n ooby!") b # Lis ll lif hoinu == ln(ois) + 2: slf.sh.isplyllss() oninu # Sh by ywo lif hoinu == ln(ois) + 1: ywo = inpu("\n n sh ywo: ").sip() suls = slf.sh.shbyywo(ywo) if suls: pin(f"\n Foun {ln(suls)} s(s):") fo i, sul in nu(suls, 1): pin(f" {i}. {sul['n']} ({sul['sou']})") ix = inpu( "\n Sl s (o pss n o sip): " ).sip() if ix.isii() n 1 <= in(ix) <= ln(suls): s = suls[in(ix) - 1] wi slf.ownlonposs(s) ls: pin(f" No ss foun fo '{ywo}'") # oy slion lif 1 <= hoinu <= ln(ois): oy = ois[hoinu - 1] oy = slf.sh.SLO[oy] pin(f"\n {oy['n']} - vilbl Sous:") fo i, sou in nu(oy["sous"], 1): pin( f" {i}. {sou['n']} ({sou['subjs']} subjs, " f"{sou['hnnls']} hnnls, {sou['splin']} Hz)" ) shoi = inpu("\n Sl sou: ").sip() if shoi.isii() n 1 <= in(shoi) <= ln( oy["sous"] ): s = oy["sous"][in(shoi) - 1] wi slf.ownlonposs(s) ls: pin(" Invli hoi. Pls y in.") xp yboInup: pin("\n\n Inup by us.") b xp xpion s : lo.o(f"o: {}") pin(f" o: {}") syn f ownlonposs(slf, s: i): """ownlo n poss sl s""" slf.sh.isplysils(s) #  subj n sssion y: subji = in( inpu(f"\n n subj I (1-{s['subjs']}): ").sip() ) sssioni = 1 if s["i"] in ["biiv2"]: sssioni = in(inpu(" n sssion I (1-2): ").sip()) xp Vluo: pin(" Invli inpu") un # ownlo pin(f"\n Sin ownlo...")  = wi slf.ownlo.ownlos( s["i"], subji=subji, sssion=sssioni ) if no : un # Sv lolly lolfil = os.ph.join( slf.ownlo.hi, f"{s['i']}S{subji:03}sssion{sssioni}.f", ) wih opn(lolfil, "wb") s f: f.wi() pin(f" Sv lolly: {lolfil}") # Uplo o zu uplohoi = ( inpu("\n Uplo o zu Blob So? (y/n): ").sip().low() ) if uplohoi == "y": sinfo = { "n": s["n"], "sou": s["sou"], "subji": subji, "sssion": sssioni, } wi slf.uplo.uploozu(lolfil, sinfo) # Poss wih L.I.F.. posshoi = ( inpu("\n Poss wih L.I.F.. loih? (y/n): ").sip().low() ) if posshoi == "y": wi slf.posswihlif(lolfil, s) syn f posswihlif(slf, filph: s, s: i): """Poss ownlo  wih L.I.F.. loih""" pin(f"\n Possin wih L.I.F.. loih...") y: fo physionins ipo PhysioNInso inso = PhysioNInso() y,  = inso.psffil(filph) if y is no Non: suls = inso.posssinl(y[0]) pin(f"\n Possin opl!") pin(f"\n Quliy ssssn:") quliy = suls["quliy"] pin(f" So: {quliy['so']:.1f}/100") pin(f" in: {quliy['in']}") pin(f" SN: {quliy['snb']:.2f} B") pin(f"\n Fquny nlysis:") fo bn in ["l", "h", "lph", "b", ""]: y = f"{bn}powpn" if y in suls["fquny"]: pin(f" {bn.upp()}: {suls['fquny'][y]:.2f}%") xp Ipoo: pin(" ️ physionins oul no vilbl") xp xpion s : pin(f" Possin o: {}") syn f in(): """in ny poin""" pin("\n" + "=" * 80) pin(" L.I.F.. Iniv   Insion ool") pin("=" * 80) pin("\nhis ool nbls you o:") pin(" Sh fo  ss by yp") pin(" ownlo in l-i fo PhysioN/OpnSin") pin(" Uplo o zu Blob So") pin(" Poss wih L.I.F.. loih") pin("=" * 80) inso = InivInso() wi inso.un() if n == "in": synio.un(in())