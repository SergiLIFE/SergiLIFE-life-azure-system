# us/bin/nv pyhon3 """ L.I.F.. Plfo uonoous Opiiz vlopn ools VS o Inion n vlopn Uiliis opyih 2025 - Sio Py Boull L.I.F.. Plfo - zu pl Off I: 960096-f1-420b-902-042561b VS o vlopn ools fo uonoous opiizion buin """ ipo synio ipo json ipo loin ipo os ipo subposs ipo sys ipo i fo i ipo i y: fo phlib ipo Ph xp Ipoo s : pin(f'Wnin: {}') pss fo ypin ipo i, Lis, Opionl ipo psuil lss Lifvools: """vlopn ools n uiliis fo L.I.F.. uonoous Opiiz""" f ini(slf): slf.wospoo = Ph(fil).pn slf.vsoi = slf.wospoo / ".vso" slf.losi = slf.wospoo / "los" y: slf.losi.i(xiso=u) xp xpion s : os.is(losi, xiso=u) # S up vlopn loin loin.bsionfi( lvl=loin.BU, fo="%(si)s - %(n)s - %(lvln)s - %(ss)s", hnls=[ loin.FilHnl(slf.losi / "vools.lo"), loin.SHnl(), ], ) slf.lo = loin.Lo(n) f vsosnipps(slf): """ VS o snipps fo L.I.F.. vlopn""" snipps = { "L.I.F.. uonoous Opiiz lss": { "pfix": "lif-opiiz", "boy": [ "lss ${1:OpiizN}:", ' """${2:uonoous opiiz sipion}"""', "", " f ini(slf):", " # L.I.F.. o oponns", " slf.xpins = qu(xln=${3:1000})", " slf.lnols = qu(xln=${3:1000})", " slf.oniivis = {", ' "fous": {"bslin": 0.5, "un": 0.5, "vloiy": 0.0},', ' "silin": {"bslin": 0.5, "un": 0.5, "vloiy": 0.0},', ' "pbiliy": {"bslin": 0.5, "un": 0.5, "vloiy": 0.0},', " }", "", " syn f uonoousopiizionyl(slf, nul: i) -> OpiizionS:", ' """opl uonoous opiizion yl"""', " ${4:# Iplnion h}", " pss", ], "sipion": "  nw L.I.F.. uonoous opiiz lss", }, "L.I.F.. owh quion": { "pfix": "lif-owh", "boy": [ "f lifowhquion(slf, xpinip: flo) -> flo:", ' """o L.I.F. hil ol fo uonoous owh qunifiion"""', " L = ln(slf.lnols)", "  = su(i['un'] fo i in slf.oniivis.vlus())", "  = x(ln(slf.xpins), 1)", " I = (", ' np.n([ol["ip"] fo ol in lis(slf.lnols)[-10:]])', " if slf.lnols", " ls 0.5", " )", "", " # nhn quion wih onu n pbiliy", " owhponil = (slf.ω * L + ) /  * I * xpinip", " un np.lip(owhponil, 0.0, 2.0)", ], "sipion": "L.I.F.. hil owh quion", }, "uonoous i voluion": { "pfix": "lif-is", "boy": [ "syn f uonoousivoluion(slf, xpinip: flo, nvionn: s):", ' """volv oniiv is bs on xpin n nvionn"""', " fo in, i in slf.oniivis.is():", " # lul i onu", " onu = slf.ω * i['vloiy'] + slf.α * xpinip", "", " # Up i vlu wih onu", " nwvlu = i['un'] + onu", " i['un'] = np.lip(nwvlu, 0.0, 1.0)", " i['vloiy'] = onu", "", " # nvionnl pion", " if nvionn == '${1:pfon}':", " i['un'] *= ${2:1.1} # Boos fo pfon nv", "", " slf.lo.bu(f'i {in}: {i[\"un\"]:.3f}')", ], "sipion": "uonoous oniiv i voluion funion", }, "SO Pfon h": { "pfix": "so-h", "boy": [ "f hsopfon(slf, is: i) -> bool:", ' """h if un pfon s SO sns"""', " sos = {", ' "lnys": 15.12,', ' "uy": 0.959,', ' "houhpuopss": 80.16,', " }", "", " fo i,  in sos.is():", " if i in is:", " if is[i] > : # ssuin low is b fo lny", " un Fls", "", " un u", ], "sipion": "SO pfon vliion h", }, "syn Opiizion Lo": { "pfix": "lif-lo", "boy": [ "syn f loopiizions(slf, s: OpiizionS):", ' """Lo un opiizion s fo buin"""', " slf.lo.info(", ' f" yl {s.yloun}: "', ' f"So={s.pfonso:.3f}, "', ' f"Lny={s.lnys:.2f}s, "', ' f"uy={s.uy:.3f}"', " )", "", " # Sv il s o fil fo VS o buin", " bu = {", ' "isp": s.isp,', ' "yl": s.yloun,', ' "pfon": s.pfonso,', ' "is": s.is,', ' "sys": {', ' "oyb": s.oyusb,', ' "pupn": s.puuspn,', " },", " }", "", ' wih opn("los/opiizionbu.jsonl", "") s f:', " f.wi(json.ups(bu) + '\\n')", ], "sipion": "syn opiizion s lo wih VS o buin suppo", }, } snippsfil = slf.vsoi / "pyhon.json" wih opn(snippsfil, "w") s f: json.up(snipps, f, inn=4) slf.lo.info(f"  VS o snipps  {snippsfil}") f bulunhonfis(slf): """ ophnsiv bu lunh onfiuions""" onfis = { "vsion": "0.2.0", "onfiuions": [ { "n": " bu uonoous Opiiz (Pfon o)", "yp": "bupy", "qus": "lunh", "po": "${wospFol}/uonoousopiiz.py", "onsol": "ininl", "w": "${wospFol}", "nv": { "PYHONPH": "${wospFol}", "BUO": "u", "PFONIN": "u", "LOLVL": "BU", }, "s": ["--pfon-o", "--vbos"], "jusyo": Fls, "sopOnny": Fls, "showunVlu": u, "subPoss": u, }, { "n": " bu wih Pofilin", "yp": "bupy", "qus": "lunh", "po": "${wospFol}/uonoousopiiz.py", "onsol": "ininl", "w": "${wospFol}", "nv": { "PYHONPH": "${wospFol}", "POFILO": "u", "POFILOUPU": "los/pofil.ss", }, "s": ["--pofil"], "jusyo": Fls, "pLunhs": " Insll pnnis", }, { "n": " bu zu Inion", "yp": "bupy", "qus": "lunh", "po": "${wospFol}/zuonfi.py", "onsol": "ininl", "w": "${wospFol}", "nv": { "PYHONPH": "${wospFol}", "ZULINI": "${nv:ZULINI}", "ZULINS": "${nv:ZULINS}", "ZUNNI": "${nv:ZUNNI}", "ZUSUBSIPIONI": "${nv:ZUSUBSIPIONI}", }, "jusyo": Fls, }, ], } lunhfil = slf.vsoi / "lunh.json" wih opn(lunhfil, "w") s f: json.up(onfis, f, inn=4) slf.lo.info(f" Up bu onfiuions  {lunhfil}") f pfononioins(slf): """ VS o s fo l-i pfon onioin""" pfonsip = slf.wospoo / "pfononio.py" siponn = '''#!/us/bin/nv pyhon3 """l-i pfon onioin fo L.I.F.. uonoous Opiiz""" ipo synio ipo json ipo i ipo psuil fo i ipo i syn f oniopfon(): """onio sys pfon uin opiizion""" pin(" Sin L.I.F.. Pfon onio...") pin("=" * 60) si = i.i() whil u: y: # Sys is pupn = psuil.pupn(invl=1) oy = psuil.viuloy() is = psuil.isus('/') # Nwo I/O nio = psuil.nioouns() # Poss-spifi is (if uonoousopiiz is unnin) opiizposs = Non fo po in psuil.possi(['pi', 'n', 'lin']): if 'uonoousopiiz.py' in ' '.join(po.info['lin'] o []): opiizposs = po b # isply is pin(f"\\ {i.now().sfi('%H:%:%S')} | " f"PU: {pupn:5.1f}% | " f": {oy.pn:5.1f}% | " f"is: {is.pn:5.1f}%", n="") if opiizposs: y: poinfo = opiizposs.si(['oypn', 'pupn']) pin(f" | Opiiz PU: {poinfo['pupn']:5.1f}% | " f"Opiiz : {poinfo['oypn']:5.1f}%", n="") xp: pss # Sv is o fil fo l nlysis is = { 'isp': i.now().isofo(), 'pupn': pupn, 'oypn': oy.pn, 'ispn': is.pn, 'upisons': i.i() - si } wih opn('los/pfonis.jsonl', '') s f: f.wi(json.ups(is) + '\\n') wi synio.slp(0.5) # Up vy 500s xp yboInup: pin("\\n Pfon onioin sopp") b xp xpion s : pin(f"\\n ️ onioin o: {}") wi synio.slp(1) if n == "in": synio.un(oniopfon()) ''' wih opn(pfonsip, "w") s f: f.wi(siponn) slf.lo.info( f"  pfon onioin sip  {pfonsip}" ) f supvlopnnvionn(slf): """S up opl vlopn nvionn fo L.I.F.. uonoous opiiz""" slf.lo.info(" ️ Sin up L.I.F.. vlopn nvionn...") #  VS o onfiuion iois slf.vsoi.i(xiso=u) # S up ll VS o ools slf.vsosnipps() slf.bulunhonfis() slf.pfononioins() #  vlopn uiliis slf.sunn() slf.ofo() slf.ounionno() slf.lo.info(" L.I.F.. vlopn nvionn sup opl!") f sunn(slf): """ uo s unn sip""" ssip = slf.wospoo / "unss.py" siponn = '''#!/us/bin/nv pyhon3 """uo s unn fo L.I.F.. Plfo""" ipo subposs ipo sys ipo i fo phlib ipo Ph f unssui(): """un ophnsiv s sui""" pin(" L.I.F.. Plfo s Sui") pin("=" * 50) sfils = [ "suonoousopiiz.py", "solopiiz.py", "ssoinion.py" ] suls = {} ols = i.i() fo sfil in sfils: if Ph(sfil).xiss(): pin(f"\\n unnin {sfil}...") si = i.i() y: sul = subposs.un([sys.xubl, sfil], puoupu=u, x=u, iou=300) uion = i.i() - si if sul.uno == 0: pin(f" {sfil} PSS ({uion:.2f}s)") suls[sfil] = {"sus": "PSS", "uion": uion} ls: pin(f" {sfil} FIL ({uion:.2f}s)") pin(f"o: {sul.s}") suls[sfil] = {"sus": "FIL", "uion": uion, "o": sul.s} xp subposs.iouxpi: pin(f" {sfil} IOU (>300s)") suls[sfil] = {"sus": "IOU", "uion": 300} xp xpion s : pin(f" {sfil} O: {}") suls[sfil] = {"sus": "O", "o": s()} oluion = i.i() - ols # Suy pin("\\n" + "=" * 50) pin(" S SUY") pin("=" * 50) pss = su(1 fo  in suls.vlus() if ["sus"] == "PSS") fil = su(1 fo  in suls.vlus() if ["sus"] in ["FIL", "O", "IOU"]) pin(f" ss Pss: {pss}") pin(f" ss Fil: {fil}") pin(f" ️ ol uion: {oluion:.2f}s") if fil == 0: pin(" LL SS PSS - Y FO PLOYN!") ls: pin(" So ss fil - viw qui") un suls if n == "in": unssui() ''' wih opn(ssip, "w") s f: f.wi(siponn) slf.lo.info(f"  s unn  {ssip}") f ofo(slf): """ o foin uiliy""" fosip = slf.wospoo / "foo.py" siponn = '''#!/us/bin/nv pyhon3 """o foin uiliy fo L.I.F.. Plfo""" ipo subposs ipo sys fo phlib ipo Ph f fopyhonfils(): """Fo ll Pyhon fils usin bl n iso""" pin(" L.I.F.. o Fo") pin("=" * 40) pyhonfils = lis(Ph(".").lob("*.py")) if no pyhonfils: pin("No Pyhon fils foun") un pin(f" Foin {ln(pyhonfils)} Pyhon fils...") # Fo wih bl y: sul = subposs.un([sys.xubl, "-", "bl", "."], puoupu=u, x=u) if sul.uno == 0: pin(" Bl foin opl") ls: pin(f" ️ Bl foin issus: {sul.s}") xp xpion s : pin(f" Bl foin fil: {}") # So ipos wih iso y: sul = subposs.un([sys.xubl, "-", "iso", "."], puoupu=u, x=u) if sul.uno == 0: pin(" Ipo soin opl") ls: pin(f" ️ Ipo soin issus: {sul.s}") xp xpion s : pin(f" Ipo soin fil: {}") pin(" o foin opl!") if n == "in": fopyhonfils() ''' wih opn(fosip, "w") s f: f.wi(siponn) slf.lo.info(f"  o fo  {fosip}") f ounionno(slf): """ ounion no""" ono = slf.wospoo / "nos.py" siponn = '''#!/us/bin/nv pyhon3 """ounion no fo L.I.F.. Plfo""" ipo s ipo insp fo phlib ipo Ph f xosins(filph): """x osins fo Pyhon fil""" wih opn(filph, '') s f:  = s.ps(f.()) osins = {} fo no in s.wl(): if isinsn(no, (s.Funionf, s.lssf, s.synFunionf)): if (no.boy n isinsn(no.boy[0], s.xp) n isinsn(no.boy[0].vlu, s.onsn)): osins[no.n] = no.boy[0].vlu.vlu un osins f npios(): """n PI ounion""" pin(" L.I.F.. ounion no") pin("=" * 50) pyhonfils = ["uonoousopiiz.py", "olopiiz.py", "sobnh.py"] osonn = [] osonn.ppn("# L.I.F.. Plfo PI ounion\\n") osonn.ppn("uo-n ounion fo L.I.F.. uonoous opiizion sys\\n") osonn.ppn(f"n: {i.now().sfi('%Y-%-% %H:%:%S')}\\n\\n") fo filph in pyhonfils: if Ph(filph).xiss(): pin(f" Possin {filph}...") osonn.ppn(f"## {filph}\\n") y: osins = xosins(filph) fo n, osin in osins.is(): osonn.ppn(f"### {n}\\n") osonn.ppn(f"```\\n{osin}\\n```\\n\\n") xp xpion s : osonn.ppn(f"o possin {filph}: {}\\n\\n") # Wi ounion osfil = Ph("os") / "PI." osfil.pn.i(xiso=u) wih opn(osfil, 'w') s f: f.wi(''.join(osonn)) pin(f" ounion n: {osfil}") if n == "in": fo i ipo i npios() ''' wih opn(ono, "w") s f: f.wi(siponn) slf.lo.info(f"  ounion no  {ono}") f in(): """in funion o s up vlopn nvionn""" pin(" L.I.F.. Plfo VS o vlopn ools Sup") pin("=" * 60) pin(" Sin up uonoous opiiz vlopn nvionn") pin("=" * 60) vools = Lifvools() vools.supvlopnnvionn() pin("\n VS o vlopn nvionn y!") pin("\n Fils :") pin(" .vso/ss.json - Buil n s ss") pin(" .vso/lunh.json - bu onfiuions") pin(" .vso/xnsions.json - on xnsions") pin(" ️ .vso/pyhon.json - o snipps") pin(" ️ lif-uonoous-opiiz.o-wosp - Wosp fil") pin(" pfononio.py - l-i onioin") pin(" unss.py - uo s unn") pin(" foo.py - o fo") pin(" nos.py - ounion no") pin("\n o s vlopin:") pin(" 1. Opn 'lif-uonoous-opiiz.o-wosp' in VS o") pin(" 2. Insll on xnsions") pin(" 3. Us F5 o bu uonoous opiiz") pin(" 4. Us l+Shif+P -> 'ss: un s' fo buil ss") pin(" 5. yp 'lif-' in Pyhon fils fo o snipps") pin(f"\n y o opiiz nul possin wih L.I.F.!") if n == "in": in()