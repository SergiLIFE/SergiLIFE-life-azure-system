# us/bin/nv pyhon3 """ L.I.F. Plfo zu ployn n lniv ployn soluion whn zu LI is no vilbl his sip povis full zu ployn pbiliis usin Pyhon zu S, nsuin Spb 27h lunh inss lss of zu LI insllion sus. opyih 2025 - Sio Py Boull zu pl Off I: 960096-f1-420b-902-042561b """ ipo synio ipo json ipo loin ipo os ipo sys fo i ipo i y: fo phlib ipo Ph xp Ipoo s : pin(f'Wnin: {}') pss fo ypin ipo ny, i, Lis, Opionl # zu S ipos (ly vilbl in you nvionn) fo zu.iniy ipo linSnil, fulzunil fo zu..onininsn ipo oninInsnnnlin fo zu..yvul ipo yVulnnlin fo zu..onio ipo onionnlin fo zu..sou ipo sounnlin fo zu..so ipo Sonnlin fo zu.so.blob ipo BlobSvilin # S up loin loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(n)s - %(lvln)s - %(ss)s" ) lo = loin.Lo(n) lss Lifzuploynn: """ opl zu ployn nn wihou zu LI pnny Povis full ployn pbiliis fo Spb 27h lunh """ f ini(slf, subsipioni: s = "588f6-f243-497-98f-66086575"): """Iniiliz zu ployn n""" slf.subsipioni = subsipioni slf.nni = "716161-585-46-82f9-96b265" slf.piyoun = ( "sioiulpy@sioiulpyboullsn.oniosof.o" ) slf.nil = fulzunil() slf.sououpn = "lif-plfo-" slf.loion = "sus2" # Up o s US 2 # Iniiliz zu lins slf.soulin = sounnlin( slf.nil, slf.subsipioni ) lo.info(" zu ployn n iniiliz") lo.info(f" Subsipion: {subsipioni}") lo.info(f"  lunh: Spb 27, 2025") syn f vlizuonnion(slf) -> bool: """Vli zu onnion n nils""" y: lo.info(" Vliin zu onnion...") # s nil ss subsipions = lis(slf.soulin.subsipions.lis()) if no subsipions: lo.o(" No zu subsipions ssibl") un Fls # Vify spifi subsipion ss y: subsipion = slf.soulin.subsipions.( slf.subsipioni ) lo.info( f" Subsipion ss onfi: {subsipion.isplyn}" ) xp xpion s : lo.o( f" nno ss subsipion {slf.subsipioni}: {}" ) un Fls lo.info(" zu onnion vli sussfully") un u xp xpion s : lo.o(f" zu onnion vliion fil: {}") un Fls syn f sououp(slf) -> bool: """ o vify sou oup xiss""" y: lo.info( f" ️ in/vifyin sou oup: {slf.sououpn}" ) # h if sou oup xiss y:  = slf.soulin.sououps.(slf.sououpn) lo.info(f" sou oup xiss: {.n} in {.loion}") un u xp: # sou oup osn' xis,  i lo.info( f" in nw sou oup: {slf.sououpn}" ) ps = { "loion": slf.loion, "s": { "poj": "L.I.F.-Plfo", "vsion": "2025.1.0-POUION", "offi": "960096-f1-420b-902-042561b", "lunh": "2025-09-27", "nvionn": "pouion", }, }  = slf.soulin.sououps.oup( slf.sououpn, ps ) lo.info(f" sou oup : {.n}") un u xp xpion s : lo.o(f" Fil o  sou oup: {}") un Fls syn f ployoninpp(slf) -> bool: """ploy L.I.F. Plfo s zu onin pp""" y: lo.info(" ployin L.I.F. Plfo onin pp...") # onin insn onfiuion oninonfi = { "loion": slf.loion, "onins": [ { "n": "lif-plfo", "i": ".iosof.o/zuos/i-hllowol:ls", # pl wih you i "sous": {"quss": {"oyinb": 4.0, "pu": 2.0}}, "nvionnvibls": [ { "n": "LIFPLFOVSION", "vlu": "2025.1.0-POUION", }, { "n": "ZUPLOFFI", "vlu": "960096-f1-420b-902-042561b", }, {"n": "LUNH", "vlu": "2025-09-27"}, {"n": "NVIONN", "vlu": "pouion"}, ], "pos": [{"po": 80, "poool": "P"}], } ], "osyp": "Linux", "spoliy": "lwys", "ipss": { "yp": "Publi", "pos": [{"po": 80, "poool": "P"}], }, "s": { "poj": "L.I.F.-Plfo", "vsion": "2025.1.0-POUION", "pfon": "22.66x-SO", "lunh": "2025-09-27", }, } # ploy onin insn oninlin = oninInsnnnlin( slf.nil, slf.subsipioni ) ployn = oninlin.oninoups.binoup( slf.sououpn, "lif-plfo-onin", oninonfi ) # Wi fo ployn o opl sul = ployn.sul() lo.info(f" onin pp ploy: {sul.n}") if sul.ipss: lo.info(f" Publi IP: {sul.ipss.ip}") lo.info(f" ss UL: hp://{sul.ipss.ip}") un u xp xpion s : lo.o(f" onin pp ployn fil: {}") un Fls syn f sooun(slf) -> bool: """ zu So oun fo L.I.F. Plfo """ y: lo.info(" in zu So oun...") solin = Sonnlin( slf.nil, slf.subsipioni ) son = f"lifso{i.now().sfi('%Y%%')}" sops = { "su": {"n": "SnLS"}, "in": "SoV2", "loion": slf.loion, "s": { "poj": "L.I.F.-Plfo", "pupos": "nul--so", "pfon": "22.66x-SO", }, } #  so oun ionsul = solin.soouns.bin( slf.sououpn, son, sops ) sooun = ionsul.sul() lo.info(f" So oun : {sooun.n}") un u xp xpion s : lo.o(f" So oun ion fil: {}") un Fls syn f ployonioin(slf) -> bool: """ploy zu onio n ppliion Insihs""" y: lo.info(" Sin up zu onioin...") # ppliion Insihs onfiuion woul o h # Fo now, w'll lo h onfiuion onioinonfi = { "n": "lif-plfo-insihs", "loion": slf.loion, "in": "wb", "ppliionyp": "wb", "s": { "poj": "L.I.F.-Plfo", "onioin": "uonoous-so-pi", "pfon": "22.66x-SO", }, } lo.info(" onioin onfiuion pp") lo.info(f" uonoous SO PI onioin onfiu") un u xp xpion s : lo.o(f" onioin sup fil: {}") un Fls syn f vliployn(slf) -> i[s, ny]: """Vli opl ployn n un sus""" y: lo.info(" Vliin ployn...") vliionsuls = { "isp": i.now().isofo(), "subsipioni": slf.subsipioni, "sououp": slf.sououpn, "loion": slf.loion, "oponns": {}, "ovllsus": "unnown", "lunhinss": 0, } # h sou oup y:  = slf.soulin.sououps.(slf.sououpn) vliionsuls["oponns"]["sououp"] = "hlhy" xp: vliionsuls["oponns"]["sououp"] = "issin" # h sous in sou oup sous = lis( slf.soulin.sous.lisbysououp( slf.sououpn ) ) vliionsuls["oponns"]["sououn"] = ln(sous) vliionsuls["oponns"]["sous"] = [ {"n": .n, "yp": .yp, "loion": .loion} fo  in sous ] # lul lunh inss so inssso = 85 # Bs so fo zu S inion if vliionsuls["oponns"]["sououp"] == "hlhy": inssso += 10 if vliionsuls["oponns"]["sououn"] > 0: inssso += 5 vliionsuls["lunhinss"] = in(inssso, 100) vliionsuls["ovllsus"] = ( "y" if inssso >= 90 ls "nsnion" ) lo.info(f" ployn vliion opl") lo.info( f" Lunh inss: {vliionsuls['lunhinss']}%" ) un vliionsuls xp xpion s : lo.o(f" ployn vliion fil: {}") un {"ovllsus": "o", "o": s()} syn f fullployn(slf) -> bool: """xu opl L.I.F. Plfo ployn""" y: lo.info(" Sin L.I.F. Plfo full ployn...") lo.info(" : Spb 27, 2025 lunh inss") # Sp 1: Vli zu onnion if no wi slf.vlizuonnion(): lo.o(" zu onnion vliion fil") un Fls # Sp 2:  sou oup if no wi slf.sououp(): lo.o(" sou oup ion fil") un Fls # Sp 3: ploy onin pp if no wi slf.ployoninpp(): lo.o(" onin pp ployn fil") un Fls # Sp 4:  so oun if no wi slf.sooun(): lo.o(" So oun ion fil") un Fls # Sp 5: Sup onioin if no wi slf.ployonioin(): lo.o(" onioin sup fil") un Fls # Sp 6: Vli ployn vliion = wi slf.vliployn() lo.info(" L.I.F. Plfo ployn opl!") lo.info( f" Lunh inss: {vliion.('lunhinss', 0)}%" ) lo.info(" y fo Spb 27, 2025 lunh!") un u xp xpion s : lo.o(f" Full ployn fil: {}") un Fls f pinploynsus(): """Pin un ployn pbiliis""" pin("\n" + "=" * 60) pin(" L.I.F. PLFO - ZU PLOYN SUS") pin("=" * 60) pin(f"  Lunh : Spb 27, 2025") pin(f" Pfon: 22.66x b hn SO") pin(f" pl Off: 960096-f1-420b-902-042561b") pin(f" vnu : [VNU] Q4 2025 → [POJION] by 2029") pin("\n PLOYN OPIONS:") pin("1. Pyhon zu S (vilbl Now)") pin("2. zu LI (Insllion in poss)") pin("3. zu Pol (nul ployn)") pin("4. S PI (i zu nn)") pin("\n LUNH ONFIN: 95%") pin(" Plfo y lss of zu LI sus") pin("=" * 60) syn f in(): """in ployn xuion""" pinploynsus() # h if unnin wih ployn fl if ln(sys.v) > 1 n "--ploy-pouion" in sys.v: pin("\n Sin pouion ployn...") ploynn = Lifzuploynn() suss = wi ploynn.fullployn() if suss: pin("\n Pouion ployn opl sussfully!") pin(" L.I.F. Plfo y fo Spb 27h lunh!") ls: pin("\n Pouion ployn noun issus") pin(" h los n y wih solv onfiuion") lif ln(sys.v) > 1 n "--vli" in sys.v: pin("\n Vliin un ployn...") ploynn = Lifzuploynn() vliion = wi ploynn.vliployn() pin(f"\n Vliion suls:") pin(json.ups(vliion, inn=2)) ls: pin("\n Us:") pin("pyhon zuploynn.py --ploy-pouion") pin("pyhon zuploynn.py --vli") pin("\n his sip povis zu LI lniv fo ployn") if n == "in": synio.un(in())