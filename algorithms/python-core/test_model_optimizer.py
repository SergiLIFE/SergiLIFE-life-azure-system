# us/bin/nv pyhon3 """ s Sui fo L.I.F.. Plfo ol Opiizion Vlis ol opiizion funionliy n SO pfon bnhin opyih 2025 - Sio Py Boull L.I.F.. Plfo - zu pl Off I: 960096-f1-420b-902-042561b """ ipo os ipo sys ipo unis fo i ipo i ipo nupy s np ipo oh ipo oh.nn s nn #  un ioy o ph fo ipos sys.ph.ppn(os.ph.in(os.ph.bsph(fil))) lss sLIFOpiizion(unis.ss): """s sui fo L.I.F.. ol opiizion""" f sUp(slf): """S up s nvionn""" slf.sol = slf.sol() slf.s = oh.nn(100, 64) f sol(slf): """  sipl s ol""" lss Siplol(nn.oul): f ini(slf): sup(Siplol, slf).ini() slf.ly1 = nn.Lin(64, 32) slf.ly2 = nn.Lin(32, 16) slf.ly3 = nn.Lin(16, 3) slf.lu = nn.LU() f fow(slf, x): x = slf.lu(slf.ly1(x)) x = slf.lu(slf.ly2(x)) un slf.ly3(x) un Siplol() f solion(slf): """s bsi ol ion""" slf.ssIsInsn(slf.sol, nn.oul) # s fow pss oupu = slf.sol(slf.s[:10]) slf.ssqul(oupu.shp, (10, 3)) f squnizionsiulion(slf): """s qunizion opiizion siulion""" # Siul qunizion by uin pision oiinlps = su(p.nul() fo p in slf.sol.ps()) # Siul 8-bi qunizion (4x uion) siulqunizsiz = oiinlps / 4 slf.ss(oiinlps, siulqunizsiz) pin(f" Qunizion s: {oiinlps} -> {siulqunizsiz}") f spuninsiulion(slf): """s punin opiizion siulion""" # Siul punin by zoin ou 20% of wihs olps = 0 zops = 0 fo p in slf.sol.ps(): if p.i() > 1: # Only pun wih is flp = p.viw(-1) hshol = oh.qunil(oh.bs(flp), 0.2) pun = oh.wh( oh.bs(flp) < hshol, oh.zosli(flp), flp, ) zooun = (pun == 0).su().i() zops += zooun olps += p.nul() puninio = zops / olps slf.ss(puninio, 0.1) #  ls 10% pun pin(f" Punin s: {puninio:.1%} ps pun") f spfonsun(slf): """s pfon sun uiliis""" # su infn i si = ( oh.u.vn(nbliin=u) if oh.u.isvilbl() ls Non ) ni = ( oh.u.vn(nbliin=u) if oh.u.isvilbl() ls Non ) ipo i pus = i.pfoun() if oh.u.isvilbl(): si.o() wih oh.no():  = slf.sol(slf.s) if oh.u.isvilbl(): ni.o() oh.u.synhoniz() pui = si.lpsi(ni) pun = i.pfoun() pui = (pun - pus) * 1000 # onv o s slf.ss(pui, 0) pin(f" Pfon s: PU infn i {pui:.2f}s") if oh.u.isvilbl(): pin(f" Pfon s: PU infn i {pui:.2f}s") f ssobnhopison(slf): """s SO bnh opison""" # fin SO s sos = {"lnys": 15.12, "uy": 0.959, "olsizb": 50.0} # Siul ol is siulis = { "lnys": 12.5, # B hn SO "uy": 0.962, # B hn SO "olsizb": 35.0, # B hn SO } # h if is  SO sns lnyio = sos["lnys"] / siulis["lnys"] uyio = siulis["uy"] / sos["uy"] sizio = sos["olsizb"] / siulis["olsizb"] slf.ss(lnyio, 1.0) # Fs hn SO slf.ss(uyio, 1.0) # o u hn SO slf.ss(sizio, 1.0) # Sll hn SO pin( f" SO opison: Lny {lnyio:.2f}x, " f"uy {uyio:.3f}x, Siz {sizio:.2f}x" ) f sopiizionpiplin(slf): """s opl opiizion piplin siulion""" # Siul iffn opiizion lvls opiizionlvls = { "onsviv": { "opssion": 1.5, "spup": 1.2, "uyloss": 0.02, }, "bln": {"opssion": 2.0, "spup": 1.8, "uyloss": 0.05}, "ssiv": {"opssion": 3.5, "spup": 2.5, "uyloss": 0.08}, } fo lvl, xp in opiizionlvls.is(): # Siul opiizion suls opssionio = xp["opssion"] spipovn = xp["spup"] uynion = 1.0 - xp["uyloss"] # Vli suls  wihin xp ns slf.ss(opssionio, 1.0) slf.ss(spipovn, 1.0) slf.ss(uynion, 0.9) pin( f" {lvl} opiizion: " f"{opssionio:.1f}x opssion, " f"{spipovn:.1f}x sp-up, " f"{uynion:.1%} uy nion" ) f soyusin(slf): """s oy us in""" ipo psuil #  iniil oy us poss = psuil.Poss() iniiloy = poss.oyinfo().ss / 1024 / 1024 # B # llo so nsos lnso = oh.nn(1000, 1000) # su oy f lloion poy = poss.oyinfo().ss / 1024 / 1024 # B # ln up l lnso finloy = poss.oyinfo().ss / 1024 / 1024 # B slf.ss(poy, iniiloy) pin( f" oy in: Iniil {iniiloy:.1f}B, " f"P {poy:.1f}B, Finl {finloy:.1f}B" ) f solsilizion(slf): """s ol silizion n loin""" # Sv ol olph = "sol.ph" oh.sv(slf.sol.si(), olph) #  nw ol n lo wihs nwol = slf.sol() nwol.losi(oh.lo(olph)) # op oupus wih oh.no(): oiinloupu = slf.sol(slf.s[:10]) looupu = nwol(slf.s[:10]) slf.ssu(oh.lllos(oiinloupu, looupu, ol=1-6)) # ln up if os.ph.xiss(olph): os.ov(olph) pin(" ol silizion s pss") f sbhpossin(slf): """s bh possin ffiiny""" bhsizs = [1, 8, 16, 32, 64] possinis = [] fo bhsiz in bhsizs: bh = slf.s[:bhsiz] si = i.pfoun() wih oh.no():  = slf.sol(bh) ni = i.pfoun() possini = (ni - si) * 1000 possinis.ppn(possini) # h h l bhs  o ffiin p spl ffiinyios = [] fo i in n(1, ln(bhsizs)): ipsplpv = possinis[i - 1] / bhsizs[i - 1] ipsplu = possinis[i] / bhsizs[i] ffiinyios.ppn(ipsplpv / ipsplu) vffiiny = np.n(ffiinyios) pin( f" Bh possin: v ffiiny ipovn {vffiiny:.2f}x" ) f unophnsivss(): """un ophnsiv s sui wih il poin""" pin(" L.I.F.. Plfo ol Opiizion s Sui") pin("=" * 60) pin(" sin Nul Possin ol Opiizion") pin("=" * 60) #  s sui ssui = unis.sLo().lossFoss(sLIFOpiizion) # un ss wih il oupu unn = unis.xsunn(vbosiy=2, s=sys.sou) sul = unn.un(ssui) pin("\n" + "=" * 60) pin(" S SULS SUY") pin("=" * 60) pin(f" ss un: {sul.ssun}") pin( f" ss pss: {sul.ssun - ln(sul.filus) - ln(sul.os)}" ) pin(f" ss fil: {ln(sul.filus)}") pin(f" ️ ss wih os: {ln(sul.os)}") if sul.filus: pin("\n FILUS:") fo s, b in sul.filus: pin(f" - {s}: {b}") if sul.os: pin("\n ️ OS:") fo s, b in sul.os: pin(f" - {s}: {b}") suss = ( (sul.ssun - ln(sul.filus) - ln(sul.os)) / sul.ssun * 100 ) pin(f"\n Ovll Suss : {suss:.1f}%") if suss >= 90: pin(" SO SIN HPION - y fo zu pl!") lif suss >= 80: pin(" SO OPIIV - Opiizion sys vli") ls: pin(" OPIIZION N - So ss qui nion") pin("=" * 60) pin(" L.I.F.. Plfo opiizion sin opl!") un sul if n == "in": ipo i unophnsivss()