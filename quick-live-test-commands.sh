# Quick L.I.F.E. Platform Live Test Commands
# Copy and paste these commands into your Azure Cloud Shell or local terminal
# Generated: September 28, 2025

echo "🎯 L.I.F.E. Platform Live Endpoint & Function App Testing"
echo "========================================================="
echo ""

echo "📊 STEP 1: Set subscription and get Function App details"
echo "--------------------------------------------------------"
echo "az account set --subscription 5c88cef6-f243-497d-98af-6c6086d575ca"
echo ""
echo "az functionapp show --name life-functions-app --resource-group life-platform-rg"
echo ""

echo "📝 STEP 2: Check Function App logs for recent activity"
echo "-----------------------------------------------------"
echo "az functionapp logs tail --name life-functions-app --resource-group life-platform-rg --max-lines 30"
echo ""

echo "🔧 STEP 3: List available functions"
echo "----------------------------------"
echo "az functionapp function list --name life-functions-app --resource-group life-platform-rg"
echo ""

echo "🌐 STEP 4: Test Function App endpoints"
echo "-------------------------------------"
echo "# Get the Function App URL first:"
echo "FUNCTION_URL=\$(az functionapp show --name life-functions-app --resource-group life-platform-rg --query defaultHostName -o tsv)"
echo "echo \"Function App URL: https://\$FUNCTION_URL\""
echo ""
echo "# Test the main endpoint:"
echo "curl -I https://\$FUNCTION_URL"
echo ""
echo "# Test common API endpoints:"
echo "curl -I https://\$FUNCTION_URL/api/health"
echo "curl -I https://\$FUNCTION_URL/api/status"
echo ""

echo "💾 STEP 5: Check Storage Account accessibility"
echo "---------------------------------------------"
echo "az storage account list --resource-group life-platform-rg --query \"[].{Name:name, PrimaryEndpoints:primaryEndpoints.blob}\""
echo ""

echo "🔐 STEP 6: Verify Key Vault status"
echo "---------------------------------"
echo "az keyvault show --name kv-life-platform-prod --resource-group life-platform-rg --query \"{Name:name, VaultUri:properties.vaultUri, State:properties.provisioningState}\""
echo ""

echo "🌍 STEP 7: Test custom domains"
echo "------------------------------"
echo "# Test DNS resolution:"
echo "nslookup coach121life.com"
echo "nslookup lifementor121.com"
echo ""
echo "# Test HTTPS connectivity:"
echo "curl -I https://coach121life.com"
echo "curl -I https://lifementor121.com"
echo ""

echo "📊 STEP 8: Check all Function Apps across regions"
echo "------------------------------------------------"
echo "az functionapp list --query \"[?contains(name,'life')].{Name:name, State:state, Location:location, ResourceGroup:resourceGroup, DefaultHostName:defaultHostName}\" -o table"
echo ""

echo "🔄 STEP 9: Get Application Insights data (if configured)"
echo "-------------------------------------------------------"
echo "az monitor app-insights component show --app life-functions-app --resource-group life-platform-rg 2>/dev/null || echo 'Application Insights not configured'"
echo ""

echo "✅ STEP 10: Final status summary"
echo "-------------------------------"
echo "az resource list --resource-group life-platform-rg --query \"[].{Name:name, Type:type, Location:location, State:properties.provisioningState}\" -o table"
echo ""

echo "🎉 TESTING COMPLETE!"
echo "==================="
echo ""
echo "💡 MANUAL ENDPOINT TESTING:"
echo "You can also test these URLs directly in your browser:"
echo "- https://life-functions-app.azurewebsites.net"
echo "- https://coach121life.com"  
echo "- https://lifementor121.com"
echo "- https://life-platform-webapp.azurestaticapps.net (if static web app)"
echo ""
echo "🔧 LIVE LOG STREAMING:"
echo "To get real-time logs, run:"
echo "az functionapp logs tail --name life-functions-app --resource-group life-platform-rg --follow"