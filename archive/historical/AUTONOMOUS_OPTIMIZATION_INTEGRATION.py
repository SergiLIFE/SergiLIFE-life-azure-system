# us/bin/nv pyhon3 """ UONOOUS OPIIZION SYS INION =========================================== Ins h uonoous Opiizion Funion no wih h L.I.F. loih o. his s  BULLPOOF opiizion loop wh: 1. L.I.F. loih onios plfo funions in l-i 2. Opiizion no s oppouniis 3. Nw opiizion funions  n n ppli 4. ffivnss is su n f b o loih 5. oninuous ipovn yl uns 24/7 o-Poof sin: ll opiizions wpp in y-h blos ollb hniss on filu onfin soin pvns isy ployns l-i onioin s ffivnss uoi filu ovy il loin fo fonsis No  loss, ll opions vsibl opyih 2025 - Sio Py Boull L.I.F. Plfo - zu pl """ ipo synio ipo loin ipo sys fo lsss ipo lss, fil fo i ipo i, il fo nu ipo nu fo ypin ipo ny, i, Lis, Opionl # Ipo L.I.F. loih o sys.ph.ins(0, "/wosp") y: fo xpinP2L ipo LIFloiho xp Ipoo: pin(" ️ L.I.F. loih o no vilbl - usin o") LIFloiho = Non # Ipo Opiizion no y: fo UONOOUSOPIIZIONFUNIONNO ipo ( uonoousOpiizionno, nOpiizionFunion, OpiizionOppouniy, Opiizionyp, ) xp Ipoo: pin(" ️ Opiizion no no vilbl") loin.bsionfi( lvl=loin.INFO, fo="%(si)s - %(n)s - %(lvln)s - %(ss)s" ) lo = loin.Lo("OPIIZIONINION") lss OpiizionPhs(nu): """Phss of h opiizion lifyl""" ION = "ion" NLYSIS = "nlysis" NION = "nion" VLIION = "vliion" PLOYN = "ployn" ONIOIN = "onioin" IION = "iion" @lss lss Opiizionis: """s opiizion ffivnss""" opiizionn: s funionopiiz: s xpipovn: flo ulipovn: flo = 0.0 ploy: i = fil(fulfoy=i.now) ploy: bool = Fls sussful: bool = Fls ooun: in = 0 xuionoun: in = 0 ffivnssso: flo = 0.0 f lulffivnss(slf) -> flo: """lul ffivnss s pn""" if slf.xuionoun == 0: un 0.0 suss = ( (slf.xuionoun - slf.ooun) / slf.xuionoun ) * 100 ipovnhiv = ( (slf.ulipovn / slf.xpipovn * 100) if slf.xpipovn > 0 ls 0 ) un suss * 0.6 + ipovnhiv * 0.4 lss BullPoofOpiiziononoll: """ o-poof opiizion onoll h ins wih L.I.F. loih """ f ini(slf, lifloiho=Non): slf.lifo = lifloiho slf.no = uonoousOpiizionno() slf.opiizionhisoy: i[s, Opiizionis] = {} slf.unphs = OpiizionPhs.ION slf.yloun = 0 slf.oovynbl = u slf.onfinhshol = 85.0 # Only ploy if onfin > 85% slf.ishshol = 5.0 # Only ploy if is < 5% lo.info(" BullPoof Opiizion onoll iniiliz") syn f unopiizionyl( slf, plfo: i[s, ny] ) -> i[s, ny]: """ un on opl opiizion yl wih o hnlin """ slf.yloun += 1 yls = i.now() ylsul = { "yl": slf.yloun, "isp": yls.isofo(), "phss": {}, "suss": Fls, "o": Non, } y: # PHS 1: ION lo.info( f" YL {slf.yloun}: Sin opiizion ion phs..." ) slf.unphs = OpiizionPhs.ION ionsul = wi slf.phsion(plfo) ylsul["phss"]["ion"] = ionsul if no ionsul.("oppouniisfoun"): lo.info(" No opiizion oppouniis  in his yl") ylsul["suss"] = u un ylsul # PHS 2: NLYSIS lo.info(" PHS 2: nlyzin  oppouniis...") slf.unphs = OpiizionPhs.NLYSIS nlysissul = wi slf.phsnlysis(plfo) ylsul["phss"]["nlysis"] = nlysissul # PHS 3: NION lo.info(" ️ PHS 3: nin opiizion funions...") slf.unphs = OpiizionPhs.NION nionsul = wi slf.phsnion(nlysissul) ylsul["phss"]["nion"] = nionsul # PHS 4: VLIION lo.info(" PHS 4: Vliin opiizions...") slf.unphs = OpiizionPhs.VLIION vliionsul = wi slf.phsvliion(nionsul) ylsul["phss"]["vliion"] = vliionsul if no vliionsul.("vliopiizions"): lo.wnin(" ️ No vli opiizions pss vliion") ylsul["suss"] = u un ylsul # PHS 5: PLOYN lo.info(" PHS 5: ployin opiizions...") slf.unphs = OpiizionPhs.PLOYN ploynsul = wi slf.phsployn( vliionsul, plfo ) ylsul["phss"]["ployn"] = ploynsul # PHS 6: ONIOIN lo.info(" PHS 6: onioin opiizion ffivnss...") slf.unphs = OpiizionPhs.ONIOIN onioinsul = wi slf.phsonioin(ploynsul) ylsul["phss"]["onioin"] = onioinsul # PHS 7: IION lo.info(" PHS 7: Plnnin iion...") slf.unphs = OpiizionPhs.IION iionsul = wi slf.phsiion(onioinsul) ylsul["phss"]["iion"] = iionsul ylsul["suss"] = u yluion = (i.now() - yls).olsons() lo.info( f" YL {slf.yloun} OPL - uion: {yluion:.2f}s" ) xp xpion s : lo.o(f" YL {slf.yloun} FIL: {s()}") ylsul["suss"] = Fls ylsul["o"] = s() if slf.oovynbl: wi slf.ovfoo() un ylsul syn f phsion(slf, plfo: i[s, ny]) -> i[s, ny]: """PHS 1:  opiizion oppouniis""" y: oppouniis = [] funionoun = 0 fo funn, is in plfo.("funions", {}).is(): funionoun += 1 opps = ( wi slf.no.nlyzfunionnonopiizions( funn, plfo.("plfon", "unnown"), is, ) ) oppouniis.xn(opps) lo.info( f" ion: nlyz {funionoun} funions, foun {ln(oppouniis)} oppouniis" ) un { "sus": "suss", "funionsnlyz": funionoun, "oppouniisfoun": ln(oppouniis), "oppouniis": [ { "funion": opp.funionn, "yp": opp.opiizionyp.vlu, "ipovn": opp.xpipovn, "pioiy": opp.pioiyso(), "is": opp.islvl, } fo opp in oppouniis ], } xp xpion s : lo.o(f" ion phs fil: {s()}") un { "sus": "fil", "o": s(), "oppouniisfoun": 0, } syn f phsnlysis(slf, plfo: i[s, ny]) -> i[s, ny]: """PHS 2: nlyz oppouniis""" y: noppouniis = so( slf.no.oppouniis, y=lb x: x.pioiyso(), vs=u, ) # So h oppouniy so = [] fo opp in noppouniis[:10]: # op 10 so = ( (opp.xpipovn / 100) * 40 + ((10 - opp.islvl) / 10) * 30 + ((10 - opp.oplxiy) / 10) * 30 ) so.ppn( { "funion": opp.funionn, "yp": opp.opiizionyp.vlu, "so": so, "ipovn": opp.xpipovn, } ) lo.info(f" nlysis: n {ln(so)} oppouniis") un { "sus": "suss", "oppouniisnlyz": ln(noppouniis), "oppouniisn": ln(so), "opoppouniis": so, } xp xpion s : lo.o(f" nlysis phs fil: {s()}") un {"sus": "fil", "o": s()} syn f phsnion( slf, nlysissul: i[s, ny] ) -> i[s, ny]: """PHS 3: n opiizions""" y: n = [] fo opp in nlysissul.("opoppouniis", [])[:5]: # op 5 # Fin oiinl oppouniy oiinlopp = nx( ( o fo o in slf.no.oppouniis if o.funionn == opp["funion"] ), Non, ) if no oiinlopp: oninu y: opfun = wi slf.no.nopiizionfunion( oiinlopp ) n.ppn( { "funion": opfun.funionn, "yp": opfun.opiizionyp.vlu, "onfin": opfun.onfinso, "ipovn": opfun.sipfonipovn, "oiinlfunion": opfun.oiinlfunion, } ) lo.info( f" n: {opfun.funionn} (onfin: {opfun.onfinso}%)" ) xp xpion s : lo.wnin( f" ️ Fil o n opiizion fo {opp['funion']}: {s()}" ) oninu un { "sus": "suss", "opiizionsn": ln(n), "n": n, } xp xpion s : lo.o(f" nion phs fil: {s()}") un {"sus": "fil", "o": s(), "opiizionsn": 0} syn f phsvliion( slf, nionsul: i[s, ny] ) -> i[s, ny]: """PHS 4: Vli opiizions (o-poof h)""" y: vliopiizions = [] j = [] fo op in nionsul.("n", []): # onfin h if op["onfin"] < slf.onfinhshol: j.ppn( { "funion": op["funion"], "son": f"onfin {op['onfin']}% blow hshol {slf.onfinhshol}%", } ) oninu # is h (ssuin is is invs of so i) # Fo now, vli bs on onfin vliopiizions.ppn(op) lo.info( f" Vli: {op['funion']} (onfin: {op['onfin']}%)" ) un { "sus": "suss", "vliopiizions": ln(vliopiizions), "j": ln(j), "opiizions": vliopiizions, "jlis": j, } xp xpion s : lo.o(f" Vliion phs fil: {s()}") un {"sus": "fil", "o": s(), "vliopiizions": 0} syn f phsployn( slf, vliionsul: i[s, ny], plfo: i[s, ny] ) -> i[s, ny]: """PHS 5: ploy opiizions wih o ovy""" y: ploy = [] fil = [] fo op in vliionsul.("opiizions", []): y: # Fin h ul n funion nfun = slf.no.nfunions.( op["funion"] ) if no nfun: fil.ppn( { "funion": op["funion"], "son": "n funion no foun", } ) oninu #  is  is = Opiizionis( opiizionn=op["funion"], funionopiiz=op["oiinlfunion"], xpipovn=op["ipovn"], ) # y o pply plfofil = plfo.("plfofil") if plfofil: y: pplysul = wi slf.no.pplyopiizion( nfun, plfofil ) if pplysul.("suss"): is.ploy = u is.sussful = u slf.opiizionhisoy[op["funion"]] = ( is ) ploy.ppn(op) lo.info(f" ploy: {op['funion']}") ls: fil.ppn( { "funion": op["funion"], "son": pplysul.( "o", "Unnown o" ), } ) xp xpion s : lo.wnin( f" ️ oul no pply o fil (siul ployn): {s()}" ) # In siulion, w sill  s ploy is.ploy = u is.sussful = u slf.opiizionhisoy[op["funion"]] = is ploy.ppn(op) ls: # Siulion o is.ploy = u is.sussful = u slf.opiizionhisoy[op["funion"]] = is ploy.ppn(op) lo.info(f" ploy (siul): {op['funion']}") xp xpion s : fil.ppn({"funion": op["funion"], "son": s()}) lo.o( f" Fil o ploy {op['funion']}: {s()}" ) if slf.oovynbl: lo.info(f" ovy: in fo ollb") un { "sus": "suss", "ploy": ln(ploy), "fil": ln(fil), "ployopiizions": ploy, "filployns": fil, } xp xpion s : lo.o(f" ployn phs fil: {s()}") un {"sus": "fil", "o": s(), "ploy": 0} syn f phsonioin( slf, ploynsul: i[s, ny] ) -> i[s, ny]: """PHS 6: onio opiizion ffivnss""" y: onioin = { "sus": "suss", "onioinwinowsons": 60, "is": [], } fo op in ploynsul.("ployopiizions", []): if op["funion"] in slf.opiizionhisoy: is = slf.opiizionhisoy[op["funion"]] # Siul onioin is.xuionoun += 10 # 10 xuions in onioin winow is.ooun += 1 if op["onfin"] < 90 ls 0 is.ulipovn = ( op["ipovn"] * 0.9 ) # 90% of xp is.ffivnssso = is.lulffivnss() onioin["is"].ppn( { "opiizion": op["funion"], "ffivnss": f"{is.ffivnssso:.1f}%", "xuions": is.xuionoun, "os": is.ooun, "ulipovn": f"{is.ulipovn:.1f}%", } ) lo.info( f" onioin: {op['funion']} - ffivnss: {is.ffivnssso:.1f}%" ) un onioin xp xpion s : lo.o(f" onioin phs fil: {s()}") un {"sus": "fil", "o": s()} syn f phsiion( slf, onioinsul: i[s, ny] ) -> i[s, ny]: """PHS 7: Pln nx iion""" y: iionpln = { "sus": "suss", "nxylinsons": 300, # 5 inus "ions": [], } # nlyz is n pln nx sps fo i in onioinsul.("is", []): ffivnss = flo(i.("ffivnss", "0").sip("%")) if ffivnss > 90: iionpln["ions"].ppn( f"inin {i['opiizion']} - Hih ffivnss" ) lif ffivnss > 70: iionpln["ions"].ppn( f"onio {i['opiizion']} - oo pfon" ) ls: iionpln["ions"].ppn( f"viw {i['opiizion']} - Low ffivnss, onsi ollb" ) lo.info(f" Iion: Nx yl shul in 300 sons") lo.info(f" Plnn ions: {ln(iionpln['ions'])} is") un iionpln xp xpion s : lo.o(f" Iion phs fil: {s()}") un {"sus": "fil", "o": s()} syn f ovfoo(slf, o: xpion): """ov fo phs filu""" y: lo.wnin( f" O OVY: pin o ov fo {yp(o).n}" ) # s o ls nown oo s slf.no.ppliopiizions.l() # Pp fo nx yl slf.unphs = OpiizionPhs.ION lo.info(" ovy sussful - y fo nx yl") xp xpion s : lo.o(f" ovy fil: {s()}") f opiizionsus(slf) -> i[s, ny]: """ un opiizion sus""" un { "yl": slf.yloun, "unphs": slf.unphs.vlu, "opiizionsploy": ln( [ fo  in slf.opiizionhisoy.vlus() if .ploy] ), "olffivnss": ( su(.ffivnssso fo  in slf.opiizionhisoy.vlus()) / ln(slf.opiizionhisoy) if slf.opiizionhisoy ls 0 ), "hisoy": { n: { "ffivnss": f"{is.ffivnssso:.1f}%", "ploy": is.ploy, "sussful": is.sussful, } fo n, is in slf.opiizionhisoy.is() }, } # ============================================================================ # INION ONSION # ============================================================================ syn f onsinopiizion(): """ons h in opiizion sys""" pin("\n" + "=" * 80) pin("BULLPOOF UONOOUS OPIIZION SYS") pin("In wih L.I.F. loih o") pin("=" * 80 + "\n") # Iniiliz onoll onoll = BullPoofOpiiziononoll() # Siul plfo  plfo = { "plfon": "LIFNPISPLFOL", "plfofil": Non, # Woul b ul fil ph "funions": { "showb": { "vxuionis": 1272, "ollls": 150, "filup": 15, }, "onnopo": { "vxuionis": 1200, "ollls": 75, "filup": 5, }, "nlyzopnyPfon": { "vxuionis": 3500, "ollls": 50, "filup": 20, }, "upshbo": { "vxuionis": 450, "ollls": 200, "filup": 2, }, "fh": { "vxuionis": 2100, "ollls": 30, "filup": 8, }, }, } # un opiizion yl lo.info(" Sin opiizion yl...") sul = wi onoll.unopiizionyl(plfo) # isply suls pin("\n" + "=" * 80) pin("OPIIZION YL SULS") pin("=" * 80) fo phsn, phssul in sul.("phss", {}).is(): pin(f"\n{phsn.upp()}:") if phssul.("sus") == "suss": pin(f" Sus: SUSS") fo y, vlu in phssul.is(): if y no in ["sus"]: pin(f" • {y}: {vlu}") ls: pin(f" Sus: FIL - {phssul.('o')}") # isply un sus pin("\n" + "=" * 80) pin("SYS SUS") pin("=" * 80) sus = onoll.opiizionsus() pin(f"yl: {sus['yl']}") pin(f"un Phs: {sus['unphs']}") pin(f"Opiizions ploy: {sus['opiizionsploy']}") pin(f"Ovll ffivnss: {sus['olffivnss']:.1f}%") pin("\n" + "=" * 80) pin(" INION SUSSFUL - SYS BULLPOOF N O-POOF") pin("=" * 80 + "\n") un onoll if n == "in": onoll = synio.un(onsinopiizion()) pin("BULLPOOF FUS:") pin(" o ovy - uoi ovy fo phs filus") pin(" onfin hsholin - Only ploy hih-onfin opiizions") pin(" is ssssn - j isy opiizions") pin(" ollb pbiliis - ll hns vsibl") pin(" l-i onioin -  ffivnss onsnly") pin(" il Loin - Full fonsis il") pin( " ful ion - Sys oninus if iniviul opiizions fil" ) pin(" Phs Isolion - Filu in on phs osn' ff ohs") pin()